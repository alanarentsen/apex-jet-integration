/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var ga;function ka(a,F){0==a.indexOf("dvt.")&&(a=a.substring(4));var D=a.split("."),E=eval("dvt");D[0]in E||!E.execScript||E.execScript("var "+D[0]);for(var v;D.length&&(v=D.shift());)D.length||void 0===F?E=E[v]?E[v]:E[v]={}:E[v]=F}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function F(a){this.Init(a)}function D(a,c,e,f){this.Init(c,e,f);this.Fa=a}function E(){}function v(){this.Init({alta:v.If})}function x(a,c,e){this.Init(a,c,e)}function f(a,c,e,f,p,n,z,w,v){this.Init(a,c,e,f,p,n,z,w,v)}function c(a){this.LD=a}a.Nh=function(a,c,e){this.Init(a,c,e)};a.f.v(a.Nh,a.$b);a.Nh.newInstance=function(c,e,f){return new a.Nh(c,e,f)};a.Nh.prototype.Init=function(c,e,f){a.Nh.C.Init.call(this,c,e,f);this.a.Gc.ja().setAttributeNS(null,"text-rendering","geometricPrecision");
this.u=new D(this,c,this.Ef,this);this.u.Lf(this);a.m.eb()||this.u.$r(new F(this.u));this.Ff=new v;this.Pb=[];this.Dv=[];this.ck=null;this.Go=new a.vc(this.a);this.u.hS(this.Go)};a.Nh.prototype.ia=function(c,e,f){isNaN(e)||isNaN(f)||(this.Oa=e,this.cb=f);this.FZ();this.ne(c);this.Vq();this.Ji=this.ha;this.$G=this.Pb;this.Pb=[];this.nEa=[];this.ha=new a.ca(this.a);this.B(this.ha);p.ia(this,this.ha,new a.U(0,0,this.Oa,this.cb));this.Hb&&this.Hb.Wr(this.J.selection,this.Ov());e=this.J.animationDuration;
f=new a.U(0,0,this.Oa,this.cb);this.Ji?"none"!==this.J.animationOnDataChange&&c&&(this.mh=new a.ca(this.a),this.B(this.mh),c=new a.Pl(this.a,this.mh),c.En(this.$G,this.Pb),this.Cb=c.uz()):"none"!==this.J.animationOnDisplay&&(this.Cb=a.Ra.ZD(this.a,a.Ra.Wz,this.ha,f,e));this.Cb?(this.u.ed(),this.u.kn(this),this.Cb.pg(this.Tya,this),this.Cb.play()):this.Tya();this.ps()};a.Nh.prototype.Gva=function(a){this.Pb=a};a.Nh.prototype.Bi=function(){this.Lc||(this.Lc=new c(this));return this.Lc};a.Nh.prototype.AL=
function(a,c){this.Dv.push(a);this.nEa[c]=a};a.Nh.prototype.Ov=function(){return this.Dv};a.Nh.prototype.ey=function(){return this.nEa};a.Nh.prototype.Zd=function(c){this.J.highlightedCategories=a.Za.clone(c);a.sd.Zd(c,this.Ov(),"any"===this.J.highlightMatch);this.ck&&this.ck.Zd(c)};a.Nh.prototype.select=function(c){this.J.selection=a.Za.clone(c);this.Hb&&this.Hb.Wr(this.J.selection,this.Ov())};a.Nh.prototype.ne=function(c){c?this.J=this.Ff.mo(c):this.J||(this.J=this.eA());c=this.J.selectionMode;
this.Hb="single"===c?new a.Hb(a.Hb.iv):"multiple"===c?new a.Hb(a.Hb.os):null;this.u.Ey(this.Hb);a.m.Gl()||(this.J.animationOnDisplay="none",this.J.animationOnDataChange="none")};a.Nh.prototype.vk=function(){return a.I.Yc(this.A(),"componentName",a.I.pa,"TAG_CLOUD")};a.Nh.prototype.Tya=function(){this.Ji&&(this.removeChild(this.Ji),this.Ji.Ec(),this.Ji=null);this.mh&&(this.removeChild(this.mh),this.mh.Ec(),this.mh=null);this.Cb&&this.u.Lf(this);this.J.highlightedCategories&&0<this.J.highlightedCategories.length&&
this.Zd(this.J.highlightedCategories);this.Bj||this.ml();this.Cb=null;this.Bj=!1};a.Nh.prototype.FZ=function(){this.u.ed();this.Dv.length=0};a.Nh.prototype.Ef=function(c,e){var f=c.type;if("categoryHide"==f||"categoryShow"==f){var p=c.category,v=a.Y.ac(this.J.hiddenCategories,p);"categoryHide"==f&&0>v&&this.J.hiddenCategories.push(p);"categoryShow"==f&&0<=v&&this.J.hiddenCategories.splice(v,1);this.ia(this.J,this.Oa,this.cb)}else"categoryHighlight"==f&&(this!=e?this.Zd(c.categories):this.ck&&this.ck!=
e&&this.ck.Ef(c,e));c&&this.dispatchEvent(c)};a.Nh.prototype.l5a=function(a){return this.Hb?a[0]:null};a.Nh.prototype.J2a=function(a){a.gb()||(this.Hb.jn(a,!1),this.u.Du());a=[];for(var c=this.Hb.getSelection(),e=0;e<c.length;e++){var f=c[e];f instanceof x&&a.push(f.getId())}return a};a.Nh.prototype.Rp=function(){for(var a=[],c=this.Hb.getSelection(),e=0;e<c.length;e++)a=a.concat(c[e].Xd());return a};a.Nh.prototype.hn=function(a,c,e){return this.Go.hn(e)};a.Nh.prototype.Dl=function(a,c){return this.Go.Dl(a,
c)};a.Nh.prototype.ay=function(a,c){return this.Go.ay(a,c)};a.Nh.prototype.bC=function(a,c){return this.Go.bC(a,c)};a.f.v(c,a.Lc);c.prototype.Ql=function(a){return(a=this.LD.u.Ya(a))&&a instanceof x?"item["+this.LD.ey().indexOf(a)+"]":null};c.prototype.Sh=function(c){if(c==a.Lc.Bw)return this.fA(this.LD);var e=c.indexOf("[");return 0<e&&"item"===c.substring(0,e)&&(c=this.LD.ey()[parseInt(c.substring(e+1,c.length-1))])?c.Xd()[0].ja():null};c.prototype.getItem=function(a){if(a=this.LD.ey()[a]){var c=
{};c.color=a.pi();c.tooltip=a.Eh();c.label=a.ag();c.value=a.getValue();c.selected=a.gb();return c}return null};c.prototype.q4=function(){return this.LD.Ov().length};a.f.v(f,a.Fb);f.BRa=.3;f.CRa=.6;f.pda=0;f.f7=1;f.qda=2;f.prototype.Init=function(a,c,e,p,v,n,z,w,A){f.C.Init.call(this,c,e,p,v,n,A);this.LD=a;this.tz();this.gc.Ma(z);this.gc.sc(w);n&&this.bCa(n)};f.prototype.hc=function(a){this.wi!=a&&((this.wi=a)?this.wl?this.ub(this.u$):this.ub(this.xaa):this.ub(this.sK))};f.prototype.Rc=function(){this.wl||
(this.wl=!0,this.wi?this.ub(this.u$):this.ub(this.Pma))};f.prototype.Cc=function(){this.wi?this.ub(this.xaa):this.ub(this.sK);this.wl=!1};f.prototype.Mf=function(c,p){var t=new a.td(this.a,this,e.Lb(this.LD)),v=this.Bd(),y=p.Bd(),n=!1,z=y.N(a.j.od),w=v.N(a.j.od);if(z!=w){var A=this;this.ub(v.Ma(a.j.od,z));t.da.aa(a.L.N8,this,function(){return A.Bd().N(a.j.od)},function(c){A.ub(A.Bd().Ma(a.j.od,c))},w)}y=parseFloat(y.N(a.j.hi));v=parseFloat(v.N(a.j.hi));y!=v&&(n=!0,A=this,this.Ag(y),t.da.aa(a.L.ta,
this,function(){return parseFloat(A.Bd().N(a.j.hi))},this.Ag,v));v=p.rb();y=this.rb();z=p.cl();w=this.cl();if(y!=v||n&&w!=z)w!=z&&(v=f.RTa(p,v,z)),this.na(v),t.da.aa(a.L.ta,this,this.rb,this.na,y);n=p.vb();v=this.vb();v!=n&&(this.Qa(n),t.da.aa(a.L.ta,this,this.vb,this.Qa,v));p.qa(0);c.add(t,f.f7)};f.prototype.ai=function(c){c.add(new a.Wg(this.a,this,e.Lb(this.LD)),f.pda)};f.prototype.nh=function(c){this.qa(0);c.add(new a.dg(this.a,this,e.Lb(this.LD)),f.qda)};f.prototype.Ag=function(a){f.C.Ag.call(this,
a);this.bCa(this.Bd())};f.prototype.bCa=function(c){this.sK=c.clone();c=this.sK.N(a.j.od);this.sK.Ma(a.j.ge,null);this.Pma=this.sK.clone();var e=f.tEa(c,f.BRa);this.Pma.Ma(a.j.ge,e);this.Pma.Ma(a.j.od,a.D.Ok(e));this.xaa=this.sK.clone();this.xaa.Ma(a.j.ge,c);this.xaa.Ma(a.j.od,a.D.Ok(c));this.u$=this.sK.clone();c=f.tEa(c,f.CRa);this.u$.Ma(a.j.ge,c);this.u$.Ma(a.j.od,a.D.Ok(c))};f.RTa=function(c,e,f){c=c.oJa();return f==a.M.Fj?e+c.b:f==a.M.ii?e-c.b:e};f.tEa=function(c,e){var f=a.D.mj(c),p=a.D.kj(c),
v=a.D.hj(c);return a.D.sC(Math.floor(255*(1-e)+e*f),Math.floor(255*(1-e)+e*p),Math.floor(255*(1-e)+e*v))};a.f.v(x,a.f);x.prototype.Init=function(c,e,f){this.Fa=c;this.af=e;this.sb=f;this.iD=this.wi=!1;f.url?(e.zg("link"),this.QXa=a.l.Gba("_blank",f.url)):e.zg("img");this.Ro()};x.prototype.getId=function(){return this.sb.id};x.prototype.ag=function(){return this.sb.label};x.prototype.getValue=function(){return this.sb.value};x.prototype.Eh=function(){return this.sb.shortDesc};x.prototype.ph=function(){return this.sb.action};
x.prototype.bf=function(){var a=this.Fa.A().tooltip;return(a=a?a.renderer:null)?this.Fa.a.cf().Rs(a,this.zj()):this.Eh()};x.prototype.zj=function(){return{id:this.getId(),label:this.ag(),color:this.pi(),value:this.getValue()}};x.prototype.Gba=function(){return this.QXa};x.prototype.pi=function(){return this.af.sK.N(a.j.od)};x.prototype.Jn=function(a){this.iD=a};x.prototype.ab=function(){return this.iD};x.prototype.gb=function(){return this.wi};x.prototype.hc=function(a){this.wi=a;this.af.hc(a);this.Ro()};
x.prototype.Rc=function(){this.af.Rc()};x.prototype.Cc=function(){this.af.Cc()};x.prototype.Kd=function(c){var e=this.Fa.u.ya;return c.type==a.MouseEvent.He||e.xo(c)?this:e.Uh(c)?F.Kd(this,c,this.Fa.Ov()):null};x.prototype.md=function(a){return this.af.V(a)};x.prototype.$j=function(){return this.af.ja()};x.prototype.rh=function(){this.Sc=!0;this.Rc()};x.prototype.mf=function(){this.Sc&&(this.Sc=!1,this.Cc())};x.prototype.Ae=function(){return this.Sc};x.prototype.Xd=function(){return[this.af]};x.prototype.te=
function(){var c=[];this.ab()&&c.push(a.I.Ja(a.I.pa,this.gb()?"STATE_SELECTED":"STATE_UNSELECTED"));return a.R.lm(this.Eh(),c)};x.prototype.rd=function(){return this.sb.categories};x.prototype.Ro=function(){a.m.Vj()||this.af.Od("label",this.te())};x.prototype.pk=function(){if(!this.Lp&&(this.Lp=[],this.sb.showPopupBehaviors))for(var c=this.sb.showPopupBehaviors,e=0;e<c.length;e++)this.Lp.push(new a.hb(c[e].popupId,c[e].triggerType,c[e].alignId,c[e].align));return this.Lp};x.prototype.hn=function(a){return this.Fa.l5a(a)};
x.prototype.Dl=function(){return this.Fa.J2a(this)};x.prototype.Rp=function(){return this.Fa.Rp()};a.f.v(v,a.ka);v.If={animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,hiddenCategories:[],hideAndShowBehavior:"none",highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",layout:"rectangular",selectionMode:"none",_statusMessageStyle:new a.j(a.ka.pj+"color: #333333;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_style:new a.j(a.ka.pj+"color: #333333;")},
touchResponse:"auto"};var p={};a.f.v(p,a.f);p.ia=function(a,c,e){p.Cn(a,c,e);p.Toa(a,c,e);p.cD(e);var f=a.A();f.items&&0<f.items.length?(f=p.s2(a,c,e),0<f.length?(a.Gva(f),a.u.Yr(a.Ov()[0])):p.lu(a,c,e)):p.lu(a,c,e)};p.lu=function(c,e,f){var p=c.A(),v=p.emptyText;v||(v=a.I.Yc(p,"labelNoData",a.I.pa,"NO_DATA",null));a.ga.tm(e,v,new a.U(f.x,f.y,f.b,f.i),c.u,p._statusMessageStyle)};p.Cn=function(c,e,f){c=new a.Rect(c.a,f.x,f.y,f.b,f.i);c.Yb();e.B(c)};p.s2=function(c,e,p){for(var v=c.A(),y=[],n=v.items,
z=Number.MAX_VALUE,w=-Number.MAX_VALUE,A=0;A<n.length;A++)z=Math.min(z,n[A].value),w=Math.max(w,n[A].value);var z=E.Y2a(z,w),w=a.Y.WB(v.hiddenCategories),d=a.j.dca(),h=v.styleDefaults,B=h.svgStyle||h.style;!B||B instanceof Object||(B=a.j.IK(B));for(A=0;A<n.length;A++){var r=n[A];r.categories||(r.categories=[r.label]);if(!w||!a.Y.DI(w,r.categories)){var l=h._style.clone(),C=r.svgStyle||r.style;!C||C instanceof Object||(C=a.j.IK(C));var K=C&&C.color?C.color:r.color?r.color:B&&B.color?B.color:null;if(C=
a.Za.be(C,B)){for(var D=0;D<d.length;D++){var F=a.j.TD(d[D]);C[F]&&(l.Ma(d[D],C[F]),delete C[F])}delete C.color}K&&l.Ma(a.j.od,K);l.Ma(a.j.hi,z.call(null,r.value).toString());l=new f(c,c.a,r.label,0,0,l,C,r.svgClassName||r.className,r.id);C=new x(c,l,r);c.u.Xb(l,C);c.AL(C,A);"none"!==v.selectionMode&&C.Jn(!0);(C.ab()||r.url||C.ph())&&l.setCursor("pointer");y.push(l);e.B(l)}}0<y.length&&("cloud"===v.layout?E.T0a(p,y):E.K6a(p,y,a.m.ea(c.a)));return y};p.Toa=function(c,e,f){var p=c.A(),v=p.legend;if(v&&
v.sections){v=a.Za.clone(v);v.orientation="horizontal";v.halign="center";v.hoverBehavior=p.hoverBehavior;v.hideAndShowBehavior=p.hideAndShowBehavior;v.hiddenCategories=p.hiddenCategories;p=a.Rf.newInstance(c.a,c.Ef,c);e.B(p);var n=p.jy(v,f.b,f.i/3);p.ia(v,n.b,n.i);a.qj.position(f,"bottom",p,n.b,n.i,0);c.ck&&(c.ck.Ec(),e.removeChild(c.ck));c.ck=p}};p.cD=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.b=Math.round(a.b);a.i=Math.round(a.i)};a.f.v(E,a.f);E.Y2a=function(a,c){return function(e){return 12+
Math.ceil(2*(e-a)/(c-a)*12)}};E.T0a=function(c,e){var f=[],p=10/180,v=10/180;c.b>c.i?p*=c.b/c.i:v*=c.i/c.b;for(var n=2*Math.PI/180,z=null,w=0,A=[],d=[],h=0;h<e.length;h++)for(var B=!1,r=0,l=4,C=e[h],x=C.V(),w=Math.max(w,parseFloat(C.Bd().N(a.j.hi))),D=-1;!B;){var E=r%180;void 0===A[E]&&(A[E]=Math.cos(r*n));void 0===d[E]&&(d[E]=Math.sin(r*n));var F=p*r*A[E],ja=v*r*d[E],ea=new a.U(F,ja,x.b,x.i),B=!0;-1!=D&&f[D].mca(ea)&&(B=!1);if(B)for(E=0;E<h;E++)if(f[E].mca(ea)){D=E;B=!1;break}B&&(z=z?z.Hn(ea):ea,
D=-1,f[h]=ea,C.na(F),C.Qa(-x.y+ja));3600===r?l=3:5400===r?l=2:10800===r&&(l=1);r+=l}f=Math.max(z.b/c.b,z.i/c.i);p=z.x+z.b/2;z=z.y+z.i/2;for(E=0;E<e.length;E++)C=e[E],C.na(c.x+C.rb()/f+(c.b/2-p/f)),C.Qa(c.y+C.vb()/f+(c.i/2-z/f)),v=parseFloat(C.Bd().N(a.j.hi)),C.Ag(v/f)};E.K6a=function(c,e,f){for(var p=[],v=0,n=0,z=0,w=0;w<e.length;w++){var A=e[w],d=A.V(),v=Math.max(v,d.b),n=Math.max(n,d.i),z=Math.max(z,parseFloat(A.Bd().N(a.j.hi)));p.push(new a.eg(d.b,d.i))}w=0;for(A=(c.b-10)/v;.001<A-w;)v=(w+A)/2,
z=E.NBa(p,(c.b-10)/v),z.length*(v*n+2)-2>c.i-10?A=v:w=v;v=w;z=E.NBa(p,(c.b-10)/v);z.push(e.length);for(w=0;w<z.length-1;w++){var d=z[w],h=z[w+1],B=0,r=0,l=!0;if(1<h-d){for(var A=0,C=d;C<h;C++)A+=p[C].b*v,r=Math.max(r,p[C].i*v);B=(c.b-10-A)/(h-d-1);w==z.length-2&&(C=.5*r,C<B&&A+(h-d)*C<.9*(c.b-10)&&(B=C,l=!1))}for(var r=5+(w+1)*(n*v+2)-2,x=f?c.b-5:5,C=d;C<h;C++){var A=e[C],D=parseFloat(A.Bd().N(a.j.hi));A.Ag(D*v);A.Qa(c.y+r);l&&C==h-1&&C!=d?f?(A.Ph(),A.na(c.x+5)):(A.dh(),A.na(c.x+c.b-5)):(A.na(c.x+
x),f?(A.dh(),x-=p[C].b*v+B):(A.Ph(),x+=p[C].b*v+B))}}};E.NBa=function(a,c){var e=[0],f=a[0].b+2;if(1<a.length)for(var p=1;p<a.length;p++)f+a[p].b>c&&(e.push(p),f=0),f+=a[p].b+2;return e};var e={};a.f.v(e,a.f);e.Lb=function(a){return a.A().styleDefaults.animationDuration/1E3};a.f.v(D,a.u);D.prototype.iF=function(a){a=this.Ya(a.target);this.zma(a);this.FP(a)};D.prototype.yM=function(a){a=this.Ya(a.target);this.FP(a)};D.prototype.dv=function(a){a=this.Ya(a.target);this.zma(a);this.FP(a)};D.prototype.zma=
function(a){a instanceof x&&(a=a.Gba())&&a.call()};D.prototype.Ul=function(c){var e=!0,f=this.Fe();c.keyCode==a.KeyboardEvent.Mn?this.zma(f):e=D.C.Ul.call(this,c);return e};D.prototype.Ij=function(c,e,f){c=this.Fa.A();"dim"==c.hoverBehavior&&(e=e.rd?e.rd():[],c.highlightedCategories=f?e.slice():null,f=a.la.OI(c.highlightedCategories,f),e=a.$a.zq(c.styleDefaults.hoverBehaviorDelay),this.pF.Ef(f,this.Fa.Ov(),e,"any"==c.highlightMatch))};D.prototype.FP=function(c){c&&c.ph&&c.ph()&&this.kt(a.la.xy("action",
c.ph(),c.getId()))};D.prototype.Oy=function(){return this.Fa.A().touchResponse};a.f.v(F,a.ya);F.prototype.Init=function(a){F.C.Init.call(this,a)};F.prototype.Jz=function(a){return this.Uh(a)&&!a.ctrlKey};F.prototype.xo=function(c){return c.keyCode==a.KeyboardEvent.Kj&&c.ctrlKey};F.Kd=function(c,e,f){e=e.keyCode==a.KeyboardEvent.Be||e.keyCode==a.KeyboardEvent.kf?!0:!1;c=a.Y.ac(f,c)+(e?1:-1);return c<f.length&&0<=c?f[c]:null};a.f.v(function(){},a.cM);a.K(a,"TagCloud",a.Nh);a.K(a.Nh,"newInstance",a.Nh.newInstance);
a.K(a.Nh.prototype,"render",a.Nh.prototype.ia);a.K(a.Nh.prototype,"getAutomation",a.Nh.prototype.Bi);a.K(a.Nh.prototype,"highlight",a.Nh.prototype.Zd);a.K(a.Nh.prototype,"select",a.Nh.prototype.select);a.K(c.prototype,"getDomElementForSubId",c.prototype.Sh);a.K(c.prototype,"getItem",c.prototype.getItem);a.K(c.prototype,"getItemCount",c.prototype.q4)})(dvt);
  return dvt;
});
