/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","ojs/ojcomponentcore"],function(a){var g={properties:{valid:{type:"string",enumValues:["valid","invalidShown","invalidHidden","pending"],readOnly:!0,writeback:!0}},methods:{focusOn:{},showMessages:{}},extension:{CP:function(c){function b(){q=[];l(p);c.props.valid=k();for(var a=q.length,b=0;b<a;b++)d(q[b])}function d(a){a.addEventListener("validChanged",f.bind(this));a.addEventListener("disabledChanged",g.bind(this));a.addEventListener("readonlyChanged",g.bind(this))}function e(a){a.removeEventListener("validChanged",
f);a.removeEventListener("disabledChanged",g);a.removeEventListener("readonlyChanged",g)}function f(){c.props.valid=k()}function g(a){var b=a.target;a=b.valid;b=!(b.readonly||b.disabled);"valid"!==a&&(c.props.valid=b&&"invalidShown"===a?"invalidShown":k())}function k(){for(var a,b,c,d="valid",e=q.length,f=0;f<e&&"invalidShown"!==d;f++)a=q[f],t(a)&&(c=a.valid,b=a.disabled,a=a.readonly,b||a||("invalidShown"===c?d="invalidShown":"invalidHidden"===c?d="invalidHidden":"pending"===c&&"valid"===d&&(d="pending")));
return d}function l(a){var b,c,d,e=[],f;b=a.childNodes;d=b.length;for(c=0;c<d;c++)a=b[c],(f=m(a))?q.push(a):e.push(a);d=e.length;for(c=0;c<d;c++)l(e[c])}function m(a){return 1===a.nodeType&&-1!==a.tagName.indexOf("-")&&"valid"in a&&t(a)&&(a=a.valid,void 0!==a)?!0:!1}function n(){var a,b=[];if("invalidShown"!==p.valid)return null;for(var c=q.length,d=0;d<c;d++)a=q[d],a.disabled||a.readonly||"invalidShown"===a.valid&&b.push(a);if(0===b.length)return null;b.sort(function(a,b){return a.compareDocumentPosition(b)&
Node.DOCUMENT_POSITION_FOLLOWING?-1:1});return b[0]}function t(b){var c;b=a.Y.Xa(b).pi;void 0!==b&&(c=a.Components.qd(b));return void 0===b||c?!0:!1}var s=this,p=c.element,q=[],r;s.CU=new MutationObserver(function(a){if(document.body.contains(p)){for(var c,d,f=a.length,g=!1,h,k=0;k<f&&!g;k++){c=a[k];h=c.target;g=c.removedNodes;c=c.addedNodes;a:{d=void 0;for(var r=q.length,l=0;l<g.length;l++){d=g[l];if(1===d.nodeType&&-1!==q.indexOf(d)){g=!0;break a}for(var n=0;n<r;n++)if(d.contains(q[n])){g=!0;break a}}g=
!1}if(!g&&0<c.length){a:{d=h;r=q.length;l=void 0;if(1===d.nodeType)for(n=0;n<r;n++)if(l=q[n],l.contains(d)){d=!0;break a}d=!1}if(d=!d)a:if(d=c.length,m(h))d=!0;else{for(h=0;h<d;h++)if(m(c[h])){d=!0;break a}d=!1}d&&(g=!0)}}if(g){f=a.length;for(k=0;k<f;k++)for(h=a[k],c=h.removedNodes.length,g=0;g<c;g++)d=h.removedNodes[g],1===d.nodeType&&e(d);b()}}else this.disconnect()});s.N9=function(){p.classList.add("oj-validation-group");r=document.createElement("div");for(r.setAttribute("data-oj-context","");p.firstChild;)r.appendChild(p.firstChild);
p.appendChild(r)};s.oO=function(){a.Context.getContext(r).Dc().whenReady().then(function(){for(var a=q.length,c=0;c<a;c++)e(q[c]);b();s.CU.observe(p,{childList:!0,subtree:!0})})};s.Z3a=function(){return!0};s.showMessages=function(){for(var a,b=0;b<q.length;b++)a=q[b],!a.disabled&&!a.readonly&&"showMessages"in a&&a.showMessages()};s.focusOn=function(b){var c=null,c=null;if("@firstInvalidShown"===b)(c=n())&&("focusOn"in c?c.focusOn("@firstInvalidShown"):c.focus());else if(void 0===b){a:{b=null;for(var c=
q.length,d=0;d<c;d++)if(b=q[d],!b.readonly&&!b.disabled){c=b;break a}c=null}c&&("focusOn"in c?c.focusOn():c.focus())}else a.D.info("focusOn's parameter value is not '@firstInvalidShown' or empty, so it's a no-op.")}}}};Object.freeze(g);a.J.Ua("oj-validation-group",null,g);a.J.register("oj-validation-group",{metadata:a.J.getMetadata("oj-validation-group")})});