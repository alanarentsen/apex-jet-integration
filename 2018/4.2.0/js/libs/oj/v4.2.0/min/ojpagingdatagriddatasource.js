/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojpagingtabledatasource"],function(a){a.Dh=function(a,c){this.bC=a;this.Ss=c};o_("PagingHeaderSet",a.Dh,a);a.Dh.prototype.getData=function(a,c){return this.bC.getData(a+this.Ss,c)};a.f.j("PagingHeaderSet.prototype.getData",{getData:a.Dh.prototype.getData});a.Dh.prototype.getMetadata=function(a,c){return this.bC.getMetadata(a+this.Ss,c)};a.f.j("PagingHeaderSet.prototype.getMetadata",{getMetadata:a.Dh.prototype.getMetadata});a.Dh.prototype.getCount=function(){return this.bC.getCount()};
a.f.j("PagingHeaderSet.prototype.getCount",{getCount:a.Dh.prototype.getCount});a.Dh.prototype.getLevelCount=function(){return this.bC.getLevelCount()};a.f.j("PagingHeaderSet.prototype.getLevelCount",{getLevelCount:a.Dh.prototype.getLevelCount});a.Dh.prototype.getExtent=function(a,c){return this.bC.getExtent(a+this.Ss,c)};a.f.j("PagingHeaderSet.prototype.getExtent",{getExtent:a.Dh.prototype.getExtent});a.Dh.prototype.getDepth=function(a,c){return this.bC.getDepth(a+this.Ss,c)};a.f.j("PagingHeaderSet.prototype.getDepth",
{getDepth:a.Dh.prototype.getDepth});a.Dh.prototype.Ywa=function(){return this.bC};a.f.j("PagingHeaderSet.prototype.getHeaderSet",{Ywa:a.Dh.prototype.Ywa});a.Dh.prototype.fN=function(){return this.Ss};a.f.j("PagingHeaderSet.prototype.getStartIndex",{fN:a.Dh.prototype.fN});a.Mb=function(g){if(!(g instanceof a.Rv))throw new a.wa("Not a datagridatasource","Not a datagridatasource",a.wa.xd.ERROR);this.Wd=g;this.oa=0;this.Init()};o_("PagingDataGridDataSource",a.Mb,a);a.f.ua(a.Mb,a.Rv,"oj.PagingDataGridDataSource");
a.Mb.prototype.Init=function(){a.Mb.N.Init.call(this);this.FL()};a.f.j("PagingDataGridDataSource.prototype.Init",{Init:a.Mb.prototype.Init});a.Mb.prototype.FL=function(){this.Wd.on("change",this.oQa.bind(this))};a.Mb.prototype.getPage=function(){return this.ef};a.f.j("PagingDataGridDataSource.prototype.getPage",{getPage:a.Mb.prototype.getPage});a.Mb.prototype.setPage=function(g,c){c=c||{};g=parseInt(g,10);try{a.Mb.N.handleEvent.call(this,a.hi.ga.BEFOREPAGE,{page:g,previousPage:this.ef})}catch(b){return Promise.reject(null)}this.Nb=
null!=c.pageSize?c.pageSize:this.Nb;c.startIndex=g*this.Nb;var d=this.ef;this.ef=g;this.oa=c.startIndex;var e=this;return new Promise(function(a,b){e.si(c).then(function(){a(null)},function(){e.ef=d;e.oa=e.ef*e.Nb;b(null)})})};a.f.j("PagingDataGridDataSource.prototype.setPage",{setPage:a.Mb.prototype.setPage});a.Mb.prototype.si=function(a){this.su=!0;this.oa=a.startIndex;var c=this;return new Promise(function(a){c.handleEvent("change",{operation:"sync",pageSize:c.Nb});a(void 0)})};a.Mb.prototype.fetch=
function(a){this.Nb=a.pageSize+a.startIndex;a.startIndex=0;return this.si(a)};a.f.j("PagingDataGridDataSource.prototype.fetch",{fetch:a.Mb.prototype.fetch});a.Mb.prototype.getStartItemIndex=function(){return this.oa};a.f.j("PagingDataGridDataSource.prototype.getStartItemIndex",{getStartItemIndex:a.Mb.prototype.getStartItemIndex});a.Mb.prototype.getEndItemIndex=function(){return this.sn};a.f.j("PagingDataGridDataSource.prototype.getEndItemIndex",{getEndItemIndex:a.Mb.prototype.getEndItemIndex});a.Mb.prototype.getPageCount=
function(){var a=this.totalSize();return-1==a?-1:Math.ceil(a/this.Nb)};a.f.j("PagingDataGridDataSource.prototype.getPageCount",{getPageCount:a.Mb.prototype.getPageCount});a.Mb.prototype.oQa=function(g){switch(g.operation){case "refresh":this.ef=this.oa=0;this.handleEvent("change",{operation:"sync",pageSize:this.Nb});this.handleEvent(a.tb.ga.REFRESH,null);break;case "reset":this.handleEvent(a.tb.ga.RESET,null);break;case "insert":this.handleEvent(a.tb.ga.ADD,{index:g.indexes.row});break;case "delete":this.handleEvent(a.tb.ga.REMOVE,
null);break;case "update":g.indexes.row=0<=g.indexes.row-this.oa?g.indexes.row-this.oa:-1;this.handleEvent("change",g);break;default:this.handleEvent("change",g),this.handleEvent(a.tb.ga.SYNC,null)}};a.Mb.prototype.getCount=function(a){var c=this.Wd.getCount(a);return"row"===a&&0<=c?this.oa+this.Nb<c?this.Nb:c-this.oa:c};a.f.j("PagingDataGridDataSource.prototype.getCount",{getCount:a.Mb.prototype.getCount});a.Mb.prototype.getCountPrecision=function(a){return this.Wd.getCountPrecision(a)};a.f.j("PagingDataGridDataSource.prototype.getCountPrecision",
{getCountPrecision:a.Mb.prototype.getCountPrecision});a.Mb.prototype.fetchHeaders=function(a,c,b){null==this.su?null!=c&&c.success&&c.success.call(b.success,null,a,null):"row"===a.axis?(a.start+=this.oa,a.start+a.count>this.oa+this.Nb&&(a.count=this.Nb-a.start),this.WA={headerRange:a,callbacks:c,callbackObjects:b},this.Wd.fetchHeaders(a,{success:this.e5.bind(this),error:this.TRa.bind(this)},b)):this.Wd.fetchHeaders(a,c,b)};a.f.j("PagingDataGridDataSource.prototype.fetchHeaders",{fetchHeaders:a.Mb.prototype.fetchHeaders});
a.Mb.prototype.e5=function(g,c,b){var d,e;this.WA.headerRange==c&&(c.start-=this.oa,c.count+=1,null!=g&&(d=new a.Dh(g,this.oa)),null!=b&&(e=new a.Dh(b,this.oa)),g=this.WA.callbacks.success,b=this.WA.callbackObjects.success,this.WA=null,g.call(b,d,c,e))};a.Mb.prototype.TRa=function(a){var c,b;c=this.WA.callbacks.error;b=this.WA.callbackObjects.error;this.WA=null;c.call(b,a)};a.Mb.prototype.fetchCells=function(a,c,b){var d;if(null==this.su)d={getData:function(){return null},getMetaData:function(){return null},
getStart:function(){return 0},getCount:function(){return 0},getLevelCount:function(){return 0},getExtent:function(){return 0},getDepth:function(){return 1}},null!=c&&c.success&&c.success.call(b.success,d,a);else{for(d=0;d<a.length;d+=1)"row"===a[d].axis&&(a[d].start+=this.oa,a[d].start+a[d].count>this.oa+this.Nb&&(a[d].count=this.Nb-a[d].start));this.VA={cellRanges:a,callbacks:c,callbackObjects:b};this.Wd.fetchCells(a,{success:this.nQa.bind(this),error:this.mQa.bind(this)},b)}};a.f.j("PagingDataGridDataSource.prototype.fetchCells",
{fetchCells:a.Mb.prototype.fetchCells});a.Mb.prototype.nQa=function(g,c){var b,d,e;if(!this.VA.cellRanges!=c){for(b=0;b<c.length;b+=1)"row"===c[b].axis&&(c[b].start-=this.oa,c[b].count+=1);b=new a.Kl(g,this.oa);d=this.VA.callbacks.success;e=this.VA.callbackObjects.success;this.VA=null;this.sn=this.oa+g.getCount("row")-1;this.handleEvent("sync",{data:Array(g.getCount("row")),startIndex:this.oa});d.call(e,b,c)}};a.Mb.prototype.mQa=function(a){var c,b;c=this.VA.callbacks.error;b=this.VA.callbackObjects.error;
this.VA=null;c.call(b,a)};a.Mb.prototype.keys=function(a){return this.Wd.keys({column:a.column,row:a.row+this.oa})};a.f.j("PagingDataGridDataSource.prototype.keys",{keys:a.Mb.prototype.keys});a.Mb.prototype.indexes=function(a){a=this.Wd.indexes(a);-1!=a.row&&(a.row-=this.oa);return a};a.f.j("PagingDataGridDataSource.prototype.indexes",{indexes:a.Mb.prototype.indexes});a.Mb.prototype.getCapability=function(a){return this.Wd.getCapability(a)};a.f.j("PagingDataGridDataSource.prototype.getCapability",
{getCapability:a.Mb.prototype.getCapability});a.Mb.prototype.size=function(){var a;if(null==this.su)return-1;a=this.Wd.getCount("row");return this.Wd.getCount("row")>this.Nb?this.Nb:a};a.f.j("PagingDataGridDataSource.prototype.size",{size:a.Mb.prototype.size});a.Mb.prototype.sort=function(a,c,b){this.Wd.sort(a,c,b)};a.f.j("PagingDataGridDataSource.prototype.sort",{sort:a.Mb.prototype.sort});a.Mb.prototype.totalSize=function(){return null==this.su?-1:this.Wd.getCount("row")};a.f.j("PagingDataGridDataSource.prototype.totalSize",
{totalSize:a.Mb.prototype.totalSize});a.Mb.prototype.totalSizeConfidence=function(){return"actual"};a.f.j("PagingDataGridDataSource.prototype.totalSizeConfidence",{totalSizeConfidence:a.Mb.prototype.totalSizeConfidence});a.Mb.prototype.moveOK=function(a,c,b){return this.Wd.moveOK(a,c,b)};a.f.j("PagingDataGridDataSource.prototype.moveOK",{moveOK:a.Mb.prototype.moveOK});a.Mb.prototype.move=function(a,c,b,d,e){this.Wd.move(a,c,b,d,e)};a.f.j("PagingDataGridDataSource.prototype.move",{move:a.Mb.prototype.move});
a.Kl=function(a,c){this.wN=a;this.Ss=c};o_("PagingCellSet",a.Kl,a);a.Kl.prototype.getData=function(a){return this.wN.getData({column:a.column,row:a.row+this.Ss})};a.f.j("PagingCellSet.prototype.getData",{getData:a.Kl.prototype.getData});a.Kl.prototype.getMetadata=function(a){return this.wN.getMetadata({column:a.column,row:a.row+this.Ss})};a.f.j("PagingCellSet.prototype.getMetadata",{getMetadata:a.Kl.prototype.getMetadata});a.Kl.prototype.getCount=function(a){return this.wN.getCount(a)};a.f.j("PagingCellSet.prototype.getCount",
{getCount:a.Kl.prototype.getCount});a.Kl.prototype.Hwa=function(){return this.wN};a.f.j("PagingCellSet.prototype.getCellSet",{Hwa:a.Kl.prototype.Hwa});a.Kl.prototype.fN=function(){return this.Ss};a.f.j("PagingCellSet.prototype.getStartIndex",{fN:a.Kl.prototype.fN});a.Kl.prototype.getExtent=function(a){return this.wN.getExtent({column:a.column,row:a.row+this.Ss})};a.f.j("PagingCellSet.prototype.getExtent",{getExtent:a.Kl.prototype.getExtent})});