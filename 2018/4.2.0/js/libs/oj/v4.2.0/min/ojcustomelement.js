/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","require","promise","customElements"],function(a,g){a.Y={};a.Y.Lf={WM:function(b){function c(){var a=window.Reflect;return"undefined"!==typeof a?a.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)}var f=Object.create(HTMLElement.prototype);this.pZ(f);var h=this.yH(b);a.Y.KR(f,h,"properties",this.BO.bind(this));a.Y.KR(f,h,"methods",this.AO.bind(this));this.sO(f);f.setProperties=function(b){a.Y.Xa(this).eZa(this,b)};f.attributeChangedCallback=this.a1;f.connectedCallback=
this.uKa;f.disconnectedCallback=this.XLa;var k=this;Object.defineProperty(c,"observedAttributes",{get:function(){return k.Mca(h)}});Object.defineProperty(f,"constructor",{value:c,writable:!0,configurable:!0});c.prototype=f;Object.setPrototypeOf(c,HTMLElement);return c},Z2a:function(){return this.LO().rq()},p$a:function(){this.cZ().Y5a()},Dk:function(){this.cZ().bH()},sO:function(){},xO:function(){},AO:function(){},BO:function(){},LO:function(){this.Rja||(this.Rja=new a.Y.yQ);return this.Rja},cZ:function(){this.Sja||
(this.Sja=new a.Y.yQ);return this.Sja},Mca:function(b){return a.Y.Dwa(b.properties)},yH:function(){return{}},Rq:function(a){return a},Yca:function(){},O7a:function(){},Zca:function(){},AH:function(){this.Pha=!1;this.Zia||this.Cf()},CH:function(){},iz:function(b){this.Zv=this.yH(a.Y.zQ(b.tagName));this.qo={}},pZ:function(){},qca:function(a,b){for(var c=Object.keys(b),h=0;h<c.length;h++){var k=c[h];a.setProperty(k,b[k])}},vO:function(){return!1},IZ:function(b,c,f){var h=a.fc.mq(c),k=this.qo[h];k||(k=
this.RKa(),this.qo[h]=k,b.addEventListener(h,k));null==f||f instanceof Function?k.Dba(f):a.Y.CQ(b,c,f,"function")},QZ:function(b,c,f,h,k){h=this.cD(k,f,h);a.Y.BQ(b,c,f,h)},cD:function(b,c,f){if(null!=f){var h=a.Y.sj(this),k=a.Y.Vk(c,h),g=c.split("."),m=this.vO(g);if(!k&&!m){a.D.warn("Ignoring property set for undefined property "+c+" on "+b.tagName);return}if(h[g[0]].readOnly)throw this.Dk(),"Read-only property "+c+" cannot be set on "+b.tagName;a.Y.iHa(b,c,f,k);if(!m)return a.Y.jHa(b,c,f,k)}return f},
a1:function(b,c,f){var h=a.Y.Xa(this);if(h.Qha){var k=a.fc.AB(b),g=a.Y.Vk(k,a.Y.sj(h));a.Y.Qga(this,b);null===f&&(f=void 0);this.dispatchEvent(new CustomEvent("attribute-changed",{detail:{attribute:b,value:f,previousValue:c}}));g&&!a.fc.KB(f).expr&&this.setProperty(k,a.Y.Tga(this,b,k,f,g,h.bP));h.Yca(this,b,c,f)}},tKa:function(b){this.Pha=!0;if(this.Qha)this.Zia||this.Bra(b),this.CH(b);else{this.Qha=!0;this.Bra(b);this.OUa(b);this.iz(b);var c=this;a.Y.NNa(b).then(function(a){a.whenReady(b).then(function(){c.xO(b)});
a.addDisposeCallback(b,c.Zca.bind(c))})}},uKa:function(){a.Y.Xa(this).tKa(this)},XLa:function(){a.Y.Xa(this).AH(this)},RKa:function(){function a(c){b&&b(c)}var b;a.Dba=function(a){b=a};return a},OUa:function(a){function b(){c.Pha&&c.Cf();c.Zia=!0}var c=this;this.cZ().rq().then(function(){a.classList.add("oj-complete");b()},b)},Bra:function(b){this.Doa=a.Context.getContext(b).Dc().Xc({description:b.tagName+" identified by '"+b.id+"' is being upgraded."})},Cf:function(){var a=this.Doa;if(!a)throw this.Dk(),
"Unexpected call to _resolveBusyState()";this.Doa=null;a()},eZa:function(a,b){for(var c=[],h={},k=!1,g=Object.keys(b),m=0;m<g.length;m++){var n=g[m];0<=n.indexOf(".")?c.push(n):(h[n]=b[n],k=!0)}k&&this.qca(a,h);for(h=0;h<c.length;h++)k=c[h],a.setProperty(k,b[k])}};a.Y.Dwa=function(b){var c=[];a.Y.kla("",b,c);return c};a.Y.kla=function(b,c,f){if(c)for(var h in c){var k=c[h];if(!k.readOnly){var g=b+h;f.push(a.fc.mba(g));var m=k.type;m&&"object"===m.toLowerCase()&&a.Y.kla(g+".",k.properties,f)}}};a.Y.Xa=
function(b){var c=b[a.Y.rfa];if(!c){c=a.Y.dF[b.tagName.toLowerCase()];if(!c)throw"Attempt to interact with the custom element before it has been registered";c=Object.create(c.M0a);Object.defineProperty(b,a.Y.rfa,{value:c})}return c};a.Y.sj=function(a){return a.Zv&&a.Zv.properties};a.Y.QB=function(b){return b&&(b=a.Y.dF[b.toLowerCase()])?{KM:b.KM}:null};a.Y.maa=function(a){return 1===a.nodeType||3===a.nodeType};a.Y.SFa="none";a.Y.KR=function(a,b,c,h){if(b&&b[c]){var k=b[c];Object.keys(k).forEach(function(b){h(a,
b,k[b])})}};a.Y.NNa=function(b){var c=a.Y.nla(b);if(c===a.Y.SFa)b=Promise.resolve({whenReady:function(){return Promise.resolve(!1)},addDisposeCallback:function(){}});else if("knockout"==c)b=a.Y.GOa();else throw a.Y.Xa(b).Dk(),"Unknown binding provider: "+c;return b};a.Y.nla=function(b){var c=b._ojBndgPrv;if(c)return c;c=b.getAttribute("data-oj-binding-provider")||a.Y.aOa(b);if(!c)if(c=b.parentElement,null==c)if(b===document.documentElement)c="knockout";else throw a.Y.Xa(b).Dk(),"Cannot determine binding provider for a disconnected subtree";
else c=a.Y.nla(c);Object.defineProperty(b,"_ojBndgPrv",{value:c});return c};a.Y.aOa=function(b){return a.Te?a.Te.u2a(b.parentElement):null};a.Y.GOa=function(){a.Y.gia||(a.Y.gia=a.tw()?new Promise(function(a,b){g(["ojs/ojknockout"],a,b)}):Promise.resolve(a.Az.Xa()));return a.Y.gia};a.Y.iHa=function(b,c,f,h){if("string"==typeof f&&h&&(h=h.enumValues)&&-1===h.indexOf(f))throw a.Y.Xa(b).Dk(),"Invalid value found for property '"+c+"' on "+b.tagName+" with id "+b.id+"'. Found: '"+f+"'. Expected one of the following: "+
h.toString();};a.Y.jHa=function(b,c,f,h){if(h=h.type){h=h.toLowerCase();var k=h.split("|"),g=typeof f;if(1===k.length)("array"===h.substring(0,5)&&!Array.isArray(f)||"object"===h.substring(0,6)&&"object"!==g||"number"===h&&("number"!==typeof f||!isFinite(f))||"string"===h&&"string"!==g)&&a.Y.CQ(b,c,f,h),"boolean"===h&&(f=!!f);else if(2===k.length){var m=k.indexOf("string"),n=k.indexOf("promise");-1!==m&&"string"!==typeof k[m]?(k=0===m?k[1]:k[0],("function"===k&&"function"!==g||"array"===k.substring(0,
5)&&!Array.isArray(f)||"object"===k.substring(0,6)&&"object"!==g)&&a.Y.CQ(b,c,f,h)):-1===n||f instanceof Promise||(k=0===n?k[1]:k[0],"array"!==k.substring(0,5)||Array.isArray(f)||a.Y.CQ(b,c,f,h))}}return f};a.Y.CQ=function(b,c,f,h){a.Y.Xa(b).Dk();throw"Invalid type found for "+b.tagName+" property '"+c+"'. Found: "+f+" of type "+typeof f+", but expected type "+h+".";};a.Y.zQ=function(b){return b?a.Y.dF[b.toLowerCase()].T1a:null};a.Y.kHa=function(b){return b?a.Y.dF[b.toLowerCase()].Fi:null};a.Y.Qga=
function(b,c){var f=c.split(".");if(1<f.length)for(f.pop();f.length;){var h=f.join(".");if(b.hasAttribute(h))throw a.Y.Xa(b).Dk(),"Cannot set overlapping attributes "+c+" and "+h;f.pop()}};a.Y.Vk=function(a,b){for(var c=b,h=a.split("."),k=0;k<h.length;k++)if(c=c[h[k]],1<h.length&&k<h.length-1&&(c=c.properties,!c))return null;return c};a.Y.E0=function(b,c,f){var h=a.Y.Xa(b),k=a.Y.sj(h);if(k)for(var g=b.attributes,m=0;m<g.length;m++){var n=g[m],t=a.fc.AB(n.nodeName),s=a.Y.Vk(t,k);s&&!s.readOnly&&(a.Y.Qga(b,
n.nodeName),a.fc.KB(n.value).expr||(n=a.Y.Tga(b,n.nodeName,t,n.value,s,f),h.QZ(h.Rq.bind(h),c,t,n,b)))}};a.Y.BQ=function(a,b,c,h){c=c.split(".");for(var k=0;k<c.length;k++){var g=a(c[k]);if(k===c.length-1){b[g]=h;break}else b[g]||(b[g]={});b=b[g]}};a.Y.AQ=function(a,b){for(var c=a,h=b.split("."),k=0;k<h.length;k++){var g=h[k];if(k===h.length-1)return c[g];if(!c[g])return null;c=c[g]}};a.Y.Tga=function(b,c,f,h,k,g){function m(f){var h;try{h=a.fc.J9(b,c,f,n)}catch(k){throw t.Dk(),k;}return h}if(null==
h)return h;var n=k.type,t=a.Y.Xa(b);return g?g(h,f,k,function(a){return m(a)}):m(h)};a.Y.Uga=function(b,c){b=a.tc.Md({},b,void 0,!0,1);b.properties=b.properties||{};a.Y.KR(null,b,"properties",function(c,e){b.properties[a.fc.mwa(a.fc.jAa(e))]={yJ:!0,cE:!0}});a.Y.KR(null,b,"events",function(f,h){b.properties[a.fc.mwa(c?a.fc.lwa(h):h)]={yJ:!0,cE:!0}});return b};a.Y.Vga=function(b,c,f,h){var k=b.toLowerCase();if(!a.Y.dF[k]){if(!c)throw"Error registering "+b+": missing a descriptor.";a.Y.dF[k]={T1a:c,
M0a:f,KM:h,Fi:{}};return!0}return!1};a.Y.D0=function(a,b,c,h){var k={},g=b.split("."),m=b,n=c,t=h;1<g.length&&(m={},m.path=b,m.value=c,m.previousValue=h,k.subproperty=m,m=g[0],t=n=a[m]);k.value=n;k.previousValue=t;a.dispatchEvent(new CustomEvent(m+"Changed",{detail:k}))};a.Y.xQ=function(a,b,c,h){Object.defineProperty(a,b,{enumerable:!0,get:c,set:h})};a.Y.Sga=function(){return b+c++};var c=0,b="_ojcustomelem";a.Y.dF={};a.Y.rfa="_ojBridge";a.Y.yQ=function(){var a,b,c;this.rq=function(){a||(a=new Promise(function(a,
d){b=a;c=d}));return a};this.Y5a=function(){c&&c(void 0)};this.bH=function(c){b?b(c):a=Promise.resolve(c)}}});