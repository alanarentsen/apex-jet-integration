/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","ojs/ojjquery-hammer","ojs/ojcomponentcore","ojs/ojpopup"],function(a,g,c){(function(){a.ib("oj.ojLabel",g.oj.baseComponent,{version:"1.0.0",defaultElement:"\x3clabel\x3e",widgetEventPrefix:"oj",options:{"for":null,help:{definition:null,source:null},labelId:null,showRequired:!1,rootAttributes:null},eb:{Jga:"tooltipHelp",Kga:"tooltipRequired"},widget:function(){return this.dt},refresh:function(){this._super();this.Ie();this.qra();this.hha()},Gh:function(a,c){this._super(a,
c);this.xi=this.$();this.FJa()},rc:function(){this._super();this.eV=this.eventNamespace+"TouchEatClick";this.zua=this.eventNamespace+"TouchEatContextMenu";this.dT=this.eventNamespace+"HelpDefPopup";this.ww=a.Q.qe();this.EMa()},wI:function(a){this.$()||(this.RL=a.attr("class"))},yD:function(){this.$()||(this.RL?this.element.attr("class",this.RL):this.element.removeAttr("class"))},Ih:function(){this._superApply(arguments);this.K4()},yp:function(){this._superApply(arguments);this.K4()},kI:function(){return"oj-ojLabel"},
EMa:function(){var a=null;this.wc?(this.dt=g(this.wc).append(this.element.wrap(this.qja()).parent()),this.dt.addClass("oj-label oj-component")):this.dt=this.element.wrap(this.rLa()).closest(".oj-component");this.hha();a=this.element[0].id;this.UW=a+"_helpIcon";this.fO=a+"_requiredIcon";this.xi||this.TUa();this.options.showRequired&&(this.yja(),this.xi&&this.mha());this.xi&&this.pra();this.qqa()&&(a=this.Z1(this.UW,!0),this.lja(a),this.xi&&this.gha(this.UW))},Gla:function(){var a,c=null;if(!this.xi)return null;
c=this.Ula();null==c&&(this.wc&&(a=this.wc.id),c=this.LS("labelled-by",a),null==c&&(c=this.LS("aria-labelledby",this.options.labelId)));return c},mha:function(){var a;this.wc&&(a=this.wc.id);(a=this.LS("labelled-by",a))&&this.lpa(a)&&this.dha(a,this.fO,"described-by")},nXa:function(){var a;this.wc&&(a=this.wc.id);(a=this.LS("labelled-by",a))&&this.lpa(a)&&this.Jra(a,this.fO,"described-by")},gha:function(a){var c,e=this.Gla();e&&(c=this.jla(e),this.dha(e,a,c))},$Wa:function(a){var c,e=this.Gla();e&&
(c=this.jla(e),this.Jra(e,a,c))},jla:function(a){return this.kpa(a)?"described-by":"group"===a.getAttribute("role")?"aria-labelledby":"aria-describedby"},Ula:function(){return document.getElementById(this.options["for"])},LS:function(a,c){return c?document.querySelector("["+a+"~\x3d'"+c+"']"):null},kpa:function(a){return a?-1!==a.tagName.indexOf("-"):!1},lpa:function(a){var c=["oj-radioset","oj-checkboxset"],e=c.length,f;if(a){f=a.tagName.toLowerCase();for(var g=0;g<e;g++)if(a=c[g],0===f.indexOf(a))return!0}return!1},
dha:function(a,c,e){var f=a.getAttribute(e),f=f?f.split(/\s+/):[];-1===g.inArray(c,f)&&f.push(c);c=g.trim(f.join(" "));a.setAttribute(e,c)},Jra:function(a,c,e){var f=a.getAttribute(e),f=f?f.split(/\s+/):[];c=g.inArray(c,f);-1!==c&&f.splice(c,1);(c=g.trim(f.join(" ")))?a.setAttribute(e,c):a.setAttribute(e,"")},PHa:function(a){var c=this.element[0],e=this.options["for"];this.kpa(a)?c.setAttribute("for",e+"|input"):c.setAttribute("for",e)},lja:function(a){var c=this.YKa(this.options.help.definition,
this.options.help.source);g(a).prepend(c);this.NIa();this._focusable({element:c,applyHighlight:!0})},yja:function(){this.Z1(this.fO,!1).appendChild(this.qLa())},FJa:function(){var a=this.options.showRequired;if(null!==a&&"boolean"!==typeof a)throw Error("Option 'showRequired' has invalid value set: "+a);},hha:function(){this.xi&&this.rra();null==this.element.attr("id")&&this.element.uniqueId()},TUa:function(){if(!this.xi){var a;a=this.element.attr("class");var c,e;if(a&&(a=a.split(/\s+/),null!=a)){e=
a.length;for(var f=0;f<e;f++)c=a[f],0<c.indexOf("-label")&&(this.dt.addClass(c),this.element.removeClass(c))}}},Z1:function(a,c){var e,f=document.createElement("span");f.setAttribute("id",a);c?(e=this.dt.find(".oj-label-group"),e.prepend(f)):this.element.before(f);return f},rLa:function(){var a,c=this.options.rootAttributes,e="oj-label oj-component";c&&(a=c["class"]);a&&(e=e+" "+a);a=document.createElement("div");a.className=e;a.appendChild(this.qja());return a},qja:function(){var a;a=document.createElement("div");
a.className="oj-label-group";return a},qLa:function(){var a=this.T(this.eb.Kga),c=document.createElement("span");c.className="oj-label-required-icon oj-component-icon";c.setAttribute("role","img");c.setAttribute("title",a);c.setAttribute("aria-label",a);return c},YKa:function(b,c){var e;e=document.createElement("a");e.setAttribute("tabindex","0");e.setAttribute("target","_blank");e.className="oj-label-help-icon-anchor oj-label-help-icon oj-component-icon oj-clickable-icon-nocontext";if(c)try{a.Q.F7a(c),
e.setAttribute("href",c)}catch(f){throw Error(f+". The source option ("+c+") is invalid.");}else e.setAttribute("role","img");b?e.setAttribute("aria-label",b):e.setAttribute("aria-label",this.T(this.eb.Jga));return e},NIa:function(){var a,c,e,f=this;c=this.widget().find(".oj-label-help-icon-anchor");0!==c.length&&(a=this.XKa(),this.ww&&(this.G2&&this.widget().off(this.eV),this.G2=function(){return!1},this.wka=function(){return!1},c.on("contextmenu"+this.zua,this.wka)),this.VE||(this.VE=function(e){f.KRa(e,
a,c)}),this.N1||(this.N1=function(){f.K4()}),this.eIa(c),e={my:"start bottom",at:"end top",collision:"flipcenter",of:c},a.ojPopup({position:e,modality:"modeless",animation:{open:null,close:null}}))},XKa:function(){var a,c,e=this.options.help.definition,f;a=e?e:this.T(this.eb.Jga);if(this.AA){if(f=g(document.getElementById(this.AA)))c=f.find(".oj-help-popup-container").first(),c.text(a)}else e=document.createElement("div"),e.className="oj-help-popup",e.style.display="none",f=g(e),f.uniqueId(),this.AA=
f.prop("id"),c=document.createElement("div"),c.className="oj-help-popup-container",e.appendChild(c),c=g(c),c.text(a),a=document.getElementsByTagName("body")[0],a.appendChild(e);return f},eIa:function(b){var d;b.on("focusin"+this.dT+" mouseenter"+this.dT,this.VE);b.on("mouseleave"+this.dT,this.N1);this.ww&&(this.options.help.source?(d={recognizers:[[c.Press,{time:a.Q.VC}]]},b.Zg(d),this._on(b,{press:this.VE})):(d={recognizers:[[c.Tap],[c.Press,{time:a.Q.VC}]]},b.Zg(d),this._on(b,{press:this.VE,tap:this.VE})))},
KRa:function(b,c,e){if(!c.ojPopup("isOpen"))if(this.ww){if("press"===b.type){var f=this.widget();f.on("click"+this.eV,this.G2);var g=this;c.on("ojclose",function(){f.off(g.eV)})}else c.off("ojclose");"press"!==b.type&&"tap"!==b.type&&(a.Q.R5a()||"focusin"!==b.type&&"mouseenter"!==b.type)||c.ojPopup("open",e)}else c.ojPopup("open",e)},K4:function(){var a;null!=this.AA&&(a=g(document.getElementById(this.AA)),a.ojPopup("close"))},Mra:function(a){this.ww&&(this.widget().off(this.eV),a.off(this.zua),this.wka=
this.G2=null,a.Zg("destroy"));a.off(this.dT);this.N1=this.VE=null},Nra:function(){var a;if(null!=this.AA){if(a=g(document.getElementById(this.AA)))a.ojPopup("destroy"),a.remove();this.AA=null}},qqa:function(){var a=this.options,c=a.help.source,c=""!==c&&null!=c;c||(a=a.help.definition,c=""!==a&&null!=a);return c},qra:function(){var a=this.UW,c;c=this.dt.find(".oj-label-help-icon");1===c.length&&(this.Mra(c),this.Nra(),c.remove());c=document.getElementById(a);this.qqa()?(null==c&&(c=this.Z1(a,!0)),
this.lja(c),this.xi&&this.gha(a)):null!==c&&(c.parentNode.removeChild(c),this.xi&&this.$Wa(a))},Ie:function(){var a;a=this.fO;var c;c=document.getElementById(a);this.options.showRequired?c?(c=this.T(this.eb.Kga),a=this.dt.find(".oj-label-required-icon"),a.attr("title",c)):(this.yja(),this.xi&&this.mha()):(c=document.getElementById(a),null!==c&&c.parentNode.removeChild(c),this.xi&&this.nXa())},pra:function(){var a;this.xi&&(a=this.Ula())&&this.PHa(a)},rra:function(){var a;this.xi&&((a=this.options.labelId)?
this.element.attr("id",a):(a=this.dt.attr("id"))&&this.element.attr("id",a+"|label"))},_setOption:function(a,c){this._superApply(arguments);switch(a){case "showRequired":this.Ie();break;case "help":this.qra();break;case "for":this.xi&&this.pra();break;case "labelId":this.xi&&this.rra()}},getNodeBySubId:function(a){var c;c=this._super(a);c||(a=a.subId,"oj-label-help-icon"===a&&(c=this.widget().find(".oj-label-help-icon")[0]));return c||null},getSubIdByNode:function(a){var c=null;null!=a&&a===this.widget().find(".oj-label-help-icon")[0]&&
(c={subId:"oj-label-help-icon"});return c||this._superApply(arguments)},_destroy:function(){var b=this.dt.find(".oj-label-help-icon");this.Mra(b);this.Nra();this.xi=this.fO=this.UW=null;a.Q.unwrap(this.element,this.dt);return this._super()}})})();a.J.Ua("oj-label","baseComponent",{properties:{help:{type:"Object",properties:{definition:{type:"string"},source:{type:"string"}}},showRequired:{type:"boolean"},labelId:{type:"string"},"for":{type:"string"}},extension:{Kj:"label",Ya:"ojLabel",nD:["accesskey"]}});
a.J.register("oj-label",{metadata:a.J.getMetadata("oj-label")})});