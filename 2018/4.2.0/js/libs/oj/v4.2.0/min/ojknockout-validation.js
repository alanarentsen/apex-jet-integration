/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","knockout","ojs/ojknockout","ojs/ojmessaging"],function(a,g,c){a.gd=function(){};a.gd.XH="invalidComponentTracker";a.gd.$ea="ojoptionchange";a.gd.Ht="messagesShown";a.gd.jw="messagesHidden";a.gd.jr="disabled";a.gd.mI="readOnly";a.gd.Fx=function(b,d,e,f,h){var k={};h=h.call()[a.gd.XH];var g;if(b===a.gd.jr||b===a.gd.mI)return g=h&&h.peek()||null,null!==g&&c.isWriteableObservable(h)&&g.Fx.call(g,f,e,b,d)&&h.valueHasMutated(),k[b]=d,k};a.gd._init=function(b,a){var c={};c[b]=
a;return c};a.gd.sIa=function(b,c,e,f){f=f.call();var h;b===a.gd.XH&&(h=f[b]?!0:!1)&&a.gd.HWa(b,f,c,e);return{}};a.gd.YIa=function(b,d,e,f){d=g(d);f=f.call()[b];b===a.gd.XH&&d&&(d.off(a.gd.$ea,a.gd.Pua),f&&c.isWriteableObservable(f)&&(b=f.peek(),b.uf.call(b,e)&&f.valueHasMutated()))};a.gd.Pua=function(b,d){var e=b.data.Yba,f,h=b.data.aa,k=b.data.element,g=d.option,m=d.value;(g===a.gd.Ht||g===a.gd.jw)&&e&&c.isWriteableObservable(e)&&(f=e.peek())&&f.Fx.call(f,h,k,g,m)&&e.valueHasMutated()};a.gd.HWa=
function(b,d,e,f){d=d[b];var h,k,l;b=g(e);if(c.isObservable(d))l=d.peek(),null==l&&(l=new a.wd,d(l));else throw Error("Binding attribute "+a.gd.XH+" should be bound to a ko observable.");null!==l&&(c.isWriteableObservable(d)&&(h=f.call(f,"option",a.gd.Ht),k=f.call(f,"option",a.gd.jw),l.Fx.call(l,f,e,a.gd.Ht,h),l.Fx.call(l,f,e,a.gd.jw,k),d.valueHasMutated()),e={Yba:d,aa:f,element:e},b.on(a.gd.$ea,e,a.gd.Pua))};a.xa.xh().Bh({"for":"editableValue",attributes:[a.gd.XH,a.gd.jr,a.gd.mI],init:a.gd._init,
update:a.gd.Fx,afterCreate:a.gd.sIa,beforeDestroy:a.gd.YIa});a.wd=function(){this.Init()};o_("InvalidComponentTracker",a.wd,a);a.f.ua(a.wd,a.f,"oj.InvalidComponentTracker");a.wd.Ht="messagesShown";a.wd.jw="messagesHidden";a.wd.jr="disabled";a.wd.mI="readOnly";a.wd.prototype.Init=function(){a.wd.N.Init.call(this);this.FF=[];this.bx=[];this.DE=[];this.invalidHidden=this.invalidShown=!1};a.wd.prototype.wwa=function(){var b=null,c=this,e=this.rV,f;f=a.Context.BW().Dc().Xc({description:"Setting Focus to first invalid component."});
this.invalidShown&&(b=this.D3());setTimeout(function(){(b=e===c.rV?b||c.D3():c.D3())&&b.call(b,"Focus");f()},1);return b?!0:!1};a.f.j("InvalidComponentTracker.prototype.focusOnFirstInvalid",{wwa:a.wd.prototype.wwa});a.wd.prototype.showMessages=function(){var b,a,c;if(this.invalidHidden)for(a=this.DE.length,b=0;b<a;b++)this.DE[b]&&(c=this.FF[b].component.call(c,"showMessages"))};a.f.j("InvalidComponentTracker.prototype.showMessages",{showMessages:a.wd.prototype.showMessages});a.wd.prototype.D3=function(){for(var b,
a=0,c=[],f=this.bx.length,a=0;a<f;a++)(b=this.bx[a])&&c.push(this.FF[a]);if(0===c.length)return null;c.sort(function(b,a){return b.element.compareDocumentPosition(a.element)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1});return c[0].component};a.wd.prototype.uf=function(b){var a=-1,c=!1;g.each(this.FF,function(c,e){0>a&&e.component===b&&(a=c)});0<=a&&(this.FF.splice(a,1),this.bx.splice(a,1),this.DE.splice(a,1),this.d9(),c=!0);return c};a.wd.prototype.Fx=function(b,c,e,f){var h=b.call(b,"isValid"),k=!0,l,
m=-1;g.each(this.FF,function(a,c){0>m&&c.component===b&&(m=a)});switch(e){case a.wd.Ht:case a.wd.jw:l=!1;f&&(0>m&&(m=this.FF.push({component:b,element:c})-1,this.eTa(m,l)),!h&&a.wd.q5(f)&&(l=!0,e===a.wd.Ht&&(c=b.call(b,"option",a.wd.jr),f=b.call(b,"option",a.wd.mI),l=c||f?!1:!0)),k=this.vM(e,m||0,l),this.d9(),k&&(void 0===this.rV&&(this.rV=0),this.rV++));break;case a.wd.jr:case a.wd.mI:k=!1,f&&(k=this.vM(a.wd.Ht,m||0,!1),k=this.vM(a.wd.jw,m||0,!1)||k,this.d9())}return k};a.wd.prototype.eTa=function(b,
c){void 0===this.bx[b]&&this.vM(a.wd.Ht,b,c);void 0===this.DE[b]&&this.vM(a.wd.jw,b,c)};a.wd.prototype.d9=function(){this.invalidShown=0<=this.bx.indexOf(!0);this.invalidHidden=0<=this.DE.indexOf(!0)};a.wd.prototype.vM=function(b,c,e){var f=!1;b=b===a.wd.Ht?this.bx:b===a.wd.jw?this.DE:[];0<=c&&void 0!==b[c]?(f=b[c]!==e?!0:!1)&&(b[c]=e):(b.push(e),f=!0);return f};a.wd.q5=function(b){return!a.wa.isValid(b)}});