/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.

var ga;function ka(a,F){0==a.indexOf("dvt.")&&(a=a.substring(4));var D=a.split("."),E=eval("dvt");D[0]in E||!E.execScript||E.execScript("var "+D[0]);for(var v;D.length&&(v=D.shift());)D.length||void 0===F?E=E[v]?E[v]:E[v]={}:E[v]=F}Math.floor(2147483648*Math.random()).toString(36);
(function(a){function F(c,g,f,p,v,y,n){F.C.Init.call(this,c.a,"none"==g?null:g,a.j.Rg,f,p,v,y,null,!0,n);this.Ki=c}function D(a){this.Init(a)}function E(a,c){this.Init(a,c)}function v(a,c,f,p,x,y,n,z,w,A){v.C.Init.call(this,a.a,c,f,p,x,null,y,n,z,w,A);this.Ki=a}function x(){this.Init({alta:x.If})}function f(a){this.Init(a.a,a.dispatchEvent,a);this.Ki=a}function c(a){this.Ki=a}a.ui=function(a,c,f){this.Init(a,c,f)};a.f.v(a.ui,a.$b);a.ui.newInstance=function(c,g,f){return new a.ui(c,g,f)};a.ui.prototype.Init=
function(c,g,p){a.ui.C.Init.call(this,c,g,p);this.u=new f(this);this.u.Lf(this);a.m.eb()||this.u.$r(new D(this.u));this.Ff=new x;this.Pb=[]};a.ui.prototype.xG=function(c,g){if(!c||!g){var f=p.Fn(this,c,g);this.Qma=f;c||(c=f.items?f.OGa*f.Vaa:0);g||(g=f.items?f.OKa*f.Vca:0)}return new a.eg(c,g)};a.ui.prototype.ia=function(c,g,f){this.Ji=this.ha;var t=this.du,v=this.Oa?this.Oa:0,y=this.cb?this.cb:0;this.u.ed();this.Pb=[];this.du=[];this.Qma=null;this.jk&&(this.ha.removeChild(this.jk),this.jk=null);
this.Vq();this.ne(c);var n=this.a;if(g||f)this.Oa=g,this.cb=f;else if(n.Qc.style.display="block",g=this.xG(),a.l.YV(n,g.b,g.i),f=a.l.Qba(n),g.b==f.b&&g.i!=f.i?(this.cb=f.i,g=this.xG(null,this.cb),a.l.YV(n,g.b,this.cb),this.Oa=a.l.Qba(n).b):g.b!=f.b&&g.i==f.i?(this.Oa=f.b,g=this.xG(this.Oa,null),a.l.YV(n,this.Oa,g.i),this.cb=a.l.Qba(n).i):(this.Oa=f.b,this.cb=f.i),this.Oa!=g.b||this.cb!=g.i)this.Qma=null;this.ha=new a.ca(n);this.B(this.ha);p.ia(this,this.ha,new a.U(0,0,this.Oa,this.cb),this.Qma);this.Ji?
"none"!=this.J.animationOnDataChange&&c&&(c=new a.Pl(n,null),c.En(t,this.du),this.Cb=c.uz()):this.Cb=this.lWa();this.Cb?(a.l.YV(n,Math.max(v,this.Oa),Math.max(y,this.cb)),this.u.kn(this),this.jk&&this.ha.removeChild(this.jk),this.Cb.pg(this.V$,this),this.Cb.play()):this.V$()};a.ui.prototype.ne=function(c){c?this.J=this.Ff.mo(c):this.J||(this.J=this.eA());a.m.Gl()||(this.J.animationOnDisplay="none",this.J.animationOnDataChange="none");c=this.J.selectionMode;this.Fd="single"==c?new a.Hb(a.Hb.iv):"multiple"==
c?new a.Hb(a.Hb.os):null;this.u.Ey(this.Fd)};a.ui.prototype.V$=function(){this.Ji&&(this.removeChild(this.Ji),this.Ji.Ec(),this.Ji=null);this.Cb&&(this.u.Lf(this),this.jk&&this.ha.B(this.jk));a.l.YV(this.a,this.Oa,this.cb);for(var c,g=0;g<this.Pb.length&&(c=this.Pb[g],"none"==c.yg());g++);this.u.Yr(c);this.Fd&&this.Fd.Wr(this.J.selection,this.Pb);a.sd.Zd(this.J.highlightedCategories,this.Pb,"any"==this.J.highlightMatch);this.ps();this.Bj||this.ml();this.Cb=null;this.Bj=!1};a.ui.prototype.Gva=function(a){this.Pb=
a};a.ui.prototype.ey=function(){return this.Pb};a.ui.prototype.N6a=function(a){this.du.push(a)};a.ui.prototype.M6a=function(a){this.jk=a};a.ui.prototype.v4a=function(){for(var a=0,c=0;c<this.Pb.length;c++)a+=this.Pb[c].ZU();return a};a.ui.prototype.Lb=function(){return a.$a.zq(this.J.animationDuration)/1E3};a.ui.prototype.lWa=function(){var c=this.J.animationOnDisplay,g=this.Lb(),f=this.a,t=new a.U(0,0,this.Oa,this.cb);if(a.Ra.isSupported(c))return a.Ra.ZD(f,c,this.ha,t,g);var v=[];if("popIn"==c)for(c=
0;c<this.du.length;c++){var y=this.du[c];v.push(new a.qk(f,y,!0,g))}else if("none"!=c){for(c=0;c<this.du.length;c++){var y=this.du[c],n=new a.td(f,y,g),z,w;p.Ea(this)?(z=p.pua(this)?this.Oa:0,w=y.Kg(),y.Zp(z),n.da.aa(a.L.ta,y,y.Kg,y.Zp,w)):(z=p.oua(this)?this.cb:0,w=y.Lg(),y.$p(z),n.da.aa(a.L.ta,y,y.Lg,y.$p,w));v.push(n)}v.push(a.Ra.ZD(f,a.Ra.Wz,this.ha,t,g))}return 0<v.length?new a.ae(f,v):null};a.ui.prototype.Zd=function(c){var g=this.A();g.highlightedCategories=a.Za.clone(c);a.sd.Zd(c,this.ey(),
"any"==g.highlightMatch)};a.ui.prototype.select=function(c){this.A().selection=a.Za.clone(c);this.Fd&&this.Fd.Wr(c,this.ey())};a.ui.prototype.vk=function(){return a.I.Yc(this.A(),"componentName",a.I.pa,"PICTOCHART")};a.ui.prototype.Bi=function(){this.uBa||(this.uBa=new c(this));return this.uBa};a.f.v(c,a.Lc);c.prototype.Ql=function(a){return(a=this.Ki.Ob().Ya(a))&&a instanceof E?"item["+this.Ki.ey().indexOf(a)+"]":null};c.prototype.Sh=function(c){if(c==a.Lc.Bw)return this.fA(this.Ki);var g=c.indexOf("[");
return 0<g&&"item"===c.substring(0,g)&&(c=this.Ki.ey()[parseInt(c.substring(g+1,c.length-1))])?c.ja():null};c.prototype.getItem=function(a){if(a=this.Ki.ey()[a]){var c={};c.color=a.pi();c.tooltip=a.bf();c.id=a.getId();c.name=a.getName();c.count=a.ZU();c.selected=a.gb();return c}return null};c.prototype.q4=function(){return this.Ki.ey().length};a.f.v(f,a.u);f.prototype.Ij=function(c,g,f){c=this.Ki.A();"none"!=c.hoverBehavior&&(g=g.rd?g.rd():[],c.highlightedCategories=f?g.slice():null,f=a.la.OI(c.highlightedCategories,
f),g=a.$a.zq(c.hoverBehaviorDelay),this.pF.Ef(f,this.Ki.ey(),g,"any"==c.highlightMatch))};f.prototype.iF=function(a){if(a=this.Ya(a.target))this.Nz(a),a.ab&&a.ab()||this.zy(a)};f.prototype.FJ=function(a){(a=this.Ya(a.target))&&a.ab&&a.ab()&&this.zy(a)};f.prototype.yM=function(a){if(a=this.Ya(a.target))this.Nz(a),a.ab&&a.ab()||this.zy(a)};f.prototype.dv=function(a){if(a=this.Ya(a.target))this.Nz(a),a.ab&&a.ab()||this.zy(a)};f.prototype.xM=function(a){var c=this.Ya(a.target);c&&c.ab&&c.ab()&&(a.preventDefault(),
a.stopPropagation(),this.zy(c))};f.prototype.zy=function(c){c instanceof E&&c.bk()&&this.kt(a.la.BV(c.getId()))};f.prototype.Nz=function(c){c&&c.ph&&c.ph()&&this.kt(a.la.xy("action",c.ph(),c.getId()))};a.f.v(x,a.ka);x.If={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",
_defaultColor:"#a6acb1",_noneShapeColor:"rgba(255,255,255,0)",_defaultSize:32,_defaultShape:"rectangle",_gapRatio:.25,_textStyle:new a.j(a.ka.NW+"color: #252525;"),_statusMessageStyle:new a.j(a.ka.NW+"color: #252525;"),_tooltipStyle:new a.j("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new a.j("color: #666666; padding: 0px 2px"),_tooltipValueStyle:new a.j("color: #333333; padding: 0px 2px")};a.f.v(v,a.Ac);v.prototype.Mf=function(c,g){var f=new a.td(this.a,this,.75*this.Ki.Lb()),
p=f.da,v=this.Ek();this.hm(g.Ek());p.aa(a.L.Hf,this,this.Ek,this.hm,v);g.qa(0);c.add(f,1)};v.prototype.ai=function(c){c.add(new a.Wg(this.a,this,.5*this.Ki.Lb()),0)};v.prototype.nh=function(c){this.qa(0);c.add(new a.dg(this.a,this,.5*this.Ki.Lb()),2)};v.prototype.Ek=function(){return[this.Kg(),this.Lg(),this.getWidth(),this.getHeight()]};v.prototype.hm=function(a){this.Zp(a[0]);this.$p(a[1]);this.jb(a[2]);this.Mb(a[3])};a.f.v(E,a.ca);E.xs=0;E.prototype.Init=function(c,g){E.C.Init.call(this,c.a,null,
g.id);this.Ki=c;this.xl=g;this.lc=null!=g.id?g.id:null!=g.name?g.name:"_defaultId"+E.xs;E.xs++;this.ZO="none"==g.shape;this.Sc=this.wi=!1;this.oEa=new a.P(0,0);(this.ab()||this.bk())&&this.setCursor("pointer");c.Ob().Xb(this,this)};E.prototype.NHa=function(){var a=this.xl.columnSpan;return null!=a&&0<=a?Math.round(a):1};E.prototype.bJa=function(){var a=this.xl.rowSpan;return null!=a&&0<=a?Math.round(a):1};E.prototype.ZU=function(){var a=this.xl.count;return null!=a?Math.max(a,0):1};E.prototype.yg=
function(){return this.xl.shape||this.Ki.A()._defaultShape};E.prototype.Zb=function(){return this.ZO?this.Ki.A()._noneShapeColor:this.xl.color||this.Ki.A()._defaultColor};E.prototype.oo=function(){return this.xl.borderColor};E.prototype.Rh=function(){return this.xl.borderWidth};E.prototype.Jr=function(){return this.xl.className||this.xl.svgClassName};E.prototype.N=function(){return this.xl.style||this.xl.svgStyle};E.prototype.jJa=function(){return this.xl.source};E.prototype.k4a=function(){return this.xl.sourceSelected};
E.prototype.i4a=function(){return this.xl.sourceHover};E.prototype.j4a=function(){return this.xl.sourceHoverSelected};E.prototype.getName=function(){return this.xl.name};E.prototype.getId=function(){return this.lc};E.prototype.ph=function(){return this.xl.action};E.prototype.Eh=function(){return this.xl.shortDesc};E.prototype.bk=function(){if(this.ZO)return!1;var a=this.xl.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.Ki.A().drilling};E.prototype.Wp=function(){return this.ab()&&this.bk()&&!this.ZO};
E.prototype.g9a=function(){this.zg("img");this.Ro()};E.prototype.bf=function(){if(this.ZO)return"";var c=this.Ki.A(),g=this.Ki.A().tooltip;if(g=g?g.renderer:null){var c=this.Ki.a.cf(),f={id:this.getId(),name:this.getName(),count:this.ZU(),color:this.Zb()};return c.Rs(g,f)}if(null!=this.Eh())return this.Eh();g="";(f=this.getName())&&(g=a.Rb.DQ("td",c._tooltipLabelStyle)+f+"\x3c/td\x3e");f=a.m.ea(this.Ki.a);c._tooltipLabelStyle.Ma(a.j.$M,f?"left":"right");c._tooltipValueStyle.Ma(a.j.$M,f?"right":"left");
return a.Rb.DQ("table",c._tooltipStyle)+"\x3ctr\x3e"+g+a.Rb.DQ("td",c._tooltipValueStyle)+this.Hla()+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};E.prototype.pi=function(){return this.Zb()};E.prototype.Hla=function(){return a.I.Yc(this.Ki.A(),"labelCountWithTotal",a.I.pa,"COUNT_WITH_TOTAL",[this.ZU(),this.Ki.v4a()])};E.prototype.ab=function(){return"none"!=this.Ki.A().selectionMode&&!this.ZO};E.prototype.gb=function(){return this.wi};E.prototype.hc=function(a){this.wi=a;this.Ro();for(var c=0;c<this.Uc();c++){var f=
this.ec(c);(f instanceof F||f instanceof v)&&f.hc(a)}};E.prototype.Rc=function(){for(var a=0;a<this.Uc();a++){var c=this.ec(a);(c instanceof F||c instanceof v)&&c.Rc()}};E.prototype.Cc=function(){for(var a=0;a<this.Uc();a++){var c=this.ec(a);(c instanceof F||c instanceof v)&&c.Cc()}};E.prototype.Xd=function(){return[this]};E.prototype.te=function(){var c=[],g=this.Ki.A();this.ab()&&c.push(a.I.Yc(g,this.gb()?"stateSelected":"stateUnselected",a.I.pa,this.gb()?"STATE_SELECTED":"STATE_UNSELECTED"));this.bk()&&
c.push(a.I.Yc(g,"stateDrillable",a.I.pa,"STATE_DRILLABLE"));g=this.getName();g=null!=this.Eh()?this.Eh():null==g?this.Hla():a.I.Ja(a.I.pa,"COLON_SEP_LIST",[g,this.Hla()]);return a.R.lm(g,c)};E.prototype.Ro=function(){a.m.Vj()||this.Od("label",this.te())};E.prototype.rd=function(){return this.xl.categories||[this.getId()]};E.prototype.Kd=function(c){var g=this.Ki.Ob().ya;return c.type==a.MouseEvent.He||g.xo(c)?this:g.Uh(c)?D.Kd(this.Ki,this,c):null};E.prototype.md=function(a){return this.V(a)};E.prototype.$j=
function(){return this.ja()};E.prototype.rh=function(){this.ZO||(this.Sc=!0,this.Rc())};E.prototype.mf=function(){this.ZO||(this.Sc=!1,this.Cc())};E.prototype.Ae=function(){return this.Sc};E.prototype.g8a=function(a){this.oEa=a};E.prototype.eV=function(){return this.oEa};a.f.v(D,a.ya);D.prototype.Jz=function(a){return this.Uh(a)&&!a.ctrlKey};D.prototype.xo=function(c){return c.keyCode==a.KeyboardEvent.Kj&&c.ctrlKey};D.Kd=function(c,g,f,t){var v=c.ey();t||(t=g);if("none"==g.yg()&&g!=t){var y=a.Y.ac(v,
g);if(0==y||y==v.length-1)return t}var n=p.pua(c),z=p.oua(c),w=p.Ea(c),y=g,n=f.keyCode==a.KeyboardEvent.Ne&&n||f.keyCode==a.KeyboardEvent.Be&&!n||f.keyCode==a.KeyboardEvent.sg&&z||f.keyCode==a.KeyboardEvent.kf&&!z,w=f.keyCode==a.KeyboardEvent.Ne&&w||f.keyCode==a.KeyboardEvent.Be&&w||f.keyCode==a.KeyboardEvent.sg&&!w||f.keyCode==a.KeyboardEvent.kf&&!w,n=a.Y.ac(v,g)+(n?1:-1);w?y=a.ya.Kd(g,f,v):n<v.length&&0<=n&&(y=v[n]);"none"==y.yg()&&(y=y!=g?D.Kd(c,y,f,t):t);return y};D.prototype.Qk=function(c){var g=
this.Fc.Fe();return g&&c.keyCode==a.KeyboardEvent.Mn?(this.Fc.zy(g),a.u.Ud(c),g):D.C.Qk.call(this,c)};a.f.v(F,a.W);F.prototype.Mf=function(c,g){var f=new a.td(this.a,this,.75*this.Ki.Lb()),p=f.da,v=this.Hd(),y=g.Hd().clone();y.nc(v)||(this.Ia(y),p.aa(a.L.At,this,this.Hd,this.Ia,v));v=this.Ek();this.hm(g.Ek());p.aa(a.L.Hf,this,this.Ek,this.hm,v);g.qa(0);c.add(f,1)};F.prototype.ai=function(c){c.add(new a.Wg(this.a,this,.5*this.Ki.Lb()),0)};F.prototype.nh=function(c){this.qa(0);c.add(new a.dg(this.a,
this,.5*this.Ki.Lb()),2)};F.prototype.Ek=function(){return[this.Kg(),this.Lg(),this.getWidth(),this.getHeight()]};F.prototype.hm=function(a){this.Zp(a[0]);this.$p(a[1]);this.jb(a[2]);this.Mb(a[3])};var p={};a.f.v(p,a.f);p.ia=function(c,g,f,t){var x=c.a,y=new a.Rect(x,f.x,f.y,f.b,f.i);y.Yb();g.B(y);t||(t=p.Fn(c,f.b,f.i));if(t.items){c.Gva(t.items);for(var y=c.A()._gapRatio*t.a6a,n=p.Ea(c),z=p.oua(c),w=p.pua(c),A=new a.ev,d=0,h=0,B=0,r=0;r<t.items.length;r++){var l=t.items[r],C=l.NHa(),K=l.bJa();if(!(0>=
C||0>=K)){for(var D=C*t.Vaa,E=K*t.Vca,ca=l.ZU(),ja=0,ea=!0,ha;0<ca;){if(C!=d||K!=h)B=0;0==B&&(ha=p.ICa(A,C,K,t.OGa,t.OKa,n));if(null==ha)break;var da=ha.ara*t.Vaa+D/2,X=ha.ewa*t.Vca+E/2,da=f.x+(w?f.b-da:da),X=f.y+(z?f.i-X:X),Z=Math.min(1-B,ca),Y,O,S,T;n?(Y=da-D/2,O=z?X+E*(.5-Z-B):X+E*(B-.5),S=D,T=E*Z):(Y=w?da+D*(.5-Z-B):da+D*(B-.5),O=X-E/2,S=D*Z,T=E);var J;1==Z?(J=l.getId()+"_"+ja,ja++):J=Math.random();if(l.jJa())J=new v(c,da,X,D,E,l.jJa(),l.k4a(),l.i4a(),l.j4a(),J+"_I");else{var W=new a.Rect(x,Y,
O,S,T);W.Yb();l.B(W);J=new F(c,l.yg(),da,X,D-t.Vaa*y,E-t.Vca*y,J+"_S");J.bb(l.Zb());J.uc(l.oo(),null,l.Rh());J.fS(l.Zb());J.sc(l.Jr());J.Ma(l.N())}1>Z&&(W=new a.fc,W.se(Y,O,S,T),J.ce(W));ea&&(l.g8a(new a.P(da,X)),ea=!1);l.B(J);c.N6a(J);ca-=Z;B=(B+Z)%1}g.B(l);l.g9a();d=C;h=K}}}else p.tm(c,g,f)};p.Fn=function(c,g,f){var t=c.A(),v=t.items;if(!v)return{};for(var y=a.Y.WB(t.hiddenCategories),n=[],z=0,w=1,A=1,d=Infinity,h=0;h<v.length;h++)if(null!=v[h]){var B=new E(c,v[h]);if(!y||!a.Y.DI(y,B.rd())){var r=
B.NHa(),l=B.bJa();0>=r||0>=l||(r>w&&(w=r),l>A&&(A=l),r<d&&(d=r),l<d&&(d=l),z+=r*l*B.ZU(),n.push(B))}}if(0==z)return{};v=t.columnWidth;y=t.rowHeight;g&&f||(v||(v=y?y:t._defaultSize),y||(y=v));c=p.Ea(c);h=t.columnCount;t=t.rowCount;h||t||(g&&f?c?t=p.IT(Math.sqrt(z*f/g),A):h=p.IT(Math.sqrt(z*g/f),w):g?h=Math.max(Math.floor(g/v),1):f?t=Math.max(Math.floor(f/y),1):c?t=p.IT(Math.sqrt(z),A):h=p.IT(Math.sqrt(z),w));h?t||(t=p.IT(z/h,A)):h=p.IT(z/t,w);g&&f&&(v||(v=y?y:Math.min(g/h,f/t)),y||(y=v));return 0>=
h||0>=t||0>=v||0>=y?{}:{items:n,OGa:h,OKa:t,Vaa:v,Vca:y,a6a:d}};p.IT=function(a,c){return Math.ceil(a/c)*c};p.ICa=function(a,c,f,t,v,y){if(y)return(a=p.ICa(a,f,c,v,t,!1))?{ara:a.ewa,ewa:a.ara}:null;for(y=0;y<v-f+1;y++)for(var n=0;n<t-c+1;n++)if(p.gUa(a,n,y,c,f))return p.cYa(a,n,y,c,f),{ara:n,ewa:y};return null};p.gUa=function(a,c,f,p,v){for(var y=0;y<v;y++)for(var n=0;n<p;n++)if(a.get(c+n,f+y))return!1;return!0};p.cYa=function(a,c,f,p,v){for(var y=0;y<v;y++)for(var n=0;n<p;n++)a.put(c+n,f+y,!0)};
p.tm=function(c,g,f){var p=c.A(),v=a.I.Yc(p,"labelNoData",a.I.pa,"NO_DATA");g=a.ga.tm(g,v,f.clone(),c.Ob(),p._statusMessageStyle);c.M6a(g)};p.Ea=function(a){return"vertical"==a.A().layout};p.oua=function(a){a=a.A().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};p.pua=function(c){var g=c.A().layoutOrigin,g="topEnd"==g||"bottomEnd"==g;return a.m.ea(c.a)?!g:g};a.K(a,"PictoChart",a.ui);a.K(a.ui,"newInstance",a.ui.newInstance);a.K(a.ui.prototype,"destroy",a.ui.prototype.Ec);a.K(a.ui.prototype,"getAutomation",
a.ui.prototype.Bi);a.K(a.ui.prototype,"highlight",a.ui.prototype.Zd);a.K(a.ui.prototype,"render",a.ui.prototype.ia);a.K(a.ui.prototype,"select",a.ui.prototype.select);a.K(c.prototype,"getDomElementForSubId",c.prototype.Sh);a.K(c.prototype,"getItem",c.prototype.getItem);a.K(c.prototype,"getItemCount",c.prototype.q4)})(dvt);
  return dvt;
});
