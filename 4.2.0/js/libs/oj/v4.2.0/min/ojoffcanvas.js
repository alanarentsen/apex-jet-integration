/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","promise","ojs/ojjquery-hammer","ojs/ojcomponentcore"],function(a,g,c){a.q={};o_("OffcanvasUtils",a.q,a);a.q.i_="oj-offcanvasEdge";a.q.yt="oj-offcanvas";a.q.j_="oj-mediaQueryListener";a.q.Kea="oj-offcanvasHammer";a.q.Lea="oj-offcanvasStyle";a.q.nz="selector";a.q.oH="content";a.q.Zy="start";a.q.Yy="end";a.q.uH="top";a.q.CO="bottom";a.q.Vy="displayMode";a.q.Wy="push";a.q.OY="overlay";a.q.Aca="pin";a.q.ECa="modality";a.q.R7a="none";a.q.FCa="modal";a.q.yO="_dismissHandler";
a.q.yZ="_openPromise";a.q.nH="_closePromise";a.q.LC="_glassPane";a.q.Jda="_surrogate";a.q.HZ="data-oj-offcanvas-surrogate-id";a.q.ZCa="oj-offcanvas-outer-wrapper";a.q.YO="oj-offcanvas-open";a.q.Wi="oj-offcanvas-transition";a.q.bDa="oj-offcanvas-pin";a.q.aDa="oj-offcanvas-pin-transition";a.q.gCa="oj-offcanvas-glasspane";a.q.HO="oj-offcanvas-glasspane-dim";a.q.KDa="ojbeforeopen veto";a.q.JDa="ojbeforeclose veto";a.q.DZa={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",
bottom:"oj-offcanvas-shift-up"};a.q.HMa={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"};a.q.jOa=function(b){b=b[a.q.Vy];b!==a.q.OY&&b!==a.q.Wy&&b!==a.q.Aca&&(b=(a.ic.ad("oj-offcanvas-option-defaults")||{}).displayMode);return b};a.q.gj=function(b){return g(b[a.q.nz])};a.q.JK=function(b){return b[a.q.ECa]===a.q.FCa};a.q.N5=function(b){return b.hasClass(a.q.YO)};a.q.sA=function(b){return b.closest("."+a.q.ZCa)};a.q.WR=function(b){var c=a.q.gj(b);
return a.q.tqa(b)||b[a.q.Vy]===a.q.OY?c:c.parent()};a.q.FPa=function(b){var c=a.q.DZa[b];if(!c)throw"Invalid edge: "+b;return c};a.q.Qh=function(){return"rtl"===a.Q.Xh()};a.q.$p=function(a,c){a.css({"-webkit-transform":c,transform:c})};a.q.w4=function(b,c,e){b=b===a.q.Yy;if(a.q.Qh()||e)b=!b;return"translate3d("+(b?"-":"")+c+", 0, 0)"};a.q.bM=function(b,c,e){a.q.$p(b,a.q.w4(c,e,!1))};a.q.sna=function(b,c){return"translate3d(0, "+(b===a.q.CO?"-":"")+c+", 0)"};a.q.qZa=function(b,c,e){a.q.$p(b,a.q.sna(c,
e))};a.q.tna=function(a,c){return"translate3d(0, "+(c?"-":"")+a+", 0)"};a.q.qYa=function(b,c,e){b.addClass(a.q.Wi);a.q.$p(b,"translate3d(0, 0, 0)");c.addClass(a.q.Wi);a.q.$p(c,e)};a.q.tsa=function(b){var c=b.edge;b=a.q.gj(b);c&&c.length||(c=b.hasClass("oj-offcanvas-start")?a.q.Zy:b.hasClass("oj-offcanvas-end")?a.q.Yy:b.hasClass("oj-offcanvas-top")?a.q.uH:b.hasClass("oj-offcanvas-bottom")?a.q.CO:a.q.Zy);g.data(b[0],a.q.i_,c);return c};a.q.w3=function(b){return g.data(b[0],a.q.i_)};a.q.EF=function(b,
c,e){var f=b[a.q.Vy],g=a.q.gj(b),k=a.q.YO,f=f===a.q.OY?a.q.Wi+" oj-offcanvas-overlay":a.q.Wi;e?(g.addClass(k),c.addClass(f)):(b.makeFocusable&&a.Q.HX({element:g,remove:!0}),b=b.tabindex,void 0===b?g.removeAttr("tabindex"):g.attr("tabindex",b),g.removeClass(k),c.removeClass(f))};a.q.Dn=function(b){var c=a.q.gj(b),e=c.find("[autofocus]");0==e.length&&(e=c.find(":tabbable"));0==e.length?(e=c.attr("tabindex"),void 0!==e&&(b.tabindex=e),c.attr("tabindex","-1"),e=c,a.Q.HX({element:c,applyHighlight:!0}),
b.makeFocusable=!0):e=e[0];a.yf.UM(e)};a.q.oTa=function(a){return"none"!=a.autoDismiss};a.q.sJa=function(a){var c=a.css("transitionProperty").split(","),e=a.css("transitionDelay").split(",");a=a.css("transitionDuration").split(",");for(var f=0,g=0;g<c.length;g++){var k=a[g%a.length],k=-1<k.indexOf("ms")?parseFloat(k):1E3*parseFloat(k);if(0<k)var l=e[g%e.length],l=-1<l.indexOf("ms")?parseFloat(l):1E3*parseFloat(l),f=Math.max(f,l+k)}return f+100};a.q.zn=function(b,c){function e(){f&&(clearTimeout(f),
f=void 0);b.off("transitionend.oc webkitTransitionEnd.oc",e);c(b)}var f;b.on("transitionend.oc webkitTransitionEnd.oc",e);f=setTimeout(e,a.q.sJa(b))};a.q.Sia=function(b){a.q.close(b)["catch"](function(b){a.D.warn("Offcancas close failed: "+b)})};a.q.mU=function(b){a.q.U8(b);if(a.q.oTa(b)){var c=a.q.gj(b),e=b[a.q.yO]=function(e){var f=e.target;a.Q.Bya(e)||"focus"===e.type&&!g(f).is(":focusable")||(null==g.data(c[0],a.q.yt)?a.q.U8(b):a.Q.Q4a(c[0],f)||a.q.Sia(b))},f=document.documentElement;a.Q.qe()&&
f.addEventListener("touchstart",e,!0);f.addEventListener("mousedown",e,!0);f.addEventListener("focus",e,!0)}a.q.cF(b)};a.q.U8=function(b){var c=b[a.q.yO];if(c){var e=document.documentElement;a.Q.qe()&&e.removeEventListener("touchstart",c,!0);e.removeEventListener("mousedown",c,!0);e.removeEventListener("focus",c,!0);delete b[a.q.yO];b[a.q.yO]=null}a.q.mV(b)};a.q.cF=function(b){if(a.Q.qe()){var d=b[a.q.nz],e=g(d),f=a.q.w3(e),h,k;f===a.q.Zy&&!a.q.Qh()||f===a.q.Yy&&a.q.Qh()?(k={recognizers:[[c.Swipe,
{direction:c.DIRECTION_LEFT}]]},h="swipeleft"):f===a.q.Zy&&a.q.Qh()||f===a.q.Yy&&!a.q.Qh()?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_RIGHT}]]},h="swiperight"):f===a.q.uH?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_UP}]]},h="swipeup"):f===a.q.CO&&(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_DOWN}]]},h="swipedown");f=e.Zg(k).on(h,function(c){c.target===e[0]&&(c.preventDefault(),a.q.Sia(b))});g.data(g(d)[0],a.q.Kea,{event:h,hammer:f})}};a.q.mV=function(b){b=a.q.gj(b);0<b.length&&(b=g.data(b[0],
a.q.Kea))&&b.hammer.off(b.event)};a.q.yTa=function(b){return a.q.sA(b).hasClass("oj-offcanvas-page")};a.q.R5=function(b){return b[a.q.Vy]===a.q.Aca};a.q.tqa=function(b){return b[a.q.oH]||a.q.yTa(a.q.gj(b))||a.q.R5(b)};a.q.v9a=function(b){var c=b.attr("style");void 0!==c&&g.data(b[0],a.q.Lea,c)};a.q.ZXa=function(b){var c=g.data(b[0],a.q.Lea);c?b.attr("style",c):b.removeAttr("style")};a.q.rB=function(b,c){var e=a.q.w3(b),e=a.q.FPa(e),f=a.q.sA(b);a.C.Df(f,g);var h=f.hasClass(e);c||f.toggleClass(e,!h);
return h};a.q.Ot=function(b){a.q.U8(b);var c=a.q.gj(b),e=a.q.R5(b),f=null;try{f=g.data(c[0],a.q.yt)}catch(h){}f===b&&(b._panInProgress||(a.q.w3(c),f=a.q.WR(b),e?c.removeClass(a.q.YO+" "+a.q.aDa):a.q.EF(b,f,!1),a.q.gXa(b),e&&(a.q.sA(c).removeClass(a.q.bDa),a.q.ZXa(c)),c.trigger("ojclose",b)),g.removeData(c[0],a.q.yt))};a.q.wta=function(b,c,e){var f=g(b);(c=!!c)&&a.q.N5(f)&&a.q.Vt(b,!1);f.toggleClass(a.q.HMa[e],!c)};a.q.W6a=function(b){var c=b.query;if(null!==c){var e=b[a.q.nz],c=window.matchMedia(c),
f=a.q.tsa(b);b=function(b){a.q.wta(e,b.matches,f)};c.addListener(b);a.q.wta(e,c.matches,f);g.data(g(e)[0],a.q.j_,{mqList:c,mqListener:b})}};o_("OffcanvasUtils.setupResponsive",a.q.W6a,a);a.q.o7a=function(b){b=a.q.gj(b);var c=g.data(b[0],a.q.j_);c&&(c.mqList.removeListener(c.mqListener),g.removeData(b[0],a.q.j_))};o_("OffcanvasUtils.tearDownResponsive",a.q.o7a,a);a.q.tVa=function(b,c,e){function f(e){e.removeClass(a.q.Wi);l?l=!1:(a.q.Dn(b),h.trigger("ojopen",b),a.q.mU(b),c(!0))}var h=a.q.gj(b),k=g(b[a.q.oH]);
a.C.Df(k,g);var l=!0,m=b.size,n;h.addClass(a.q.YO);window.setTimeout(function(){e===a.q.Zy||e===a.q.Yy?(void 0===m&&(m=h.outerWidth(!0)+"px"),n=a.q.w4(e,m,!1)):(void 0===m&&(m=h.outerHeight(!0)+"px"),a.q.$p(h,a.q.tna(m,e===a.q.uH)),n=a.q.tna(m,e!==a.q.uH));window.setTimeout(function(){a.q.qYa(h,k,n);a.q.rB(h,!1);a.q.zn(k,f);a.q.zn(h,f)},0)},0);a.q.X0(b,h)};a.q.pVa=function(b,c,e){var f=a.q.gj(b);a.q.EF(b,f,!0);var g=b.size;g&&(e===a.q.Zy||e===a.q.Yy?a.q.$p(f,a.q.w4(e,g,!0)):a.q.$p(f,a.q.sna(e,g)));
window.setTimeout(function(){a.q.rB(f,!1)},20);a.q.X0(b,f);a.q.zn(f,function(){f.removeClass(a.q.Wi);a.q.Dn(b);f.trigger("ojopen",b);a.q.mU(b);c(!0)})};a.q.bKa=function(b,c,e,f){function h(){l||(k.removeClass(a.q.Wi),a.q.$p(k,""),a.q.Ot(b),c(!0));l=!1}var k=g(b[a.q.oH]),l=!0;a.q.$p(e,"");a.q.$p(k,"");a.q.rB(e,!1);a.q.JK(b)&&b[a.q.LC].removeClass(a.q.HO);f?(k.addClass(a.q.Wi),e.addClass(a.q.Wi),a.q.zn(e,h),a.q.zn(k,h)):(l=!1,h())};a.q.aKa=function(b,c,e,f){function g(){a.q.Ot(b);c(!0)}a.q.rB(e,!1);
a.q.JK(b)&&b[a.q.LC].removeClass(a.q.HO);f?(e.addClass(a.q.Wi),a.q.zn(e,g)):g()};a.q.oVa=function(b,c,e,f){var h=a.q.gj(b),k=a.q.WR(b);a.C.Df(k,g);a.q.EF(b,k,!0);var l;e===a.q.Zy||e===a.q.Yy?(l=void 0===l?h.outerWidth(!0)+"px":l,f===a.q.Wy&&a.q.bM(k,e,l)):(l=void 0===l?h.outerHeight(!0)+"px":l,f===a.q.Wy&&a.q.qZa(k,e,l));window.setTimeout(function(){a.q.rB(h,!1)},10);a.q.X0(b,h);a.q.zn(k,function(){k.removeClass(a.q.Wi);a.q.Dn(b);h.trigger("ojopen",b);a.q.mU(b);c(!0)})};a.q.$Ja=function(b,c,e,f){function g(){a.q.Ot(b);
c(!0)}var k=b[a.q.Vy],l=a.q.WR(b);k===a.q.Wy&&a.q.$p(l,"");a.q.rB(e,!1);a.q.JK(b)&&b[a.q.LC].removeClass(a.q.HO);f?(l.addClass(a.q.Wi),a.q.zn(l,g)):g()};a.q.open=function(b){var c=a.q.gj(b),e=g.data(c[0],a.q.yt);if(e){if(e[a.q.nH])return e[a.q.nH];if(e[a.q.yZ])return e[a.q.yZ]}var f,h=!1,e=new Promise(function(e,k){a.C.Df(c,g);var n=a.q.tsa(b),t=g.Event("ojbeforeopen");c.trigger(t,b);if(!1===t.result)k(a.q.KDa),h=!0;else{var t=a.q.jOa(b),s=a.q.R5(b);!s||n!==a.q.uH&&n!==a.q.CO||(t=a.q.Wy);var p=g.extend({},
b);p[a.q.Vy]=t;g.data(c[0],a.q.yt,p);if(b[a.q.oH]){if(!a.q.tqa(b))throw"Error: Both main content selector and the inner wrapper \x3cdiv class\x3d'oj-offcanvas-inner-wrapper'\x3e are provided. Please remove the inner wrapper.";f=a.Context.getContext(c[0]).Dc().Xc({description:"The offcanvas selector \x3d'"+b[a.q.nz]+"' doing the open animation."});s||(t===a.q.Wy?a.q.tVa(p,e,n):a.q.pVa(p,e,n))}else a.q.oVa(p,e,n,t)}}),e=e.then(function(a){f&&f();return a},function(a){f&&f();throw a;});if(!h){var k=
g.data(c[0],a.q.yt);k&&(k[a.q.yZ]=e,a.Components.ep(c[0]))}return e};o_("OffcanvasUtils.open",a.q.open,a);a.q.close=function(b){return a.q.Vt(b[a.q.nz],!0)};o_("OffcanvasUtils.close",a.q.close,a);a.q.Vt=function(b,c){var e=g(b);a.C.Df(e,g);var f=g.data(e[0],a.q.yt);if(f&&f[a.q.nH])return f[a.q.nH];var h,k=!1,l=new Promise(function(l,n){if(a.q.N5(e)){b!=f[a.q.nz]&&l(!0);a.q.rB(e,!0)||l(!0);var t=g.Event("ojbeforeclose");e.trigger(t,f);!1===t.result?(n(a.q.JDa),k=!0):(c&&(h=a.Context.getContext(e[0]).Dc().Xc({description:"The offcanvas selector \x3d'"+
f[a.q.nz]+"' doing the close animation."})),t=f[a.q.Vy],f[a.q.oH]?t===a.q.Wy?a.q.bKa(f,l,e,c):a.q.aKa(f,l,e,c):a.q.$Ja(f,l,e,c))}else l(!0)}),l=l.then(function(a){h&&h();return a},function(a){h&&h();throw a;});!k&&(f=g.data(e[0],a.q.yt))&&(f[a.q.nH]=l,a.Components.Mq(e[0]));return l};a.q.toggle=function(b){var c=a.q.gj(b);a.C.Df(c,g);return a.q.N5(c)?a.q.close(b):a.q.open(b)};o_("OffcanvasUtils.toggle",a.q.toggle,a);a.q.RHa=function(b){var c=g("\x3cdiv\x3e");c.addClass(a.q.gCa);c.attr("role","presentation");
c.attr("aria-hidden","true");c.appendTo(b.parent());c.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation();a.preventDefault()});return c};a.q.d2=function(b){var c=g("\x3cspan style\x3d'display:none'\x3e");c.attr("aria-hidden","true");var e=b.attr("id");e?(e=[e,"surrogate"].join("_"),c.attr("id",e)):e=c.uniqueId();c.insertBefore(b);b.attr(a.q.HZ,e);return c};a.q.$Za=function(b,c){b[a.q.Jda]=a.q.d2(c);c.appendTo(c.parent())};a.q.YXa=function(b){var c=
a.q.gj(b);b=b[a.q.Jda];c&&b&&c.attr(a.q.HZ)===b.attr("id")&&(c.insertAfter(b),c.removeAttr(a.q.HZ),b.remove())};a.q.X0=function(b,c){a.q.JK(b)&&(b[a.q.LC]=a.q.RHa(c),a.q.$Za(b,c),window.setTimeout(function(){b[a.q.LC].addClass(a.q.HO)},0))};a.q.gXa=function(b){a.q.JK(b)&&(b[a.q.LC].remove(),a.q.YXa(b))};a.q.ZAa=function(b){var d,e,f,h,k,l,m,n,t,s,p,q;null==g(b).attr("oj-data-pansetup")&&(g(b).attr("oj-data-pansetup","true"),b.displayMode="push",d=a.q.gj(b),f=a.q.sA(d),k={recognizers:[[c.Pan,{direction:c.DIRECTION_HORIZONTAL}]]},
l=!1,g(f).Zg(k).on("panstart",function(f){m=null;switch(f.gesture.direction){case c.DIRECTION_LEFT:Math.abs(f.gesture.deltaY)<Math.abs(f.gesture.deltaX)&&(m=a.q.Qh()?"end":"start");break;case c.DIRECTION_RIGHT:Math.abs(f.gesture.deltaY)<Math.abs(f.gesture.deltaX)&&(m=a.q.Qh()?"start":"end")}null!=m&&(n={direction:m,distance:Math.abs(f.gesture.deltaX)},t=g.Event("ojpanstart"),d.trigger(t,n),t.isDefaultPrevented()||(e=b.size,null==e&&(e=d.outerWidth()),b._closePromise=null,b._panInProgress=!0,h=a.q.WR(b),
h.off(".oc"),a.q.EF(b,h,!0),l=!0,f.gesture.srcEvent.stopPropagation(),f.stopPropagation()))}).on("panmove",function(b){l&&(s=b.gesture.deltaX,"start"==m&&0<s||"end"==m&&0>s?a.q.bM(h,"start","0px"):(d.css("width",Math.abs(s)),h.removeClass(a.q.Wi),a.q.bM(h,"start",s+"px"),n={direction:m,distance:Math.abs(s)},t=g.Event("ojpanmove"),d.trigger(t,n),b.gesture.srcEvent.stopPropagation(),b.stopPropagation()))}).on("panend",function(c){l&&(l=!1,b._panInProgress=null,s=Math.abs(c.gesture.deltaX),n={distance:s},
t=g.Event("ojpanend"),d.trigger(t,n),c.stopPropagation(),t.isDefaultPrevented()?(q=function(){a.q.EF(b,h,!1);h.removeClass(a.q.Wi);h.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",q);d.trigger("ojclose",b)},h.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",q),h.addClass(a.q.Wi),a.q.bM(h,"start","0px")):(p=b.edge,null==p&&(p=d.hasClass("oj-offcanvas-start")?"start":"end"),a.q.AIa(h,d,p,e,b),g.data(d[0],a.q.yt,b),g.data(d[0],a.q.i_,p),a.q.mU(b)))}))};o_("OffcanvasUtils.setupPanToReveal",
a.q.ZAa,a);a.q.AIa=function(b,c,e,f,g){var k,l,m,n,t,s,p,q,r,u;b.removeClass(a.q.Wi);k=Math.round(1E3/60);l=b.css("transform").split("(")[1].split(")")[0].split(",");m=parseInt(l[4],10);n="end"==e?0-f:f;s=Math.max(1,Math.abs(n-m)/(400/k));p=(new Date).getTime();q=function(){r=(new Date).getTime();u=Math.max(s,s*Math.max((r-p)/k));p=r;m<n?m=Math.min(n,m+u):m>n&&(m=Math.max(n,m-u));a.q.bM(b,e,Math.abs(m)+"px");c.css("width",Math.abs(m)+"px");m==n?(window.cancelAnimationFrame(t),b.addClass(a.q.Wi),c.trigger("ojopen",
g)):t=window.requestAnimationFrame(q)};t=window.requestAnimationFrame(q)};a.q.pBa=function(b){b=a.q.gj(b);b=a.q.sA(b);g(b).off("panstart panmove panend")};o_("OffcanvasUtils.tearDownPanToReveal",a.q.pBa,a)});