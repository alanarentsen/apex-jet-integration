/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojradiocheckbox","ojs/ojoption"],function(a,g){(function(){a.ib("oj.ojRadioset",g.oj.editableValue,{version:"1.0.0",defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{disabled:!1,labelledBy:null,required:!1,value:void 0},refresh:function(){this._super();this.qb()},widget:function(){return this.w7a},validate:a.ka.validate,Gh:function(b,c){var e;e=[{Ba:"disabled",mf:!0},{Ba:"required",lk:!0,mf:!0},{Ba:"title"}];this._super(b,c);this.$()||
(a.ka.Gs(e,c,this),void 0===c.value&&(this.ai=this.PR(),e=this.ai.filter(":checked"),e=0===e.length?void 0:e.val(),void 0!==e&&this.option("value",e,{_context:{Rc:!0,Sa:!0}}),void 0===this.options.value&&(this.options.value=null)))},rc:function(){var a=this.element;this._super();a.uniqueId();this.Yr();this.ai=this.PR();if(a.is("fieldset"))throw Error("ojRadioset cannot be bound to a fieldset. Use a div instead.");this.ai._ojRadioCheckbox().attr("data-oj-internal","");this.w7a=a.addClass("oj-radioset oj-component").attr("role",
"radiogroup");g(a.get(0).childNodes).filter(function(){return this.getAttribute&&"contextMenu"===this.getAttribute("slot")?!1:!0}).wrapAll("\x3cdiv class\x3d'oj-radioset-wrapper'\x3e\x3c/div\x3e");this._on(this.eu);this.qb()},e0:function(){this.Yr();this.ai=this.PR();this.ai.filter(".oj-radio").each(function(){var a=void 0!==g(this).attr("disabled")?!!g(this).prop("disabled"):!1;g(this)._ojRadioCheckbox("option","disabled",a)});this.ai.not(".oj-radio")._ojRadioCheckbox()},Focus:function(){this.xe().filter(":focusable").first().focus();
return!0},aj:function(){return this.options.required},h0:function(){},Ie:a.ka.Ie,lo:a.ka.lo,Yr:function(){if(this.$()){var a,c,e=this.yr.bind(this),f=this.element.children("oj-option");a=0;for(c=f.length;a<c;a++)f[a].customOptionRenderer=e;f=this.element.children(".oj-radioset-wrapper").find("oj-option");if(0<f.length)for(a=0,c=f.length;a<c;a++)f[a].customOptionRenderer=e}},yr:function(a){var c,e;g(a).uniqueId();var f=a.getAttribute("id"),h=f+"|rb",k=document.getElementById(h),l=null!==k;l||(c=document.createElement("span"),
k=document.createElement("input"),e=document.createElement("label"),c.setAttribute("class","oj-choice-item"),k.setAttribute("type","radio"),k.setAttribute("id",h),e.setAttribute("for",h),a.parentElement.insertBefore(c,a),e.appendChild(a),c.appendChild(k),c.appendChild(e));c=this.element[0].id;e=a.getAttribute("aria-label");h=a.getAttribute("aria-labelledby");k.setAttribute("data-oj-option-id",f);c&&""!=c?k.setAttribute("name",c):k.removeAttribute("name");e&&""!=e?k.setAttribute("aria-label",e):k.removeAttribute("aria-label");
h&&""!=h?k.setAttribute("aria-labelledby",h):k.removeAttribute("aria-labelledby");a.disabled?k.setAttribute("disabled",!0):k.removeAttribute("disabled");l&&g(k)._ojRadioCheckbox("option","disabled",a.disabled)},hk:a.ka.hk,PR:function(){var b;b=this.element;var c=b.find("input[type\x3dradio]:first");0===c.length&&a.D.warn("Could not find any input type\x3dradio within this element");c=c.attr("name");return void 0===c?(b=b.find("input[type\x3dradio]"),b.not("[name]")):b.find("input[type\x3dradio][name\x3d"+
c+"]")},li:function(a,c,e){a=this.element.find("input[type\x3dradio]");var f=a.filter(":checked");a=f.length?f:a.filter(":enabled").first();this.mi(c,e,{launcher:a})},_GetMessagingLauncherElement:function(){return this.widget()},qb:function(){this.tx(this.options.disabled);this.element.hasClass("oj-choice-direction-column")||this.element.hasClass("oj-choice-direction-row")||this.element.addClass("oj-choice-direction-column");this.Ie(this.options.required);this.hk(null,this.options.labelledBy,this.widget())},
eu:{change:function(a){this.KP(a)}},KP:function(a){var d=this.$i();this.jc(d,a,c)},$i:function(){return this.gw()},Uk:function(b){var c,e=this.ai.length,f=-1,h=this.ai.get(),k=[];for(c=0;c<e;c++)if(k[c]=this.Bt(h[c]),k[c]===b){f=c;break}if(-1===f)for(c=0;c<e;c++)if(a.f.Bb(k[c],b)){f=c;break}for(c=0;c<e;c++)b=g(this.ai[c]),h=b._ojRadioCheckbox("option","checked"),c===f?h||b._ojRadioCheckbox("option","checked",!0):h&&b._ojRadioCheckbox("option","checked",!1)},gw:function(){var a=this.ai.filter(":checked");
return 0===a.length?null:this.Bt(a[0])},Bt:function(a){var c;this.$()?(a=document.getElementById(a.getAttribute("data-oj-option-id")))&&(c=a.value):c=a.value;return c},_GetDefaultStyleClass:function(){return"oj-radioset"},xe:function(){null==this.ai&&(this.ai=this.PR());return this.ai},tz:function(){return!0},Eg:a.ka.Eg,tx:function(a){a=!!a;this.ai.each(function(){g(this).data("oj-_ojRadioCheckbox").JI(a)});this.ai._ojRadioCheckbox("refreshDisabled")},_setOption:function(a,c,e){var f=this.options.labelledBy;
this._super(a,c,e);switch(a){case "disabled":this.tx(c);break;case "labelledBy":this.hk(f,c,this.widget())}},vt:function(a,c,e){this._superApply(arguments);switch(a){case "required":this.Eg(a)}},getNodeBySubId:function(b){var c=this._super(b),e,f;if(!c)switch(e=this.ai.get(),f=b.subId,f){case "oj-radioset-inputs":c=e;break;case "oj-radioset-radio":if(b=b.value,"undefined"!=typeof b){f=e.length;for(var g=-1,k=[],l=0;l<f;l++)if(k[l]=this.Bt(e[l]),k[l]===b){g=l;break}if(-1===g)for(l=0;l<f;l++)if(a.f.Bb(k[l],
b)){g=l;break}-1!==g&&(c=e[g])}}return c||null},getSubIdByNode:function(a){for(var c=this.xe()[0].parentElement.parentElement.parentElement,e=a;e&&e!=c;){"LABEL"==e.nodeName&&(e=document.getElementById(e["for"]));if("INPUT"==e.nodeName)return{subId:"oj-radioset-radio",value:this.Bt(e)};e=e.parentElement}return this._super(a)},_destroy:function(){var a=this._super(),c=this.element[0].firstElementChild;this.ai&&this.ai._ojRadioCheckbox("destroy");g(c).contents().unwrap();return a}});var c={dv:!1}})();
a.J.Ua("oj-radioset","editableValue",{properties:{disabled:{type:"boolean"},labelledBy:{type:"string"},required:{type:"boolean"},value:{type:"any",writeback:!0}},methods:{validate:{}},extension:{Ya:"ojRadioset"}});a.J.register("oj-radioset",{metadata:a.J.getMetadata("oj-radioset")})});