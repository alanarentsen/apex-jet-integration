/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation-number","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(a,g,c,b,d){function e(b,a){this.BVa=a;this.aYa=b;this.QLa="/"}a.Km=function(b){this.Init(b)};o_("AttributeGroupHandler",a.Km,a);a.f.ua(a.Km,a.f,"oj.AttributeGroupHandler");a.Km.prototype.Init=function(b){this.WI={};this.zV=0;this.n6={};for(var a in b)this.r9(a,b[a])};a.Km.prototype.tq=function(){return[]};a.f.j("AttributeGroupHandler.prototype.getValueRamp",
{tq:a.Km.prototype.tq});a.Km.prototype.vg=function(b){if(this.n6[b])return this.n6[b];this.WI[b]||(this.rg||(this.rg=this.tq().slice()),this.WI[b]=this.rg[this.zV],this.zV++,this.zV==this.rg.length&&(this.zV=0));return this.WI[b]};a.f.j("AttributeGroupHandler.prototype.getValue",{vg:a.Km.prototype.vg});a.Km.prototype.Gwa=function(){var b=[],a;for(a in this.WI)b.push({category:a,value:this.WI[a]});return b};a.f.j("AttributeGroupHandler.prototype.getCategoryAssignments",{Gwa:a.Km.prototype.Gwa});a.Km.prototype.r9=
function(b,a){this.n6[b]=a};a.f.j("AttributeGroupHandler.prototype.addMatchRule",{r9:a.Km.prototype.r9});a.ZC=function(b){this.Init(b)};o_("ShapeAttributeGroupHandler",a.ZC,a);a.f.ua(a.ZC,a.Km,"oj.ShapeAttributeGroupHandler");a.ZC.XI="square circle diamond plus triangleDown triangleUp human".split(" ");a.ZC.prototype.tq=function(){return a.ZC.XI};a.f.j("ShapeAttributeGroupHandler.prototype.getValueRamp",{tq:a.ZC.prototype.tq});e.prototype.SXa=function(b,a,c,d){for(var e={};b&&-1<a.indexOf(c);){var f=
a.substring(0,a.indexOf(c));d&&void 0===b[f]&&(b[f]={});b=b[f];a=a.substring(a.indexOf(c)+1,a.length)}b&&(e.object=b,e.parameter=a);return e};e.prototype.ksa=function(b){void 0===this.VK&&(b=this.SXa(this.aYa,this.BVa,this.QLa,b),this.VK=b.object,this.I6=b.parameter)};e.prototype.vg=function(){this.ksa(!1);return void 0===this.VK?void 0:this.VK[this.I6]};e.prototype.hY=function(b,a){this.ksa(!0);if(a||!this.VK[this.I6])this.VK[this.I6]=b};a.Sd=function(b){this.XI=[];if(g(document.body).hasClass("oj-hicontrast"))this.XI=
a.Sd.Oea.slice();else{if(!a.Sd.OD){var c=a.Sd.G0();c&&(a.Sd.I0(c),c.remove())}this.XI=0<a.Sd.OD.length?a.Sd.OD.slice():a.Sd.Oea.slice()}this.Init(b)};o_("ColorAttributeGroupHandler",a.Sd,a);a.f.ua(a.Sd,a.Km,"oj.ColorAttributeGroupHandler");a.Sd.Oea="#237bb1 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");a.Sd.lga="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");
a.Sd.OD=null;a.Sd.prototype.tq=function(){return this.XI};a.f.j("ColorAttributeGroupHandler.prototype.getValueRamp",{tq:a.Sd.prototype.tq});a.Sd.q1a=function(){return a.Sd.G0()};o_("ColorAttributeGroupHandler.createAttrDiv",a.Sd.q1a,a);a.Sd.K5a=function(b){a.Sd.I0(b)};o_("ColorAttributeGroupHandler.processAttrDiv",a.Sd.K5a,a);a.Sd.G0=function(){if(a.Sd.OD)return null;var b=g(document.createElement("div"));b.attr("style","display:none;");b.attr("id","attrGps");g(document.body).append(b);for(var c=
0;c<a.Sd.lga.length;c++){var d=g(document.createElement("div"));d.addClass(a.Sd.lga[c]);b.append(d)}return b};a.Sd.I0=function(b){a.Sd.OD=[];b=b.children();for(var c=0;c<b.length;c++){var d=g(b[c]).css("color");d&&a.Sd.OD.push(d)}};var f={CSS_TEXT_PROPERTIES:function(b){var a={};b&&(b.hasClass("oj-gauge-metric-label")?(a["font-size"]=!0,a.color=!0):b.hasClass(b,"oj-chart-slice-label")?a.color=!0:b.hasClass("oj-treemap-node-header")&&(a["font-weight"]=!0));return f.jJa(b,a)},CSS_BACKGROUND_PROPERTIES:function(b){return f.bJa(b)},
mfa:"rgb(254, 0, 254)",VEa:"Times",WEa:"1px",ofa:"1",nfa:"normal",KEa:4,uF:{},Q1a:function(b,a){return b.css(a)},bJa:function(b){var a={};b.css("border-top-color")&&(a["border-color"]=b.css("border-top-color"));b.css("border-width")&&b.css("border-style")&&"none"!=b.css("border-style")&&(a["border-width"]=b.css("border-width"));b.css("background-color")&&(a["background-color"]=b.css("background-color"));return a},jJa:function(b,a){var c={},d=b.css("font-family");d&&d!==f.VEa&&(c["font-family"]=d.replace(/"/g,
"'"));d=b.css("font-size");!d||-1<d.indexOf("px")&&parseFloat(d)<f.KEa||a["font-size"]||(c["font-size"]=d);(d=b.css("font-weight"))&&d!==f.ofa&&!a["font-weight"]&&(c["font-weight"]=d);(d=b.css("color"))&&d!==f.mfa&&!a.color&&(c.color=d);(d=b.css("font-style"))&&d!==f.nfa&&(c["font-style"]=d);return c},N5a:function(b,c,d,e){for(var n=null,t=null,s="",p=0;p<d.length;p++)s=s+d[p]+" ";d={};var p={},q;for(q in e){var r=e[q];r instanceof Array||(r=[r]);var u=f.oSa(q,r);t||n||!u||(n=g(document.createElement("div")),
n.attr("style","display:none;"),b.append(n),n.attr("class",s),g(document.body).append(n),t=g(document.createElement("div")),t.css("font-size",f.WEa),t.css("color",f.mfa),t.css("font-weight",f.ofa),t.css("font-style",f.nfa),n.append(t));d[q]=r;u&&(p[q]=f.uLa(t,q,r))}b=a.Sd.G0();for(q in e)f.dWa(p[q],c,q,d[q]);b&&(a.Sd.I0(b),b.remove());n&&n.remove()},uLa:function(b,a,c){f.uF[a]||(f.uF[a]={});for(var d=null,e=0;e<c.length;e++){var t=c[e].property;t&&"undefined"==typeof f.uF[a][t]&&!d&&(d=g(document.createElement("div")),
d.addClass(a),b.append(d))}return d},dWa:function(b,a,c,d){for(var g=0;g<d.length;g++){var t=d[g],s=t.property;if(s){var p=f.uF[c][s];"undefined"==typeof p&&b&&(p=f.TXa(b,s),f.uF[c][s]=p);if(null!=p){t=new e(a,t.path);s=f[s];if(null!=s){var q=t.vg(),r="";if(null!=q){var q=f.JPa(q),u;for(u in p)-1===q.indexOf(u)&&(r+=u+":"+p[u]+";");r+=q}else for(u in p)r+=u+":"+p[u]+";";p=r}t.hY(p,null!=s)}}}},JPa:function(b){if(b instanceof Object){var a="",c;for(c in b)var d=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),
a=a+(d+":"+b[c]+";");return a}return null!=b&&"string"==typeof b?b:""},TXa:function(b,a){var c=f[a],c=c?c(b):f.Q1a(b,a);return null==c||"string"==typeof c&&""==c.replace(/^\s+/g,"")?null:c},oSa:function(b,a){var c=f.uF[b];if(!c)return!0;for(var d=0;d<a.length;d++){var e=a[d].property;if(e&&"undefined"==typeof c[e])return!0}return!1}};a.ib("oj.dvtBaseComponent",g.oj.baseComponent,{rc:function(){this._super();this.ox=this.p7=0;this.Cu=null;this.Pu={};for(var b=this.ih(),c=0;c<b.length;c++)this.element.addClass(b[c]);
this.iU=g(document.createElement("div"));this.iU.attr("style","visibility:hidden;");this.element.append(this.iU);this.mg=(b=this.element[0].parentElement)&&b.EJ?b.EJ:new d.Context(this.element[0],null,this.iU[0]);this.mg.oj=a;this.mg.setReadingDirection(this.Wc());this.mg.setTooltipAttachedCallback(a.Components.nd);this.mg.setOverlayAttachedCallback(a.Components.nd);this.mg.setTooltipStyleClass("oj-dvt-tooltip");this.mg.setDatatipStyleClass("oj-dvt-datatip");this.mg.setFixContextCallback(this.Sk.bind(this));
this.mg.setCustomElement(this.$());g(document.body).hasClass("oj-hicontrast")&&d.Agent.setHighContrast(!0);this.La=this.ji(this.mg,this.fo,this);this.mg.getStage().addChild(this.La);!1!==d.requireJS&&(this.VYa(),this.gra());this.wp();this.options._environment="jet";this.options._widgetConstructor=a.Components.qd(this.element)},Pf:function(){this._super();"off"!=this.options.trackResize&&this.M0();this.kr();this.ni()},refresh:function(){this._super();this.mg.setReadingDirection(this.Wc());this.gra();
this.ni()},getNodeBySubId:function(b){var a=this.La&&this.La.getAutomation?this.La.getAutomation():null;return a?(b=this.Xm(b),a.getDomElementForSubId(b)):null},getSubIdByNode:function(b){var a=this.La&&this.La.getAutomation?this.La.getAutomation():null;return a?(b=a.getSubIdForDomElement(b))?this.Jj(b):null:null},Xm:function(){return null},Jj:function(){return null},$P:function(){f.N5a(this.element,this.options,this.ih(),this.Ql())},ih:function(){return["oj-dvtbase"]},Ql:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",
property:"CSS_TEXT_PROPERTIES"}}},bn:function(){return[]},Tk:function(){var b=this.options.translations,b={"DvtUtilBundle.CLEAR_SELECTION":b.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":b.labelAndValue,"DvtUtilBundle.INVALID_DATA":b.labelInvalidData,"DvtUtilBundle.NO_DATA":b.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":b.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":b.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":b.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":b.stateMaximized,
"DvtUtilBundle.STATE_MINIMIZED":b.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":b.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":b.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":b.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":b.stateHidden,"DvtUtilBundle.STATE_VISIBLE":b.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":b.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":b.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":b.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":b.labelScalingSuffixTrillion,
"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":b.labelScalingSuffixQuadrillion},c=a.ub.bN("abbreviated");b["DvtUtilBundle.MONTH_SHORT_JANUARY"]=c[0];b["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=c[1];b["DvtUtilBundle.MONTH_SHORT_MARCH"]=c[2];b["DvtUtilBundle.MONTH_SHORT_APRIL"]=c[3];b["DvtUtilBundle.MONTH_SHORT_MAY"]=c[4];b["DvtUtilBundle.MONTH_SHORT_JUNE"]=c[5];b["DvtUtilBundle.MONTH_SHORT_JULY"]=c[6];b["DvtUtilBundle.MONTH_SHORT_AUGUST"]=c[7];b["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=c[8];b["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=
c[9];b["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=c[10];b["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=c[11];return b},gra:function(){var b=this.Tk();d.Bundle.addLocalizedStrings(b)},VYa:function(){var b={};b.numberConverterFactory=a.Oa.Pwa("number");b.dateToIsoConverter=function(b){return b instanceof Date?a.Wa.Me(b):b};b.isoToDateConverter=function(b){if("string"==typeof b){var c=a.Wa.hX(b);b=c.toJSON()?a.Wa.Me(c):b;return a.Wa.ov(b)}return b};b.dateToIsoWithTimeZoneConverter=function(b){if(b instanceof Date){var c=
-1*b.getTimezoneOffset(),d=Math.floor(Math.abs(c)/60),e=Math.abs(c)%60,c=(0<=c?"+":"-")+(2!==d.toString().length?"0"+d:d)+":"+(2!==e.toString().length?e+"0":e);return a.Wa.Me(b)+c}return b};this.mg.setLocaleHelpers(b)},_destroy:function(){this.mg.hideTooltips();this.mg=null;var b=this.element[0].parentElement;b&&b.EJ&&(b.EJ=null);this.La.destroy&&this.La.destroy();this.La=null;this.m7();this.Hea();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");
for(var b=this.ih(),a=0;a<b.length;a++)this.element.removeClass(b[a]);this.gr();this._super()},_setOptions:function(b,a){this._superApply(arguments);var c=this.options.trackResize;"off"==c&&this.ak?this.m7():"off"==c||this.ak||this.M0();this.kr();if(!this.Tha){var d=!1,e=this.bn(),f=["highlightedCategories","selection","dataCursorPosition"];g.each(b,function(b){if(0>e.indexOf(b)&&0>f.indexOf(b))return d=!0,!1});d?this.ni():(void 0!==b.highlightedCategories&&this.La.highlight(b.highlightedCategories),
void 0!==b.selection&&this.La.select(b.selection),void 0!==b.dataCursorPosition&&this.La.positionDataCursor&&this.La.positionDataCursor(b.dataCursorPosition))}},ji:function(){return null},fo:function(b){var a=b.type;"selection"===a?this.rf("selection",b.selection):"categoryHide"===a||"categoryShow"===a?this.rf("hiddenCategories",b.hiddenCategories):"categoryHighlight"===a?this.rf("highlightedCategories",b.categories):"optionChange"===a?this.rf(b.key,b.value,b.optionMetadata):"touchHoldRelease"===
a&&this.co()?this.mi(g.Event(b.nativeEvent),"touch"):"ready"===a&&0===this.ox&&this.gr()},M0:function(){this.ak||(this.ak=this.Ph.bind(this),a.Q.sm(this.element[0],this.ak,250))},m7:function(){this.ak&&(a.Q.Hm(this.element[0],this.ak),this.ak=null)},Ph:function(){var b=this.element.width(),a=this.element.height();(null==this.BV||null==this.cT||5<=Math.abs(b-this.BV)+Math.abs(a-this.cT))&&this.ni(!0)},wp:function(){},ni:function(b){this.mg.hideTooltips();this.sD();this.mg.isReadyToRender()?(this.BV=
this.NP()?null:this.element.width(),this.cT=this.NP()?null:this.element.height(),this.mg.setDefaultFontFamily(this.iU.css("font-family")),this.options._width=this.BV,this.options._height=this.cT,this.options._locale=a.ra.qk(),this.options.dnd&&this.element.attr("draggable",!0),this.$P(),this.p7++,b?0===this.ox&&this.uI(this.Cu,b):this.QXa()&&this.uI(this.Cu),this.r7=!1):(this.r7=!0,this.gr())},hr:function(){this._super();this.xqa()},io:function(){this._super();this.xqa()},Ih:function(){this._super();
this.wqa()},yp:function(){this._super();this.wqa()},xqa:function(){this.r7&&this.ni()},wqa:function(){this.mg.hideTooltips();this.gr()},rf:function(b,a,c){this.Tha=!0;this.option(b,a,{_context:{Rc:!0,Ly:c,Sa:!0}});this.Tha=!1},li:function(b,a,c){if("touch"!==c)if("keyboard"===c){b=this.element[0].getBoundingClientRect();var d=this.La.getKeyboardFocus()?this.La.getKeyboardFocus().getBoundingClientRect():null;this.mi(a,c,{position:{at:d?"left+"+(d.left+.5*d.width-b.left)+" top+"+(d.top+.5*d.height-
b.top):"center"}})}else this._super(b,a,c)},hI:function(b){return(b=a.Components.qd(b)("instance"))?b.La:null},oD:function(b){for(var a="",c=0;c<b.length;c++)a+="["+b[c]+"]";return a},Zq:function(b){for(var a=[],c=0;0<b.indexOf("[",c);){var d=b.indexOf("[",c)+1,c=b.indexOf("]",c);a.push(Number(b.substring(d,c)));c+=1}return a},cn:function(b){return Number(this.JP(b))},JP:function(b){var a=b.indexOf("[")+1,c=b.indexOf("]");return b.substring(a,c)},an:function(){return{}},fI:function(){if(!this.w6){this.w6=
{};var b=this,a=this.an().root;a&&a.forEach(function(a){b.w6[a]=!0})}return this.w6},QXa:function(){this.Cu=d.JsonUtils.clone(this.options,null,this.fI());this.LEa(this.Cu);this.ox=0;var b=this,a=this.an(),c;for(c in a)a[c].forEach(function(a){if("root"===c)b.y7.bind(b)(b.options,b.Cu,a);else{var d=b.options[c];if(d&&d instanceof Array)for(var e=0;e<d.length;e++)b.y7.bind(b)(d[e],b.Cu[c][e],a);else d&&d[a]&&b.y7.bind(b)(d,b.Cu[c],a)}});return 0===this.ox},y7:function(b,c,d){var f=new e(b,d),g=f.vg();
g instanceof Function?g=Promise.resolve(g(this.gfa(b))):this.$()&&Array.isArray(g)&&(g=Promise.resolve(g),f.hY(g,!0));g&&a.Pq.AG(g)&&(g=new Promise(function(b){g.fetchFirst({size:-1})[Symbol.asyncIterator]().next().then(function(a){b(a.value.data)})}));if(g instanceof Promise){var t=this.p7,s=this;g.then(function(b){s.Vra(t,c,d,b)},function(){s.Vra(t,c,d,[])});this.ox++}},Vra:function(b,a,c,d){b===this.p7&&(this.ox--,(new e(a,c)).hY(d,!0),0===this.ox&&(this.uI(this.Cu),this.Cu=null))},uI:function(b,
a){if(this.mg.isReadyToRender()){this.Hea();var c=this.NP()&&this.ak;c&&this.m7();this.La.render(a?null:b,this.BV,this.cT);c&&this.M0();this.element.attr("role")?this.element.attr("tabindex",0):this.element.attr("tabindex",null)}else this.r7=!0,this.gr()},gfa:function(){return{}},NP:function(){return!1},whenReady:function(){if(this.zL)return Promise.resolve(!0);if(!this.dU){var b=this;this.dU=new Promise(function(a){b.V6=a})}return this.dU},sD:function(){this.zL=!1;if(0===this.ox&&!this.pg){var b=
a.Context.getContext(this.element[0]).Dc(),c={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this.pg=b.Xc(c)}},gr:function(){this.V6&&(this.V6(!0),this.V6=null);this.zL=!0;this.dU=null;this.pg&&(this.pg(),this.pg=null)},kr:function(){var b=this.options.tooltip;"function"===typeof b?this.options.tooltip={renderer:b}:b&&b._renderer&&(this.options.tooltip={renderer:this.jI(b._renderer,"tooltip")})},Rl:function(b){var a=this;return function(c){c._dvtcontext=
a.mg;var d=b(c);c._templateName&&c._templateCleanup&&a.VZ(c._templateName,c._templateCleanup);return d&&!0!==d.preventDefault&&d.insert?(c=d.insert,c.classList&&c.classList.contains("oj-dvtbase")?a.hI(c):c):null}},LEa:function(b){if(this.$())for(var a=this.At(),c=0;c<a.length;c++){var d=new e(b,a[c]),f=d.vg();f&&d.hY(this.Rl(f),!0)}},At:function(){return["tooltip/renderer"]},jI:function(b,a){var c=this;return function(d){var e=document.createElement("div");e.style.display="none";b({parentElement:e,
context:d});return(d=e.children[0])?(c.VZ(a,function(){g(e).remove()}),e.removeChild(d),g(e).remove(),d):null}},r_:function(b,a){var c=this;return function(d){var e=document.createElement("div");e.style.display="none";e.EJ=c.mg;c.element.append(e);b({parentElement:e,data:d.data});return(d=e.children[0])?(c.VZ(a,function(){g(e).remove()}),"http://www.w3.org/2000/svg"===d.namespaceURI?(e.removeChild(d),g(e).remove(),d):c.hI(d)):null}},Hea:function(){for(var b in this.Pu)this.h_(b);this.Pu={}},h_:function(b){if(this.Pu[b]){for(var a=
this.Pu[b].length,c=0;c<a;c++)this.Pu[b][c]();this.Pu[b]=[]}},VZ:function(b,a){this.Pu[b]||(this.Pu[b]=[]);this.Pu[b].push(a)},Pl:function(b,c,d){switch(b){case "hiddenCategories":case "highlightedCategories":case "selection":return a.f.Bb(c,d);default:return this._super(b,c,d)}}},!0);(function(){var b=/\d/,c={circle:!0,ellipse:!0,square:!0,rectangle:!0,diamond:!0,triangleUp:!0,triangleDown:!0,plus:!0,human:!0,star:!0};a.J.Ua("dvtBaseComponent","baseComponent",{properties:{trackResize:{type:"string"},
translations:{properties:{labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},
stateVisible:{type:"string"}}}},methods:{},extension:{Ya:"dvtBaseComponent",lD:function(a,d){var e=d||c;return function(c,f,g,k){if(a[f]){if(b.test(c)||e[c])return c;throw Error("Found: '"+c+"'. Expected one of the following: "+Object.keys(d).toString());}return k(c)}}}})})()});