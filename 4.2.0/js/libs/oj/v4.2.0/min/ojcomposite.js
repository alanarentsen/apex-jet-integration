/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","promise","ojs/ojcustomelement","ojs/ojcomposite-knockout"],function(a){a.Ac={};a.Ac.Lf=Object.create(a.Y.Lf);a.tc.Md(a.Ac.Lf,{sO:function(g){g.setProperty=function(c,b){var d=a.fc.mq(c),e=a.Y.Xa(this),f=a.Y.Vk(c,a.Y.sj(e));d||!f?this[c]=b:(d=this.getProperty(c),e.QZ(e.Rq.bind(e),this,c,b,this),e.xD&&-1!==c.indexOf(".")&&a.Ac.Z2(this,c,b,d,"external"))};g.getProperty=function(c){var b=a.fc.mq(c),d=a.Y.Xa(this),d=a.Y.Vk(c,a.Y.sj(d));return b||!d||-1===c.indexOf(".")?this[c]:a.Y.AQ(this,
c)};g._propsProto.setProperty=function(c,b){if(a.Y.Vk(c,a.Y.sj(this.zf))){var d=this.getProperty(c);a.Y.BQ(this.zf.Rq.bind(this.zf),this,c,b);-1!==c.indexOf(".")&&a.Ac.Z2(this.vp,c,b,d,"internal")}else this.vp[c]=b};g._propsProto.getProperty=function(c){return a.Y.Vk(c,a.Y.sj(this.zf))&&-1!==c.indexOf(".")?a.Y.AQ(this,c):this[c]};g.getNodeBySubId=function(c){var b=a.Y.Xa(this);return b.Mz.getNodeBySubId?b.Mz.getNodeBySubId(c,b.Fma.bind(this)):b.Fma.bind(this)(c)};g.getSubIdByNode=function(c){var b=
a.Y.Xa(this);return b.Mz.getSubIdByNode?b.Mz.getSubIdByNode(c,b.fna.bind(this)):b.fna.bind(this)(c)}},xO:function(g){if(this.Et){var c=this;this.MDa=this.Et.then(function(b){return a.fg.nv(b,"activatedMethod",[c.EI])})}this.$_.bH(this.kg);var b={},d=a.fg.x1a(g),e;for(e in d)b[e]=d[e].length;this.MGa=d;this.jga.bH(b);c=this;Promise.all([this.Nga,this.Et,this.$_.rq(),this.fEa,this.MDa]).then(function(d){d=d[0];if(!d)throw c.Dk(),"ojComposite is missing a View";var e={props:c.kg,b7a:c.MGa,c7a:b,unique:c.EI.unique,
uniqueId:c.EI.uniqueId,et:c.Mz,hca:c.EI};Object.defineProperty(g,a.Te.Oga,{value:"knockout"});a.Components&&a.Components.$ba(g);a.fg.m6a(e,g,d);c.xD=!0;c.Dk();a.Ac.hA("ready",g)})},AO:function(g,c,b){g[c]=function(){var d=b.internalName||c,e=a.Y.Xa(this);return e.Mz[d].apply(e.Mz,arguments)}},BO:function(g,c,b){function d(d){var e=a.Ac.Sma(this.zf,c);d=d?e.peek():e();void 0===d&&(d=b.value,Array.isArray(d)?d=d.slice():"object"===typeof d&&(d=a.tc.Md({},d,void 0,!0)),e(d));return d}function e(b){f.bind(this)(b,
!1)}function f(d,e){var f=a.Ac.Sma(this.zf,c),g=f.peek();g!==d&&(e&&(d=this.zf.cD(this.vp,c,d)),b.cE&&this.zf.IZ(this.vp,c,d),f(d),!b.yJ&&(!e||e&&this.zf.xD)&&a.Ac.Z2(this.vp,c,d,g,e?"external":"internal"))}b.yJ||a.Y.xQ(g._propsProto,c,function(){return d.bind(this,!1)()},e);a.Y.xQ(g,c,function(){var b=a.Y.Xa(this);return d.bind(b.kg,!0)()},function(b){var c=a.Y.Xa(this);f.bind(c.kg)(b,!0)})},yH:function(a){return a._metadata},Zca:function(g){this.Et&&this.Et.then(function(c){a.fg.nv(c,"disposeMethod",
[g])})},AH:function(g){a.Y.Lf.AH.call(this,g);this.Et&&this.Et.then(function(c){a.fg.nv(c,"detachedMethod",[g]);a.fg.nv(c,"disconnected",[g])})},CH:function(g){a.Y.Lf.CH.call(this,g);if(this.Et){var c=this;this.Et.then(function(b){a.fg.nv(b,"connected",[c.EI])})}},iz:function(g){a.Y.Lf.iz.call(this,g);a.Ac.hA("pending",g);var c=a.Y.zQ(g.tagName);a.Components&&a.Components.Zaa(g);this.bP=c.parseFunction;g._propsProto&&(this.kg=Object.create(g._propsProto),this.kg.zf=this,this.kg.vp=g);this.$_=new a.Y.yQ;
this.jga=new a.Y.yQ;var b={element:g,props:this.$_.rq(),slotNodeCounts:this.jga.rq(),unique:a.Y.Sga()};b.uniqueId=g.id?g.id:b.unique;this.EI=b;var d=a.Ac.AS(c,"viewModel",this);if(d){var e=this;this.Et=d.then(function(c){c="function"===typeof c?new c(b):a.fg.nv(c,"initializeMethod",[b])||c;return e.Mz=c})}var f=a.Y.kHa(g.tagName);if(f.view)this.Nga=Promise.resolve(a.Ac.v3(f.view,g));else if(d=a.Ac.AS(c,"view",this))this.Nga=d.then(function(b){f.view||("string"===typeof b&&(b=a.Ac.v3(b,g)),f.view=
b);return a.Ac.v3(f.view,g)});!f.css&&(c=a.Ac.AS(c,"css",this))&&(f.css=c.then(function(b){if(b){var a=document.createElement("style");a.type="text/css";a.styleSheet?a.styleSheet.cssText=b:a.appendChild(document.createTextNode(b));document.head.appendChild(a)}}));this.fEa=f.css;a.Y.E0(g,this.kg,this.bP);this.LO().bH()},pZ:function(a){Object.defineProperty(a,"_propsProto",{value:{}})},Fma:function(g){var c=a.Ac.mHa(this)[g.subId];return c?c.alias?(g=a.tc.Md({},g,void 0,!0),g.subId=c.alias,c=c.node,
c.getNodeBySubId?c.getNodeBySubId(g):a.Components.qd(c)("getNodeBySubId",g)):c.node:null},fna:function(g){if(!this.contains(g))return null;var c=a.Ac.lHa(this),b=a.Te.Lwa(g,this);if(null!=b){var d=b.Rn.getAttribute("data-oj-subid-map");return(c=c[d])&&b.getSubIdByNode&&(g=b.getSubIdByNode(g))?(g.subId=c.map[g.subId],g):null}for(b=g;b!==this&&!(d=b.getAttribute("data-oj-subid-map")||b.getAttribute("data-oj-subid"));)b=b.parentNode;if(c=c[d])if(c.map){if(d=c.node,g=d.getSubIdByNode?d.getSubIdByNode(g):
a.Components.qd(d)("getSubIdByNode",g))return g.subId=c.map[g.subId],g}else return{subId:d};return null}});a.Ac.register=function(g,c){a.Y.Vga(g,c,a.Ac.Lf,!0)&&a.Ac.getMetadata(g).then(function(b){var d=b.name;d?g!=d&&a.D.warn("Registered property tagName: %s does not match name: %s provided in metadata.",g,d):a.D.warn('Required property "name" missing from metadata for %s.',g);b.version||a.D.warn('Required property "version" missing from metadata for %s.',g);b.jetVersion||a.D.warn('Required composite "jetVersion" missing from metadata for %s.',
g);c._metadata=a.Y.Uga(b,!1);customElements.define(g.toLowerCase(),a.Ac.Lf.WM(c))})};a.Ac.getMetadata=function(g){var c=a.Y.zQ(g);if(c){var b=c._metadataPromise;b||(b=a.Ac.AS(c,"metadata",null),b||(a.D.warn("Required metadata is missing for "+g),b=Promise.resolve({})),c._metadataPromise=b);return b}return null};a.Ac.hA=function(a,c){c.dispatchEvent(new CustomEvent(a,{bubbles:!0}))};a.Ac.Z2=function(a,c,b,d,e){var f={},h=c.split("."),k=c,l=b,m=d;1<h.length&&(k={},k.path=c,k.value=b,k.previousValue=
d,f.subproperty=k,k=h[0],m=l=a[k]);f.value=l;f.previousValue=m;f.updatedFrom=e;a.dispatchEvent(new CustomEvent(k+"-changed",{detail:f}));a.dispatchEvent(new CustomEvent(k+"Changed",{detail:f}))};a.Ac.v3=function(g,c){if("string"===typeof g){var b=document.createElement("div");b.innerHTML=g;for(var d=[],e=0;e<b.childNodes.length;e++)d.push(b.childNodes[e]);return d}if(a.Ac.tTa(g)){b=g.cloneNode(!0);d=[];for(e=0;e<b.childNodes.length;e++)d.push(b.childNodes[e]);return d}if(Array.isArray(g)){b=[];for(e=
0;e<g.length;e++)b.push(g[e].cloneNode(!0));return b}a.Y.Xa(c).Dk();throw"The View ("+g+") has an unsupported type";};a.Ac.gla=function(g,c){if(!g.mga){for(var b={},d={},e=c.children,f=0;f<e.length;f++)a.Ac.cva(b,d,e[f]);g.RFa=d;g.mga=b}};a.Ac.cva=function(g,c,b){if(!b.hasAttribute("slot")&&(a.Ac.aIa(g,c,b),!a.Y.QB(b.tagName)&&!a.Components.qd(b))){b=b.children;for(var d=0;d<b.length;d++)a.Ac.cva(g,c,b[d])}};a.Ac.aIa=function(a,c,b){var d=b.getAttribute("data-oj-subid"),e=b.getAttribute("data-oj-subid-map");
if(e){if(d=JSON.parse(e),"object"===typeof d&&!(d instanceof Array)){var f={},h;for(h in d)a[h]={alias:d[h],node:b},f[d[h]]=h;c[e]={map:f,node:b}}}else d&&(a[d]={node:b},c[d]={node:b})};a.Ac.mHa=function(g){var c=a.Y.Xa(g);a.Ac.gla(c,g);return c.mga};a.Ac.lHa=function(g){var c=a.Y.Xa(g);a.Ac.gla(c,g);return c.RFa};a.Ac.Sma=function(g,c){g.oQ||(g.oQ={});g.oQ[c]||(g.oQ[c]=a.fg.N1a());return g.oQ[c]};a.Ac.AS=function(a,c,b){var d=null;a=a[c];if(null!=a)if(a.hasOwnProperty("inline"))d=Promise.resolve(a.inline);
else if(a.hasOwnProperty("promise"))d=a.promise;else throw b&&b.Dk(),"Invalid descriptor key '"+Object.keys(a)[0]+"' for the resource type: "+c;return d};a.Ac.tTa=function(a){return window.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType};a.Te={};a.Te.Nd={initializeMethod:"initialize",activatedMethod:"activated",attachedMethod:"attached",bindingsAppliedMethod:"bindingsApplied",detachedMethod:"detached",disposeMethod:"dispose"};o_("Composite.defaults",a.Te.Nd,a);a.Te.getMetadata=function(g){return a.Ac.getMetadata(g)};
o_("Composite.getMetadata",a.Te.getMetadata,a);a.Te.register=function(g,c){a.Ac.register(g,c)};o_("Composite.register",a.Te.register,a);a.Te.Lwa=function(g,c){for(var b=null;g;)if(g=a.fg.H2a(g)){if(c&&!(g.compareDocumentPosition(c)&16))break;b=g}return b};a.Te.u2a=function(g){return g?g[a.Te.Oga]:null};a.Te.Pga="__oj_composite";a.Te.Oga="__oj_binding_prvdr"});