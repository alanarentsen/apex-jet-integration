/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","knockout","ojs/ojdatasource-common"],function(a,g,c){a.fd=function(a){this.data=a;this.current=0;this.Init();this.Y7(10)};o_("ArrayPagingDataSource",a.fd,a);a.f.ua(a.fd,a.Wn,"oj.ArrayPagingDataSource");a.fd.prototype.Init=function(){a.fd.N.Init.call(this)};a.f.j("ArrayPagingDataSource.prototype.Init",{Init:a.fd.prototype.Init});a.fd.prototype.l4=function(){return this.fm()?this.$u:this.totalSize()-this.current};a.fd.prototype.$A=function(a){a=a||{};this.mk=Array(this.l4());
for(var c=0;c<this.mk.length;c++)this.mk[c]=this.data[this.current+c];this.DL();this.sn=this.oa+this.mk.length-1;a.silent||this.handleEvent("sync",{data:this.mk,startIndex:this.current})};a.fd.prototype.DL=function(){if(void 0!==this.Fq){this.Fq.removeAll();for(var a=0;a<this.mk.length;a++)this.Fq.push(this.mk[a])}};a.fd.prototype.handleEvent=function(b,c){return a.fd.N.handleEvent.call(this,b,c)};a.fd.prototype.mv=function(){return this.mk};a.f.j("ArrayPagingDataSource.prototype.getWindow",{mv:a.fd.prototype.mv});
a.fd.prototype.kN=function(){void 0===this.Fq&&(this.Fq=c.observableArray(),this.DL());return this.Fq};a.f.j("ArrayPagingDataSource.prototype.getWindowObservable",{kN:a.fd.prototype.kN});a.fd.prototype.getPage=function(){return this.ef};a.f.j("ArrayPagingDataSource.prototype.getPage",{getPage:a.fd.prototype.getPage});a.fd.prototype.setPage=function(b,c){c=c||{};b=parseInt(b,10);try{a.fd.N.handleEvent.call(this,a.hi.ga.BEFOREPAGE,{page:b,previousPage:this.ef})}catch(e){return Promise.reject(null)}this.pageSize=
null!=c.pageSize?c.pageSize:this.pageSize;c.startIndex=b*this.pageSize;var f=this.ef;this.ef=b;this.oa=c.startIndex;var g=this;return new Promise(function(b,e){g.si(c).then(function(){a.fd.N.handleEvent.call(g,a.hi.ga.PAGE,{page:g.ef,previousPage:f});b(null)},function(){g.ef=f;g.oa=g.ef*g.pageSize;e(null)})})};a.f.j("ArrayPagingDataSource.prototype.setPage",{setPage:a.fd.prototype.setPage});a.fd.prototype.getStartItemIndex=function(){return this.oa};a.f.j("ArrayPagingDataSource.prototype.getStartItemIndex",
{getStartItemIndex:a.fd.prototype.getStartItemIndex});a.fd.prototype.getEndItemIndex=function(){return this.sn};a.f.j("ArrayPagingDataSource.prototype.getEndItemIndex",{getEndItemIndex:a.fd.prototype.getEndItemIndex});a.fd.prototype.getPageCount=function(){var a=this.totalSize();return-1==a?-1:Math.ceil(a/this.pageSize)};a.f.j("ArrayPagingDataSource.prototype.getPageCount",{getPageCount:a.fd.prototype.getPageCount});a.fd.prototype.fetch=function(a){a=a||{};if(void 0!==a.pageSize&&void 0!==a.startIndex){if(!this.fm())return Promise.resolve();
this.$u=a.startIndex+a.pageSize}this.$A(null);return Promise.resolve()};a.f.j("ArrayPagingDataSource.prototype.fetch",{fetch:a.fd.prototype.fetch});a.fd.prototype.si=function(a){var c=a||{};void 0!==c.startIndex&&(this.current=c.startIndex);void 0!==c.pageSize&&(this.$u=this.pageSize=c.pageSize);this.$A(a);return Promise.resolve({data:this.mk,startIndex:this.current})};a.fd.prototype.fm=function(){return this.current+this.$u<this.totalSize()};a.fd.prototype.Y7=function(a){this.$u=this.pageSize=a;
this.$A(null)};a.fd.prototype.totalSize=function(){return this.data.length};a.fd.prototype.totalSizeConfidence=function(){return"actual"};a.f.j("ArrayPagingDataSource.prototype.totalSizeConfidence",{totalSizeConfidence:a.fd.prototype.totalSizeConfidence});a.fd.prototype.getCapability=function(){return null};a.f.j("ArrayPagingDataSource.prototype.getCapability",{getCapability:a.fd.prototype.getCapability})});