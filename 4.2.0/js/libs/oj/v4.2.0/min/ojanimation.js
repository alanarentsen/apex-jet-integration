/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","promise","ojs/ojcomponentcore"],function(a,g){a.ca={};o_("AnimationUtils",a.ca,a);a.ca.gK=function(c,b){if(!a.ca.s6){a.ca.s6={};var d=a.ca.s6,e=c.style;d.backfaceVisibility=void 0!==e.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility";d.transform=void 0!==e.webkitTransform?"webkitTransform":"transform";d.transformOrigin=void 0!==e.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin";d.transition=void 0!==e.webkitTransition?"webkitTransition":
"transition";d.transitionend=void 0!==e.webkitTransition?"webkitTransitionEnd":"transitionend"}return(d=a.ca.s6[b])?d:b};a.ca.y3=function(c,b){return c.style[a.ca.gK(c,b)]};a.ca.Vsa=function(c,b,d){c.style[a.ca.gK(c,b)]=d};a.ca.Qz=function(c,b,d,e,f,h){function k(g){function k(){q||(p&&(window.cancelAnimationFrame(p),p=0),c.removeEventListener(a.ca.gK(c,"transitionend"),t),g&&g(!0),q=!0)}function t(b){b=0==b.propertyName.indexOf("-webkit-")?b.propertyName.substr(8):b.propertyName;b=a.ca.QNa(b);b=
l.indexOf(b);-1<b&&(1<l.length?l.splice(b,1):k())}function s(){p=0;a.ca.Iha(c,d,1<r)}var p=0,q=!1;null==d&&(d={});null==d.css&&(d.css={});d.css.transition=a.ca.zLa(c,f,e);var r=a.ca.usa(c,b,d,e,h||f);a.ca.Iha(c,b,1<r);c.addEventListener(a.ca.gK(c,"transitionend"),t);var u=e.duration,w=e.delay,v=e._skipPromise;null==b?s():(e._noReflow||(a.ca.E9a=c.offsetWidth),p=window.requestAnimationFrame(s));u=a.ca.qna(u,w);v||setTimeout(k,u+100)}var l=[].concat(f);return e._skipPromise?(k(null),null):(new Promise(k)).then(function(){b&&
b.addClass&&g(c).removeClass(b.addClass);d&&d.addClass&&g(c).removeClass(d.addClass);a.ca.osa(c)})};a.ca.rsa=function(c,b,d,e){for(var f in b)d.hasOwnProperty(f)||e&&-1!=e.indexOf(f)||(d[f]=a.ca.y3(c,f))};a.ca.usa=function(c,b,d,e,f){var g=c.B6||{};b=b&&b.css?b.css:{};d=d&&d.css?d.css:{};e&&"all"===e.persist||(f=null);a.ca.rsa(c,b,g,f);a.ca.rsa(c,d,g,f);c.B6=g;e=c.VT||0;c.VT=++e;return e};a.ca.osa=function(c){var b=c.VT;if(1<b)c.VT=b-1;else if(b=c.B6){for(var d in b)a.ca.Vsa(c,d,b[d]);delete c.B6;
delete c.VT}};a.ca.QNa=function(a){if(0<=a.indexOf("-")){var b="";a=a.split("-");for(var d=0;d<a.length;d++){var e=a[d];e&&(b=b?b+(e.charAt(0).toUpperCase()+e.slice(1)):e)}return b}return a};a.ca.DOa=function(a){a=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();0==a.indexOf("webkit")&&(a="-"+a);return a};a.ca.rKa=function(c,b){if(b.css.transition){var d=a.ca.y3(c,"transition");d&&0!=d.indexOf("all")&&(b.css.transition=d+", "+b.css.transition)}};a.ca.Wta=function(a){var b=[];if(a&&"none"!=a)for(var d;0<
(d=a.indexOf(")"));)b.push(a.substr(0,d+1).trim()),a=a.slice(d+1);return b};a.ca.PPa=function(a){var b=a.indexOf("(");return 1<=b?a.substr(0,b):a};a.ca.IIa=function(c,b){for(var d=a.ca.y3(c,"transform"),d=a.ca.Wta(d),e=a.ca.Wta(b),f=[],g=0;g<e.length;g++){var k=a.ca.PPa(e[g]),l=!1;if(k)for(var m=0;m<d.length;m++)0==d[m].indexOf(k+"(")&&(d[m]=e[g],l=!0);l||f.push(e[g])}d=d.concat(f);return d.join(" ")};a.ca.Iha=function(c,b,d){if(b){if(b.css){d&&a.ca.rKa(c,b);b.css.transform&&(b.css.transform=a.ca.IIa(c,
b.css.transform));d=b.css;for(var e in d)a.ca.Vsa(c,e,d[e])}b.addClass&&g(c).addClass(b.addClass);b.removeClass&&g(c).removeClass(b.removeClass)}};a.ca.pna=function(a){var b=parseFloat(a);return isNaN(b)?0:-1<a.indexOf("ms")?b:1E3*b};a.ca.qna=function(c,b){var d=a.ca.pna(c);if(0<d){var e=b?a.ca.pna(b):0;return d+e}return 0};a.ca.jia=function(c,b,d){b=b.split(",");d=d.split(",");c=c.split(",").length;for(var e=b.length,f=d.length,g=0,k=0;k<c;k++)var l=a.ca.qna(d[k%f],b[k%e]),g=Math.max(g,l);return g};
a.ca.u1=function(c){var b=window.getComputedStyle(c),d,e,f;d=b.animationName||b.webkitAnimationName;e=b.animationDelay||b.webkitAnimationDelay;f=b.animationDuration||b.webkitAnimationDuration;c=a.ca.jia(d,e,f);d=b.transitionProperty||b.webkitTransitionProperty;e=b.transitionDelay||b.webkitTransitionDelay;f=b.transitionDuration||b.webkitTransitionDuration;b=a.ca.jia(d,e,f);return Math.max(c,b)};a.ca.dNa=function(a,b){a.delay=a.delay||b.delay;a.duration=a.duration||b.duration;a.timingFunction=a.timingFunction||
b.timingFunction;a.persist=a.persist||b.persist};a.ca.Fua=function(a,b,d,e){e&&e._trigger?a=!e._trigger(b,null,d):(b=new CustomEvent("oj"+b.substr(0,1).toUpperCase()+b.substr(1),{detail:d,bubbles:!0,cancelable:!0}),a=e||a,a.dispatchEvent&&a.dispatchEvent(b),a=b.defaultPrevented);return a};a.ca.Li=function(c,b,d,e){c=g(c)[0];return new Promise(function(f){function h(){p=!0;l()}function k(){s=!0;l()}function l(){s&&p&&(m.removeClass(n),m.removeClass(t),a.ca.osa(c),f(!0),a.ca.Fua(c,"animateEnd",{action:b,
element:c},e))}var m=g(c),n="oj-animate-"+b,t=n+"-active",s=!1,p=!1;a.ca.usa(c,null,null,null,null);if(!a.ca.Fua(c,"animateStart",{action:b,element:c,endCallback:k},e)){for(var q=[].concat(d),r=[],u={},w=0;w<q.length;w++){var v=q[w],x="",y;null!=v&&"none"!=v&&("string"==typeof v?(x=v,y={}):"object"==typeof v&&(x=v.effect,y=g.extend({},v)),a.ca.dNa(y,u),u=g.extend({},y));x&&a.ca[x]&&r.push(a.ca[x](c,y))}r.length?Promise.all(r).then(k):k()}m.addClass(n);var z=window.requestAnimationFrame(function(){z=
0;m.addClass(t);var b=a.ca.u1(c);0<b?setTimeout(h,b+100):h()});setTimeout(function(){z&&(window.cancelAnimationFrame(z),z=0,h())},1E3)})};o_("AnimationUtils.startAnimation",a.ca.Li,a);a.ca.QA=function(c,b){null==a.ca.bu&&(a.ca.bu=a.ic.ad("oj-animation-effect-default-options"));return g.extend({duration:"400ms"},a.ca.bu?a.ca.bu[c]:null,b)};a.ca.zLa=function(c,b,d){var e="";if(b)for(var f=0;f<b.length;f++){var g=a.ca.gK(c,b[f]),g=a.ca.DOa(g),e=e+((0<f?", ":"")+g+" "+d.duration);d.timingFunction&&(e+=
" "+d.timingFunction);d.delay&&(e+=" "+d.delay)}return e};a.ca.Fka=function(c,b,d,e,f){b=a.ca.QA(d,b);d={css:{opacity:e}};f={css:{opacity:f}};b&&(b.startOpacity&&(d.css.opacity=b.startOpacity),b.endOpacity&&(f.css.opacity=b.endOpacity));return a.ca.Qz(c,d,f,b,["opacity"])};a.ca.fadeIn=function(c,b){return a.ca.Fka(c,b,"fadeIn",0,1)};o_("AnimationUtils.fadeIn",a.ca.fadeIn,a);a.ca.fadeOut=function(c,b){return a.ca.Fka(c,b,"fadeOut",1,0)};o_("AnimationUtils.fadeOut",a.ca.fadeOut,a);a.ca.expand=function(c,
b){return a.ca.MR(c,b,!0)};o_("AnimationUtils.expand",a.ca.expand,a);a.ca.collapse=function(c,b){return a.ca.MR(c,b,!1)};o_("AnimationUtils.collapse",a.ca.collapse,a);a.ca.i0a=function(a,b){var d=[],e=a.children,f=[],g=[];a.Bqa=a.style.height;for(var k=0;k<e.length;k++){var l=e[k],m=window.getComputedStyle(l);f.push(m.padding);g.push(m.textAlign);l.Cqa=l.style.padding}for(k=0;k<e.length;k++){l=e[k];m=document.createElement("div");m.style.overflow="hidden;";var n=document.createElement("div");n.style.display=
"table-cell";n.style.verticalAlign="middle";n.style.boxSizing="border-box";n.style.height=b;n.style.padding=f[k];n.style.textAlign=g[k];for(m.appendChild(n);l.firstChild;)n.appendChild(l.firstChild);l.appendChild(m);l.style.padding="0";d.push(m)}a.style.height="0";return d};a.ca.I_a=function(a){for(var b=a.children,d=0;d<b.length;d++){var e=b[d],f=e.children[0];if(f){var g=f.children[0];if(g)for(;g.firstChild;)e.appendChild(g.firstChild);e.removeChild(f)}e.style.padding=e.Cqa;delete e.Cqa}a.style.height=
a.Bqa;delete a.Bqa};a.ca.WMa=function(c,b,d){var e,f=c.offsetHeight+"px",h=a.ca.i0a(c,f),k=g.extend({},b);d?k.endMaxHeight||(k.endMaxHeight=f):k.startMaxHeight||(k.startMaxHeight=f);k.persist="all";k._noReflow=!0;if(h.length)for(f=0;f<h.length;f++)0==f?(k._skipPromise=!1,e=a.ca.MR(h[f],k,d)):(k._skipPromise=!0,a.ca.MR(h[f],k,d));else e=Promise.resolve();return e.then(function(){null!=b&&"all"==b.persist||a.ca.I_a(c)})};a.ca.IS=function(a,b,d,e,f){d||(e?d="0":(b=f?b.maxWidth:b.maxHeight,d="none"!==
b?b:(f?a.offsetWidth:a.offsetHeight)+"px"));return d};a.ca.MR=function(c,b,d){if(c&&"TR"==c.tagName)return a.ca.WMa(c,b,d);b=a.ca.QA(d?"expand":"collapse",b);var e={},f={},g=b.direction||"height",k=e.css={},l=f.css={},m=window.getComputedStyle(c),n=[];if("both"===g||"height"===g){var t=a.ca.IS(c,m,b.endMaxHeight,!d,!1);k.maxHeight=a.ca.IS(c,m,b.startMaxHeight,d,!1);l.maxHeight=t;n.push("maxHeight")}if("both"===g||"width"===g)g=a.ca.IS(c,m,b.endMaxWidth,!d,!0),k.maxWidth=a.ca.IS(c,m,b.startMaxWidth,
d,!0),l.maxWidth=g,n.push("maxWidth");k.overflow=b.overflow?b.overflow:"hidden";d=[].concat(n);d.push("overflow");return a.ca.Qz(c,e,f,b,n,d)};a.ca.jca=function(c,b){return a.ca.eva(c,b,!0)};o_("AnimationUtils.zoomIn",a.ca.jca,a);a.ca.kca=function(c,b){return a.ca.eva(c,b,!1)};o_("AnimationUtils.zoomOut",a.ca.kca,a);a.ca.eva=function(c,b,d){b=a.ca.QA(d?"zoomIn":"zoomOut",b);var e={},f={},g=b.axis||"both",g="both"===g?"scale":"x"===g?"scaleX":"scaleY",k=e.css={},l=f.css={};k.transform=g+"("+(d?0:1)+
") translateZ(0)";l.transform=g+"("+(d?1:0)+") translateZ(0)";k.transformOrigin=b.transformOrigin||"center";return a.ca.Qz(c,e,f,b,["transform"])};a.ca.Nba=function(c,b){return a.ca.js(c,b,!0)};o_("AnimationUtils.slideIn",a.ca.Nba,a);a.ca.a7a=function(c,b){return a.ca.js(c,b,!1)};o_("AnimationUtils.slideOut",a.ca.a7a,a);a.ca.js=function(c,b,d){b=a.ca.QA(d?"slideIn":"slideOut",b);var e={},f={},g=b.direction||"start",k="0",l="0",m=e.css={},n=f.css={};if(b.offsetX||b.offsetY)b.offsetX&&(k=b.offsetX),
b.offsetY&&(l=b.offsetY);else{var t="rtl"===a.Q.Xh();switch(g){case "left":k=(d?c.offsetWidth:-c.offsetWidth)+"px";break;case "right":k=(d?-c.offsetWidth:c.offsetWidth)+"px";break;case "top":l=(d?c.offsetHeight:-c.offsetHeight)+"px";break;case "bottom":l=(d?-c.offsetHeight:c.offsetHeight)+"px";break;case "end":k=(d?-c.offsetWidth:c.offsetWidth)*(t?-1:1)+"px";break;default:k=(d?c.offsetWidth:-c.offsetWidth)*(t?-1:1)+"px"}}d?(m.transform="translate("+k+","+l+") translateZ(0)",n.transform="translate(0,0) translateZ(0)"):
(m.transform="translate(0,0) translateZ(0)",n.transform="translate("+k+","+l+") translateZ(0)");return a.ca.Qz(c,e,f,b,["transform"])};a.ca.C6a=function(c,b){b=a.ca.QA("ripple",b);var d={},e={},f=c.offsetWidth,h=c.offsetHeight,k=g("\x3cdiv style\x3d'position:absolute; overflow:hidden'\x3e"),l=g("\x3cdiv class\x3d'oj-animation-effect-ripple oj-animation-rippler'\x3e"),m="static"==window.getComputedStyle(c).position?{left:c.offsetLeft,top:c.offsetTop}:{left:0,top:0};c.insertBefore(k[0],c.firstChild);
k.css({left:m.left+"px",top:m.top+"px",width:f+"px",height:h+"px"});k.prepend(l);f=d.css={};h=e.css={};a.ca.hZa(f,l,k,b);f.transform="scale(0) translateZ(0)";f.opacity=b.startOpacity||l.css("opacity");h.transform="scale(1) translateZ(0)";h.opacity=b.endOpacity||0;b.persist="all";return a.ca.Qz(l[0],d,e,b,["transform","opacity"]).then(function(){k.remove()})};o_("AnimationUtils.ripple",a.ca.C6a,a);a.ca.hZa=function(c,b,d,e){b=b.width();var f=d.width(),g=d.height();if(e.diameter){var k=e.diameter,l=
parseInt(k,10);isNaN(l)||(b="%"==k.charAt(k.length-1)?Math.floor(Math.min(f,g)*(l/100)):l,c.width=b+"px",c.height=b+"px")}d="static"==d.css("position")?d.position():{left:0,top:0};f=a.ca.oia(e.offsetX,b,f,d.left);null!=f&&(c.left=f+"px");f=a.ca.oia(e.offsetY,b,g,d.top);null!=f&&(c.top=f+"px");e.color&&(c.backgroundColor=e.color)};a.ca.oia=function(a,b,d,e){var f;a=a||"50%";var g=parseInt(a,10);isNaN(g)||(f="%"==a.charAt(a.length-1)?g/100*d-b/2:g-b/2,f=Math.floor(f+e));return f};a.ca.u9a=function(c,
b){b=b||{};var d={fadeOut:1,collapse:1,zoomOut:1,slideOut:1},e=b.removeEffect||"fadeOut",f=g(".oj-animation-rippler",c);if(0===f.length)console.warn("No rippler so returning");else return e in d?a.ca[e](f,b).then(function(){f.remove()}):f.remove()};a.ca.iia=function(a){var b,d=a.match(/^([\+\-]?\d*\.?\d*)(.*)$/);a=parseFloat(d[1]);d=d[2];switch(d){case "deg":b=a-180+d;break;case "grad":b=a-200+d;break;case "rad":b=a-3.1416+d;break;case "turn":b=a-.5+d;break;default:console.log("Unknown angle unit in flip animation: "+
d)}return b};a.ca.c3=function(c,b,d,e,f){if(b&&"children"==b.flipTarget){var h=[];c=g(c).children();var k=g.extend({},b);delete k.flipTarget;var l=g.extend({},k);l.startAngle=a.ca.iia(b.startAngle||e);l.endAngle=a.ca.iia(b.endAngle||f);for(var m=0;m<c.length;m++)b=g(c[m]).hasClass("oj-animation-backface")?l:k,h.push(a.ca.c3(c[m],b,d,e,f));return Promise.all(h)}b=a.ca.QA(d,b);d={};var h={},k={css:d},l={css:h},n="rotateY(",t="2000px",m="hidden",s="center";b&&("x"===b.axis&&(n="rotateX("),b.startAngle&&
(e=b.startAngle),b.endAngle&&(f=b.endAngle),b.perspective&&(t=b.perspective),b.backfaceVisibility&&(m=b.backfaceVisibility),b.transformOrigin&&(s=b.transformOrigin));n="perspective("+t+") "+n;d.transform=n+e+")";d.backfaceVisibility=m;d.transformOrigin=s;h.transform=n+f+")";return a.ca.Qz(c,k,l,b,["transform"],["transform","backfaceVisibility","transformOrigin"])};a.ca.l2a=function(c,b){return a.ca.c3(c,b,"flipIn","-180deg","0deg")};o_("AnimationUtils.flipIn",a.ca.l2a,a);a.ca.m2a=function(c,b){return a.ca.c3(c,
b,"flipOut","0deg","180deg")};o_("AnimationUtils.flipOut",a.ca.m2a,a);a.ca.p0a=function(c,b){b=a.ca.QA("addTransition",b);return a.ca.Qz(c,null,null,b,b.transitionProperties)};o_("AnimationUtils.addTransition",a.ca.p0a,a)});