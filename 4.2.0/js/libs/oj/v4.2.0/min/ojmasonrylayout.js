/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd","ojs/ojanimation"],function(a,g){function c(a,d,e,f,g,k){null==c.O0&&(c.O0=c.ENa());this.Tf=a;this.kj=d;this.RIa=e;f&&f.tBa&&(this.i_a=f.tBa);g&&g.uBa&&(this.K8=g.uBa);k&&(k.FM&&(this.or=k.FM),k.eO&&(this.$r=k.eO),k.Exa&&(this.bna=k.Exa),k.Mxa&&(this.lna=k.Mxa),k.cBa&&(this.zx=k.cBa),k.nya&&(this.CE=k.nya),k.iBa&&(this.lB=k.iBa),k.Qya&&(this.NE=k.Qya),k.Pya&&(this.Wr=k.Pya),k.Oya&&(this.mx=k.Oya),k.fBa&&(this.dM=k.fBa),k.nd&&(this.vF=k.nd),
k.$g&&(this.wF=k.$g),k.Xc&&(this.Dp=k.Xc));d=document.createElement("div");e=d.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";d.appendChild(f);a.insertBefore(d,a.firstChild);this.Mta=d;this.p8=f;var l=this;this.soa=function(){l.tSa()};this.x7=function(){l.Cf()}}(function(){function b(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==t&&c.display!==s||(b=!1)}if(a&&1===a.nodeType&&
b)return a}return null}function d(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===t||d.display===s))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.Ge<a.Ge?1:a.Ge<b.Ge?-1:0}function f(a){a&&a.sort(e);return a}function h(a){var b=null;if(a=g(a).attr("class").match(w))b=a[0].substring(u.length+1),a=b.indexOf("x"),b={colSpan:c.Oh(b.substring(0,a)),rowSpan:c.Oh(b.substring(a+1))};return b}function k(a){var b=null;(a=g(a).attr("class").match(w))&&(b=a[0]);return b}
function l(a,b){g(a).removeClass(b)}function m(a,b){g(a).addClass(b)}a.ib("oj.ojMasonryLayout",g.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},rc:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");this.options.disabled&&a.D.warn(y);this.rC=this.eventNamespace+"ReorderHandle";
this.fb={};this.fb.yj=!1;this.fb.Nf=!1;this.fb.mca=!1;this.fb.Jm=!1;this.fb.Un=!1;this.$w();this.TI();this.qb(!0)},refresh:function(){this._super();var a="rtl"===this.Wc()!==this.Pj;a&&this.bka();this.qb(a)},hr:function(){this._super();this.Wf?this.qb(this.Wf[0]):this.Ai.Lq(!0)},io:function(){this._super();this.Wf?this.qb(this.Wf[0]):this.Ai.Lq(!0)},li:function(a,b,c){this.LVa(b);(a=this.fb.Nf.children().not(".oj-helper-hidden"))&&0<a.length&&this.mi(b,c,{launcher:g(b.target).closest(":tabbable")})},
qb:function(b){if(this.bJ()){this.Wf=null;this.Pj="rtl"===this.Wc();this.ww=a.Q.qe();var d=this.element,e=this.options;if(b){var g=this;this.zx=function(a){g.LZa(a)};this.CE=function(a){g.sSa(a)};this.lB=function(a,b){return g.sF(a,b)};this.NE=function(){g.lUa()};this.Wr=function(){g.kUa()};this.mx=function(a){g.jUa(a)};if(!this.Ai){var q={};q.tBa=v;var n={};n.uBa=x;var r={};r.FM=m;r.eO=l;r.Exa=k;r.Mxa=h;r.cBa=this.zx;r.nya=this.CE;r.iBa=this.lB;r.Qya=this.NE;r.Pya=this.Wr;r.Oya=this.mx;r.fBa=f;r.nd=
a.Components.nd;r.$g=a.Components.$g;r.Xc=function(a){return g.Hg(a)};this.Kha();this.cYa();this.Ai=new c(d[0],this.Pj,"enabled"===a.ra.h$(),q,n,r)}this.Ona=function(a){g.qK(a)};this.Kna=function(a){g.O4(a)};this.Mna=function(a){g.Q4(a)};this.Lna=function(a){g.P4(a)};this.Ina=function(a){g.N4(a)};this.Pna=function(a){g.R4(a)};e.reorderHandle&&this.Ata()}else this.Kha(),e=d.children(),this.x8(e),this.g8(e),this.GJa();this.Ai.Lq(b);b&&(this.dm=function(){g.Ph()},a.Q.sm(d[0],this.dm,H))}else d=!1,this.Wf&&
(d=this.Wf[0]),this.Wf=[b||d]},_destroy:function(){this.$z();var b=this.element;a.Q.Hm(b[0],this.dm);this.dm=null;this.$Xa();for(var c=this.Mr(),d=c.length,e=0;e<d;e++)delete c[e].Ge;this.bka();b.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.oua();b.children("."+u).removeClass(u);this.ID=this.mx=this.Wr=this.NE=this.lB=this.CE=this.zx=this.Pna=this.Ina=this.Lna=this.Mna=this.Kna=this.Ona=null;this._super()},_setOption:function(b,c,d){var e=!1;switch(b){case "reorderHandle":this.oua();
e=!0;break;case "disabled":a.D.warn(y);break;case "contextMenu":a.Q.qe()||(this.$z(),c&&this.$w(c))}this._super(b,c,d);e&&c&&this.Ata()},resizeTile:function(a,b){var c=this.Ai;c.dX()&&c.kW();var d=g(a),e=d[0],f=k(e);if(b==f)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:f,sizeStyleClass:b})&&(this.UI||(this.UI=[]),this.UI.push(e,f,b),c.resizeTile(a,b))},insertTile:function(b,
c){var d=this.Ai;d.dX()&&d.kW();isNaN(c)&&(c=-1);var e=g(b),f=e[0];e.addClass(u);!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(f.Mpa=c,d.uq()&&e.addClass(x),e=f.style,e.top="-1px",this.Pj?e.right="-1px":e.left="-1px",this.ax(f,c),d.B4a(f,c),a.Components.nd(f),this.ID||(this.ID=[]),this.ID.push(b))},removeTile:function(b){var c=this.Ai;c.dX()&&c.kW();var d=g(b),e=d[0];if(a.yf.RV(e)){var f=this.Mr(!0),e=f.indexOf(e);0<e&&(this.r2=f[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&
c.p4a(b)},Ph:function(){this.qr||this.zoa||this.Ai.s6a()},LZa:function(a){var b=g(a),c=a.Mpa;delete a.Mpa;this.options.reorderHandle&&this.g8(b);this.dE.push("insert",{tile:b,index:c})},sSa:function(b){var c=g(b);this.options.reorderHandle&&this.x8(c);c.removeClass(u);a.Components.$g(b);b.parentNode.removeChild(b);this.tU(b);this.dE.push("remove",{tile:c})},sF:function(b,c){var d=(a.ic.ad("oj-masonrylayout-option-defaults")||{}).animation;return a.ca.Li(b,c,d?d[c]:null,this)},lUa:function(){if(this.ID){for(var a=
this.Ai,b=this.ID,c=0;c<b.length;c++)a.$6a(b[c]);this.ID=null}if(this.UI){a=this.UI;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:g(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this.dE.push("resize",b)}this.UI=null}this.qr&&(this.PQ?this.GQa():this.c1&&this.Jna())},kUa:function(){this.zoa=!0;this.JT=null;this.dE=[];var b=document.activeElement;b&&a.Q.Hs(this.element[0],b)&&(this.JT=b)},jUa:function(b){this.zoa=!1;var c=this.element[0];if(this.JT){var d=this.JT;this.JT=null;if(this.r2){if(d=
this.r2,this.r2=null,d&&a.Q.Hs(c,d)){var c=this.Mr(c,!0),e=c.indexOf(d);0<=e&&e<c.length-1?a.yf.e$(c[e+1]):a.yf.e$(d)}}else a.Q.Hs(c,d)?a.yf.UM(d):a.yf.e$(c)}b&&b();if(this.dE)for(b=this.dE,this.dE=null,d=0;d<b.length;d+=2)this._trigger(b[d],null,b[d+1])},bka:function(){var a=this.Ai;a&&a.destroy();this.Ai=null},bJ:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);
return c},Mr:function(a){for(var b=this.element.children(v),c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.Kg){var g=f.style;g.visibility!==t&&g.display!==s&&d.push(f)}}return d},cYa:function(){var a=this.Mr();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.Ge||(c.Ge=b+1)}},GJa:function(){var a=this.Mr();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.Ge||this.ax(c,b)}},$Xa:function(){var b=this.Mr(),c=this.Mr();f(c);for(var d=0;d<b.length;d++){var e=b[d],g=c[d];e!=g&&(a.Components.$g(g),
e.parentNode.insertBefore(g,e),a.Components.nd(g),e=b.indexOf(g),e>d&&(b.splice(e,1),b.splice(d,0,g)))}},ax:function(a,b){var c=this.Mr();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.Ge&&e.Ge>=b+1&&e.Ge++}a.Ge=b+1},tU:function(a){if(a.Ge){var b=this.Mr();if(b)for(var c=0;c<b.length;c++){var d=b[c];d.Ge&&d.Ge>a.Ge&&d.Ge--}delete a.Ge}},Kha:function(){var a=this.element.children(),a=a.not("."+u),a=a.filter(function(a,b){return b.className.match(w)});a.addClass(u)},$w:function(a){var b=
null,c=this.co();a||c||this.$()||(c=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+c);if(a||c){c=a||c;b=g.type(c);if("function"==b){try{c=c()}catch(d){c=null}g.type(c)}if(c){if(b=g(c)){b.css("display",s);c=this.fb;if(!c)return;c.Nf=b;c.yj=!0}this.fb.yj&&a&&this.TI()}}},TI:function(){if(this.fb&&this.fb.yj&&this.options.reorderHandle){var a=this.fb.Nf,b=this;if("OJ-MENU"===a[0].tagName)a[0].addEventListener("ojAction",this.Wj.bind(this));else a.on("ojselect",this.Wj.bind(this));var c=
!1;a.find("[data-oj-command]").each(function(){if(0===g(this).children("a").length){var d=g(this).attr("data-oj-command").slice(17),d=b.Tl(d,"OJ-MENU"===a[0].tagName?this.tagName:"li");g(this).attr("id",d.attr("id"));"OJ-OPTION"===this.tagName?(this.innerHTML=d.get(0).innerHTML,g(this).attr("data-oj-command",d.attr("data-oj-command"))):(d.get(0).className=g(this).get(0).className,g(this).replaceWith(d));c=!0}});c&&("OJ-MENU"===a[0].tagName?a[0].refresh():a.ojMenu("refresh"));this.fb.mca=a.find("#"+
z);this.fb.Jm=a.find("#"+A);this.fb.Un=a.find("#"+B)}},$z:function(){var a=this.fb;a&&a.yj&&(a.yj=!1,"OJ-MENU"===a.Nf[0].tagName?a.Nf[0].removeEventListener("ojAction"):a.Nf.off("ojselect"),a.Nf=null)},LVa:function(a){var c=this.element,e=a.originalEvent.target,f=this.options.reorderHandle;a=!1;f&&(f=g(e).closest(f))&&0<f.length&&(a=!0);c=d(e,c[0]);this.fb.tile=c;if(this.fb.yj){var e=this.fb.WV,f=!1,h=this.fb.mca;if(h){var k=h.hasClass("oj-helper-hidden");a||k?a&&k&&(h.removeClass("oj-helper-hidden"),
f=!0):(h.addClass("oj-helper-hidden"),f=!0);var l=h.hasClass(q),k=!1;e&&c===e&&(k=!0);k&&!l?(h.addClass(q),f=!0):!k&&l&&(h.removeClass(q),f=!0)}if(h=this.fb.Jm)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0),l=h.hasClass(q),k=!1,e&&c!==e&&c!==b(e)||(k=!0),k&&!l?(h.addClass(q),f=!0):!k&&l&&(h.removeClass(q),f=!0);if(h=this.fb.Un)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),
f=!0),a=h.hasClass(q),k=!1,e&&e!==c&&e!==b(c)||(k=!0),k&&!a?(h.addClass(q),f=!0):!k&&a&&(h.removeClass(q),f=!0);f&&(a=this.fb.Nf,"OJ-MENU"===a[0].tagName?a[0].refresh():a.ojMenu("refresh"))}},Tl:function(a,b){var c=G[a],d=g(document.createElement(b));d.attr("id",c);d.attr("data-oj-command",a);d.append(this.Sz(a));return d},Sz:function(a){a=C[a];var b=g('\x3ca href\x3d"#"\x3e\x3c/a\x3e');b.text(this.T(a));return b},CUa:function(a){a&&(this.fb.WV=a)},gqa:function(a,b){if(a&&this.fb.WV){var c=this.fb.WV;
this.fb.WV=!1;this.qMa(c,a,b)}},qMa:function(a,c,d){var e=a.Ge-1,f=g(a);if(!1!==this._trigger("beforeReorder",null,{tile:f,fromIndex:e})){this.tU(a);var h=c.Ge-1;d||h++;var k=this.element[0];d||(c=b(c));this.ax(a,h);k.insertBefore(a,c);this.Ai.Lq(!0);this._trigger("reorder",null,{tile:f,fromIndex:e,toIndex:h})}},Wj:function(a,b){var c=(b?b.item:g(a.target)).attr("id");c===z?this.CUa(this.fb.tile):c===A?this.gqa(this.fb.tile,!0):c===B&&this.gqa(this.fb.tile,!1)},kna:function(a){var b=this.Mr(!0);f(b);
for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},Ata:function(){var a=this.element,b=a.children();this.g8(b);a.on("dragstart"+this.rC,this.Ona).on("dragenter"+this.rC,this.Kna).on("dragover"+this.rC,this.Mna).on("dragleave"+this.rC,this.Lna).on("dragend"+this.rC,this.Ina).on("drop"+this.rC,this.Pna)},g8:function(a){var b=this.options;a.filter(b.reorderHandle).attr(p,"true").addClass(r);a.find(b.reorderHandle).attr(p,"true").addClass(r)},oua:function(){var a=this.element,b=a.children();
this.x8(b);a.off(this.rC)},x8:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(p).removeClass(r);a.find(b.reorderHandle).removeAttr(p).removeClass(r)},qK:function(a){var b=this.options;if(b.reorderHandle){var c=a.originalEvent.target,c=g(c).closest(b.reorderHandle);if(!c||1>c.length)return}b.reorderHandle&&!this.qr&&(c=a.target,b=d(c,this.element[0]))&&(c=this.kna(b),b.W5=c,c={tile:g(b),fromIndex:c},!1!==this._trigger("beforeReorder",null,c)&&(a=a.originalEvent,this.E2(b,a.pageX,
a.pageY,a.dataTransfer)))},O4:function(b){if(this.qr){b=b.originalEvent;var c=b.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!a.Q.Hs(d,c):this.qka&&(e=(c=document.elementFromPoint(b.clientX,b.clientY))&&(c==d||a.Q.Hs(d,c)));e&&((this.qka=!1,this.Fw)?this.Kg&&(g(this.Kg).css("display",""),this.Ai.Lq(!1,!0)):b.dataTransfer.dropEffect="none")}},Q4:function(a){if(!this.qr)return!1;var b=a.originalEvent;b.dataTransfer.dropEffect="move";this.yMa(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},
P4:function(b){if(this.qr){var c=b.originalEvent,d=c.relatedTarget;b=this.element[0];var e=!1;e=d?b!=d&&!a.Q.Hs(b,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=b&&!a.Q.Hs(b,c);e&&(this.qka=!0,this.Kg&&(g(this.Kg).css("display",s),this.Ai.Lq(!1,!0)))}},Lia:function(){if(this.FR){clearTimeout(this.FR);this.FR=null;var a=this.Fw;a&&g(a).removeClass("oj-drag")}},N4:function(){this.Lia();if(this.qr&&!this.e1){var b=this.Fw;if(b&&this.Kg){var c=this.Kg;a.Q.Hs(this.element[0],b)&&(g(c).css("display",
""),this.tU(c),c.parentNode.removeChild(c),g(b).css("display",""),this.ax(b,b.Ge-1),this.Ai.Lq(!1,!0));delete b.W5}this.Kg=this.Fw=null;this.RQ=this.PQ=!1;this.D2=null;this.qr=this.c1=!1}},R4:function(a){if(!this.qr)return!1;var b=this.Ai;b.dX()&&b.kW();this.Lia();b=a.originalEvent;this.IMa(this.Fw,b.pageX,b.pageY);a.stopPropagation();return!1},E2:function(b,c,d,e){this.qr=!0;this.d1=this.RQ=this.e1=!1;this.Fw=b;var f=this.element[0],h=k(b),l=this.Kg=document.createElement("div");l.Ge=b.Ge;l.className=
h+" oj-drop "+u;var h=l.style,m=b.style;h.top=m.top;this.Pj?h.right=m.right:h.left=m.left;h=g(b).offset();f.insertBefore(l,b);this.D2=c={left:c-h.left,top:d-h.top};g(b).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",b.outerHTML);e.setDragImage(b,c.left,c.top);var q=this;this.FR=setTimeout(function(){q.d1=!0;m.display=s;g(b).removeClass("oj-drag");q.FR=null;a.Components.Mq(b)},0)},yMa:function(a,c,e){this.RQ=!0;if(this.d1&&!this.PQ){var f=this.element[0];c=document.elementFromPoint(c,
e);c=d(c,f);e=!1;if(c){var h=g(c),k=this.options.reorderHandle;k&&(e=h.is(k)?!0:(e=h.find(k))&&0<e.length)}c&&c!==this.Kg&&c!==this.Fw&&e&&(h=g(f).offset(),e=b(this.Kg),a=a-h.left>=c.offsetLeft+.5*c.offsetWidth,this.tU(this.Kg),a&&!this.Pj||!a&&this.Pj?(a=b(c))?(this.ax(this.Kg,a.Ge-1),f.insertBefore(this.Kg,a)):(this.ax(this.Kg,c.Ge),f.appendChild(this.Kg)):(this.ax(this.Kg,c.Ge-1),f.insertBefore(this.Kg,c)),e!==b(this.Kg)&&(this.PQ=this.Ai.Lq(!1,!0)))}},GQa:function(){this.PQ=!1},IMa:function(b,
c,d){this.e1=!0;var e=this.element[0],f=this.Kg;this.Kg=null;a.Components.$g(b);e.insertBefore(b,f);e.removeChild(f);a.Components.nd(b);b.Ge=f.Ge;f=b.style;f.display="";a.Components.ep(b);var h=g(e).offset(),k=this.D2;f.top=d-k.top-h.top+n;c=c-k.left-h.left;this.Pj?(f.right=e.offsetWidth-(c+g(b).outerWidth(!0))+n,f.left=""):f.left=c+n;this.D2=null;this.RQ?this.c1=this.Ai.Lq(!1,!0):this.Jna()},Jna:function(){this.d1=this.RQ=this.e1=this.qr=this.c1=!1;var a=this.Fw;this.Fw=null;var b=a.W5;delete a.W5;
var c=this.kna(a),a={tile:g(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},Hg:function(b){var c=this.element,d=a.Context.getContext(c[0]).Dc(),e="MasonryLayout",c=c.attr("id"),e=e+(" (id\x3d'"+c+"')")+(": "+b);return d.Xc({description:e})},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var n="px",t="hidden",s="none",p="draggable",q="oj-disabled",r="oj-draggable",u="oj-masonrylayout-tile",w=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,v="."+
u,x="oj-masonrylayout-tile-transition-show-from",y="JET MasonryLayout: 'disabled' property not supported",z="ojmasonrylayoutcut",A="ojmasonrylayoutpastebefore",B="ojmasonrylayoutpasteafter",G={cut:z,"paste-before":A,"paste-after":B},C={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},H=25})();c.prototype.Lq=function(a,c){var e=!1;a?(e=this.og()?!0:!1,this.Xra()):(this.Dp&&(this.Ul=this.Dp("performing layout (setup)")),this.Wr&&this.Wr(),this.L8(c),e=this.J8());return e};
c.prototype.destroy=function(){this.Cf();for(var a=this.Tf,c=this.zE(),e=0;e<c.length;e++){var f=c[e].style;this.kj?f.right="":f.left="";f.top=""}a.removeChild(this.Mta);this.Dp=this.wF=this.vF=this.dM=this.mx=this.Wr=this.NE=this.lB=this.CE=this.zx=this.lna=this.bna=this.$r=this.or=this.Tf=this.Pt=this.pr=this.mo=this.Fp=this.ln=this.x7=this.soa=this.p8=this.Mta=null};c.prototype.resizeTile=function(a,c){var e=this.Tf.querySelector(a);if(e){this.Fp||(this.Fp=[]);var f=this.Fp;f.push(e);f.push(c);
this.gsa=!0;this.wL()}};c.prototype.B4a=function(a,c){var e=this.zE();this.dM&&this.dM(e);var f=null;0<=c&&c<e.length&&(f=e[c]);this.Tf.insertBefore(a,f);this.wL()};c.prototype.$6a=function(a){if(a=this.Tf.querySelector(a))this.mo||(this.mo=[]),this.mo.push(a),this.o8=!0,this.Tp!==c.bga&&this.Tp!==c.ZP?this.wL():this.o8=!1};c.prototype.p4a=function(a){if(a=this.Tf.querySelector(a))this.pr||(this.pr=[]),this.pr.push(a),this.toa=!0,this.wL()};c.prototype.s6a=function(){this.gsa||this.toa||this.o8||
(this.Dp&&(this.Ul=this.Dp("performing layout (resizeNotify)")),this.Wr&&this.Wr(),this.L8(!1),this.J8())};c.prototype.uq=function(){if(this.rua)return!1;this.mJa||(this.BIa=this.RIa?!1:c.ETa(c.O0[0],c.O0[1]),this.mJa=!0);return this.BIa};c.prototype.dX=function(){return null!=this.Tp||null!=this.ln&&0<this.ln.length};c.prototype.kW=function(){this.rua=!0;this.pXa(this.K8);for(var a=this.zE(),d=0;d<a.length;d++){var e=a[d];e.OI&&delete e.OI}this.vK?(clearTimeout(this.vK),this.vK=null,this.US(null)):
this.iT?(this.iT=!1,this.US(null)):this.qF?(clearTimeout(this.qF),this.qF=null,this.n8()):this.Tp===c.ZP||null!=this.ln&&0<this.ln.length?this.zA(null):this.Tp===c.cga&&this.i5(null);this.rua=!1};c.rOa=function(a){var d=c.VJ(a);return{Fk:a.offsetWidth+(c.Oh(d.marginLeft)+c.Oh(d.marginRight)),xm:a.offsetHeight+(c.Oh(d.marginTop)+c.Oh(d.marginBottom))}};c.qOa=function(a){a=c.VJ(a);return{paddingLeft:c.Oh(a.paddingLeft),paddingRight:c.Oh(a.paddingRight),paddingTop:c.Oh(a.paddingTop),paddingBottom:c.Oh(a.paddingBottom),
borderLeftWidth:c.Oh(a.borderLeftWidth),borderRightWidth:c.Oh(a.borderRightWidth),borderTopWidth:c.Oh(a.borderTopWidth),borderBottomWidth:c.Oh(a.borderBottomWidth)}};c.VJ=function(a){var c=a.ownerDocument.defaultView,e=null;return e=c?c.getComputedStyle(a,null):a.currentStyle};c.Oh=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};c.Z0=function(a,c){if(a)for(var e=0;e<a.length;e++)if(a[e]==c)return e;return-1};c.ETa=function(a,c){var e=["gecko",16,"trident",6,"webkit",
533.1],f=e.length;if(0==f%2)for(var g=0;g<=f-2;g+=2)if(a==e[g]){if(c>=e[1+g])return!0;break}return!1};c.ENa=function(){var a=c.Bn,d=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(d="trident",e=a(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=a(f,/msie (\d+\.\d+);/),-1==e&&(e=a(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(d="webkit",e=a(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&
(d="gecko",e=a(f,/rv:(\d+[.]\d+)/));return[d,e]};c.Bn=function(a,c){var e=a.match(c);return e&&(e=e[1])?parseFloat(e):-1};c.pKa=function(a,c){return a.nY>c.nY?1:a.nY<c.nY?-1:a.mY>c.mY?1:a.mY<c.mY?-1:0};c.prototype.wL=function(){this.jT||(this.Tp?this.Y6||(this.Y6=!0):(this.Dp&&(this.Ul=this.Dp("performing layout")),this.jT=setTimeout(this.soa,0)))};c.prototype.zE=function(){for(var a=this.Tf.querySelectorAll(this.i_a),c=[],e=0;e<a.length;e++){var f=a[e],g=f.style;0<f.offsetWidth&&0<f.offsetHeight&&
"hidden"!=g.visibility&&c.push(f)}return c};c.prototype.J8=function(){var a=this.ln,d=this.og();if(this.Fp){var e=this.Fp;d||(d=[]);for(var f=0;f<e.length;f+=2){var g=e[f];0>c.Z0(d,g)&&d.push(g)}}e=!1;if(!d||1>d.length){if(!a||1>a.length)this.ln=null,this.zA(null),e=!0}else this.ln=d;a=null!=d&&0<d.length;this.uq()||e||this.zA(null);return a};c.prototype.og=function(){var a=this.Tf,d=this.zE();this.dM&&this.dM(d);var e=this.eJ=null;this.zw=0;this.Pa=1;this.UE=null;var f=[],g=[],k=[],l=this.kj,m=c.qOa(a),
n=0,t=[];this.Lha=t;for(var s=0;s<d.length;s++){var p=d[s];p.OI&&(this.eJ=p.OI,delete p.OI);var q=this.lna(p);this.eJ||(this.eJ=this.nJa(p,q));e=this.eJ;this.UE||(this.zw=Math.max(Math.floor((a.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.Fk),1),this.PSa(this.zw,this.Pa),n=this.zw);q.colSpan>n&&(n=q.colSpan);q.colSpan>this.zw&&(q.colSpan=this.zw);for(var r=!1,u=0;u<this.Pa;u++){for(var w=0;w<this.zw;w++)if(this.sNa(w,u,q)){var r=p.style,v={top:r.top};l?v.right=
r.right:v.left=r.left;g.push(v);this.N6(p,w,u,q,e,m);l&&k.push(w);r=!0;t.push({mY:w,nY:u,tile:p});break}if(r)break;u===this.Pa-1&&this.nha()}}if(e&&(a=this.p8.style)){n*=e.Fk;e=this.Pa*e.xm;k=a.width?c.Oh(a.width.toString()):0;m=a.height?c.Oh(a.height.toString()):0;if(k>n||m>e)this.HD={},this.HD.width=n+"px",this.HD.height=e+"px";a.width=(k>n?k:n)+"px";a.height=(m>e?m:e)+"px"}for(s=0;s<d.length;s++)p=d[s],r=p.style,v=g[s],""!=v.top&&(l&&parseInt(r.right,10)!==parseInt(v.right,10)||!l&&parseInt(r.left,
10)!==parseInt(v.left,10)||parseInt(r.top,10)!==parseInt(v.top,10))&&(f.push(p),this.KT&&0>c.Z0(this.Fp,p)&&this.Eha(p,this.s7?"reorder":"move"));1>f.length&&(f=null);return f};c.prototype.a0a=function(){if(this.HD){var a=this.p8.style;a.width=this.HD.width;a.height=this.HD.height;delete this.HD}};c.prototype.Xra=function(){var a=this.Lha;this.Lha=null;for(var a=a.sort(c.pKa),d=this.zE(),e=0;e<d.length;e++){var f=d[e],g=a[e].tile;f!=g&&(this.wF(g),f.parentNode.insertBefore(g,f),this.vF(g),f=c.Z0(d,
g),f>e&&(d.splice(f,1),d.splice(e,0,g)))}};c.prototype.PSa=function(a,c){for(var e=this.UE=[],f=0;f<c;f++){var g=[];e.push(g);for(var k=0;k<a;k++)g[k]=!1}};c.prototype.nha=function(){this.Pa++;var a=[];this.UE.push(a);for(var c=0;c<this.zw;c++)a[c]=!1};c.prototype.sNa=function(a,c,e){var f=e.colSpan;e=e.rowSpan;for(var g=c;g<c+e;g++){g>=this.Pa&&this.nha();for(var k=a;k<a+f;k++)if(k>=this.zw||this.UE[g][k])return!1}return!0};c.prototype.N6=function(a,c,e,f,g,k){var l=f.colSpan;f=f.rowSpan;for(var m=
this.UE,n=e;n<e+f;n++)for(var t=c;t<c+l;t++)m[n][t]=!0;a=a.style;a.top=k.paddingTop+e*g.xm+"px";this.kj?a.right=k.paddingRight+c*g.Fk+"px":a.left=k.paddingLeft+c*g.Fk+"px"};c.prototype.pXa=function(a){for(var c=this.zE(),e=0;e<c.length;e++)this.$r(c[e],a)};c.prototype.Eha=function(a,c){if(this.uq()){var e=this;e.lB(a,c).then(function(){e.KT&&e.zA(a)})}};c.prototype.L8=function(a){this.KT||(this.s7=a,this.KT=!0)};c.prototype.zA=function(a){var d=!0;if(this.ln){var e=this.ln;if(a)for(var f=0;f<e.length;f++){if(a===
e[f]){e=this.ln=[];break}}else this.uq()||(e=this.ln=[]);0<e.length&&(d=!1)}if(d){if(this.Fp&&(a=this.Fp,this.Fp=null,this.uq()))for(f=0;f<a.length;f+=2);this.s7&&(this.s7=!1);this.o8=this.toa=this.gsa=this.KT=!1;this.Xra();this.NE&&this.NE();this.a0a();if(this.Tp===c.ZP)if(this.uq()){var g=this;this.qF=setTimeout(function(){g.n8()},0)}else this.n8();else this.Tp||this.mx&&this.mx(this.x7)}};c.prototype.nJa=function(a,d){var e=c.rOa(a);return{Fk:e.Fk/d.colSpan,xm:e.xm/d.rowSpan}};c.prototype.tSa=
function(){this.jT&&(clearTimeout(this.jT),this.jT=null);this.Wr&&this.Wr();this.Tp=c.bga;if(this.pr&&this.uq()){var a=this.pr,d=this;this.iT=!0;for(var e=0;e<a.length;e++){var f=a[e];this.lB(f,"remove").then(function(){d.US(f)})}}else this.US(null)};c.prototype.US=function(a){this.vK?(clearTimeout(this.vK),this.vK=null):this.iT&&(this.iT=!1);if(a){var d=this.pr;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.Pt||(this.Pt=[]);var g=this.Pt;g.push(a);break}}1>d.length&&(this.pr=
null)}}else if(!this.uq()&&(d=this.pr)){for(e=0;e<d.length;e++)f=d[e],this.Pt||(this.Pt=[]),g=this.Pt,g.push(f);this.pr=null}if(!this.pr){if(this.Pt){g=this.Pt;for(e=0;e<g.length;e++)a=g[e],d=a.style,this.kj?d.right="":d.left="",d.top="",this.CE&&this.CE(a);this.Pt=null}this.Tp=c.ZP;this.L8(!1);if(this.Fp)for(g=this.Fp,e=0;e<g.length;e+=2)a=g[e],d=g[e+1],f=this.bna(a),this.uq()&&(a.OI=this.eJ,this.Eha(a,"resize")),this.$r(a,f),this.or(a,d);this.J8()}};c.prototype.n8=function(){this.qF&&(clearTimeout(this.qF),
this.qF=null);this.Tp=c.cga;if(this.mo&&this.uq())for(var a=this,d=this.mo,e=0;e<d.length;e++){var f=d[e];this.$r(f,this.K8);this.lB(f,"insert").then(function(){a.i5(f)})}else{if(this.mo)for(d=this.mo,e=0;e<d.length;e++)f=d[e],this.$r(f,this.K8);this.i5(null)}};c.prototype.i5=function(a){if(a){var c=this.mo;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===a){c.splice(e,1);this.zx&&this.zx(a);break}}1>c.length&&(this.mo=null)}}else if(!this.uq()&&(c=this.mo)){for(e=0;e<c.length;e++)f=c[e],this.zx&&
this.zx(f);this.mo=null}this.mo||(this.Tp=null,this.mx&&this.mx(this.x7),this.Y6&&(this.Y6=!1,this.wL()))};c.prototype.Cf=function(){this.Ul&&(this.Ul(),this.Ul=null)};c.bga=1;c.ZP=2;c.cga=3;a.J.Ua("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{animateEnd:{},animateStart:{},beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{Ya:"ojMasonryLayout"}});
a.J.register("oj-masonry-layout",{metadata:a.J.getMetadata("oj-masonry-layout")})});