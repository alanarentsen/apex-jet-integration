/**
 * Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","hammerjs","ojs/ojjquery-hammer","promise","ojs/ojcomponentcore","ojs/ojpopupcore","ojs/ojanimation","ojs/ojoption"],function(a,g,c){(function(){a.ib("oj.ojMenu",g.oj.baseComponent,{defaultElement:"\x3cul\x3e",delay:300,role:"menu",widgetEventPrefix:"oj",options:{menuSelector:"ul",openOptions:{display:"auto",initialFocus:"menu",launcher:null,position:{my:"start top",at:"start bottom",collision:"flipfit"}},submenuOpenOptions:{position:{my:"start top",at:"end top",collision:"flipfit"}},
animateStart:null,animateEnd:null,beforeOpen:null,close:null,open:null,action:null},rc:function(){this._super();var a=this;this._focusForTesting=this.nh;this._nextForTesting=this.sqa;this._selectForTesting=this.Di;this.xB=this.element;this.aba=!1;if(!this.$()&&h&&"ul"!==this.element[0].tagName.toLowerCase())throw Error("Cancel item supported for \x3cul\x3e menus only.");this.AZa();this.element.uniqueId().addClass("oj-menu oj-component").hide().attr({role:this.role,tabIndex:"0"});this._on(!0,{"mousedown .oj-menu-item":function(a){this.options.disabled&&
a.preventDefault()},click:function(a){this.options.disabled&&a.preventDefault()},keydown:function(a){!this.options.disabled||a.keyCode!==g.ui.keyCode.ESCAPE&&a.keyCode!==g.ui.keyCode.TAB||(a.keyCode===g.ui.keyCode.TAB&&a.preventDefault(),this.df&&this.NJ(a))}});this.options.disabled&&this.element.addClass("oj-disabled").attr("aria-disabled","true");var b=function(a){if(!this.f$){this.f$=!0;var b=g(a.currentTarget);try{this.cla=!0,this.nh(a,b)}finally{this.cla=!1}}}.bind(this),c=function(a){a&&a.target&&
!g(a.target).is(":visible")||this.qi(a,"eventSubtree")}.bind(this);this._on({"mousedown .oj-menu-item \x3e a":function(a){a.preventDefault()},"click .oj-disabled \x3e a":function(a){a.preventDefault()},click:function(){this.aba=!1},touchstart:function(){this.f$=!1},mouseover:function(){this.f$=!1},"click .oj-menu-item:has(a)":function(a){var b=g(a.target).closest(".oj-menu-item");!this.aba&&b.not(".oj-disabled").length&&(this.aba=!0,a.preventDefault(),this.yb&&this.yb.closest(b).length&&this.yb.get(0)!=
b.get(0)||(b.has(".oj-menu").length?this.ze(a):(this.Di(a),this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.yb&&1===this.yb.parents(".oj-menu").length&&this.sf&&this.sf()))))},"mouseenter .oj-menu-item":b,"touchstart .oj-menu-item":b,mouseleave:c,"mouseleave .oj-menu":c,focus:function(a,b){if(!b){var c=this.yb||this.element.children(".oj-menu-item").eq(0);this.nh(a,c)}},keydown:this.jx,keyup:function(a){if(a.keyCode==g.ui.keyCode.ENTER||a.keyCode==g.ui.keyCode.SPACE)this.FQ=!1}});
this._focusable({applyHighlight:!e,recentPointer:function(){return a.cla},setupHandlers:function(b,c){a.Uj=b;a.fj=c}});this.Xua=g.proxy(this.yM,this);this.qb()},F0:function(a){if(arguments.length)d=a;else return d},Yr:function(){var a=this;a.ZK=0;a.aL=0;a.Xta=0;a.J2=0;var b=this.element.find("oj-option");g.each(b,function(b,c){c.customOptionRenderer=a.yr.bind(a)})},yr:function(b){var c=g(b),d=this;!0==b.disabled?c.addClass("oj-disabled"):!1==b.disabled&&c.removeClass("oj-disabled");if(!c.is(":not(.oj-menu-item)")||
/[^\-\u2014\u2013\s]/.test(c.text())){var e=c.children("a");if(!(0<e.length)){e=document.createElement("a");e.setAttribute("href","#");c.prepend(e);var f=a.J.sl(b);g.each(["startIcon","","endIcon"],function(a,b){if(f[b])if(""===b)g.each(f[b],function(a,b){g(e).append(b)});else if("startIcon"===b){var c=f[b].length;d.aL=Math.max(d.aL,c);g.each(f[b],function(a,b){g(b).addClass("oj-menu-item-icon");g(e).append(b);1<c&&d.IVa(b,a,c)})}else if("endIcon"===b){var h=f[b].length;d.ZK=Math.max(d.ZK,h);g.each(f[b],
function(a,b){g(b).addClass("oj-menu-item-end-icon");g(e).append(b);1<h&&d.HVa(b,a,h)})}})}}},IVa:function(a,b,c){var d=this.uj?"margin-right":"margin-left",e=parseInt(g(a).css(d),10);this.Xta=-1*e;g(a).css(d,e*(c-b)+"px")},HVa:function(a,b,c){if(this.uj)var d="margin-left",e="margin-right";else d="margin-right",e="margin-left";var f=parseInt(g(a).css(d),10);this.J2=-1*parseInt(g(a).css(e),10);g(a).css(d,f+this.J2*(c-b-1)+"px")},Fha:function(a,b,c,d){var e=this.uj&&d||!this.uj&&!d?"padding-right":
"padding-left";a.each(function(){var a=parseInt(g(this).css(e),10);g(this).css(e,a+b*(c-1)+"px")})},K1:function(a){if(("focus"===a.type||"mousedown"===a.type||"touchstart"===a.type||93==a.which||121==a.which&&a.shiftKey||93==a.keyCode)&&("mousedown"!==a.type||!d)){var c=this,e=b.slice(0,b.length);g.each(e,function(b,d){if(!g(a.target).closest(d.element).length&&("keydown"===a.type||"mousedown"===a.type&&3===a.which||!g(a.target).closest(d.df).length||d.iUa&&("mousedown"===a.type&&3!==a.which||"touchstart"===
a.type))&&!d.eA){d.eA=a;var e=d.qi(a,"eventSubtree");c.hF(e,function(){d.eA&&(d.df&&d.rw(a),d.eA=null)})}})}},_setOption:function(a,b){this._superApply(arguments);switch(a){case "translations.labelCancel":case "translations":this.yia&&this.yia.text(this.options.translations.labelCancel)}},_destroy:function(){this.element.is(":visible")&&this.rw();this.Ko("none");this.sf&&this.sf();delete this.sf;this.element.removeAttr("aria-activedescendant").removeClass("oj-component").find(".oj-menu").addBack().removeClass("oj-menu oj-menu-submenu oj-menu-icons oj-menu-end-icons oj-menu-text-only").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".oj-menu-item").removeClass("oj-menu-item").removeAttr("role").children("a").removeAttr("aria-disabled").removeUniqueId().removeClass("oj-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var a=g(this);a.data("oj-ojMenu-submenu-icon")&&a.remove()});this.element.find("a").removeAttr("aria-expanded");this.element.find(".oj-menu-divider").removeClass("oj-menu-divider").removeAttr("role");0<=b.indexOf(this)&&b.splice(b.indexOf(this),
1);delete this.Xp;delete this.Xua;var a=this.Kia;delete this.Kia;a&&a();this.XQ&&this.XQ.remove();this.element.Zg("destroy");this._super()},jx:function(a){function b(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")}var c,d,e,f,h=!0;switch(a.keyCode){case g.ui.keyCode.HOME:this.QT("first","first",a);break;case g.ui.keyCode.END:this.QT("last","last",a);break;case g.ui.keyCode.UP:this.SVa(a);break;case g.ui.keyCode.DOWN:this.sqa(a);break;case g.ui.keyCode.LEFT:case g.ui.keyCode.RIGHT:a.keyCode===
g.ui.keyCode.RIGHT^this.uj?this.yb&&!this.yb.is(".oj-disabled")&&this.ze(a):this.qi(a,"active");break;case g.ui.keyCode.ENTER:case g.ui.keyCode.SPACE:this.IQa(a);this.FQ=!0;var k=this;setTimeout(function(){k.FQ=!1},100);break;case g.ui.keyCode.TAB:a.preventDefault();this.df&&this.NJ(a);break;case g.ui.keyCode.ESCAPE:this.df?(d=this.element.attr("aria-activedescendant"),e="#"+this.element.attr("id")+"\x3e*\x3ea",d&&!g("#"+d).is(e)?this.qi(a,"active"):this.NJ(a)):this.qi(a,"active");break;default:h=
!1,c=this.RX||"",d=String.fromCharCode(a.keyCode),e=!1,clearTimeout(this.i2a),d===c?e=!0:d=c+d,f=new RegExp("^"+b(d),"i"),c=this.xB.children(".oj-menu-item").filter(function(){return f.test(g(this).children("a").text())}),c=e&&-1!==c.index(this.yb.next())?this.yb.nextAll(".oj-menu-item"):c,c.length||(d=String.fromCharCode(a.keyCode),f=new RegExp("^"+b(d),"i"),c=this.xB.children(".oj-menu-item").filter(function(){return f.test(g(this).children("a").text())})),c.length?(this.nh(a,c),1<c.length?(this.RX=
d,this.i2a=setTimeout(function(){delete this.RX}.bind(this),1E3)):delete this.RX):delete this.RX}h&&a.preventDefault()},IQa:function(a){this.yb&&!this.yb.is(".oj-disabled")&&(this.yb.children("a[aria-haspopup\x3d'true']").length?this.ze(a):this.Di(a))},refresh:function(){this._super();this.qb();var a=this.element;if(a.is(":visible")){var b=a.data("oj-menu-position");b&&(b.of instanceof g.Event||b.of instanceof Window||g(b.of).is(":visible"))&&(a.position(b),a.find(".oj-menu").each(function(){var a=
g(this);a.is(":visible")&&(b=a.data("oj-menu-position"))&&a.position(b)}))}},qb:function(){this.uj="rtl"===this.Wc();var a=this;if(this.$())a.Yr(),b=g([]);else var b=this.element.find(this.options.menuSelector);var c=b.add(this.element),d=c.children();this.nSa=!!b.length;d.filter(".oj-menu-divider").has("a").removeClass("oj-menu-divider oj-menu-item").removeAttr("role");var e=d.filter(":not(.oj-menu-item):has(a)"),f=e.children("a");this.Noa(e);this.Boa(f);e=d.filter(function(a,b){var c=g(b);return c.is(":not(.oj-menu-item)")&&
!/[^\-\u2014\u2013\s]/.test(c.text())});this.Joa(e);this.GSa(d,e);d.filter(".oj-disabled").children("a").attr("aria-disabled","true");d.filter(":not(.oj-disabled)").children("a").removeAttr("aria-disabled");b.filter(":not(.oj-menu)").addClass("oj-menu oj-menu-submenu oj-menu-dropdown").hide().attr({role:this.role,"aria-hidden":"true"}).each(function(){var b=g(this),c=a.o4(b),d=g("\x3cspan\x3e");d.addClass("oj-menu-submenu-icon oj-component-icon").data("oj-ojMenu-submenu-icon",!0);c.attr("aria-haspopup",
"true").attr("aria-expanded","false").append(d);c=c.attr("id");b.attr("aria-labelledby",c)});c.each(function(){var b=g(this),c=b.children().children(),d=c.children(".oj-menu-item-icon:not(.oj-menu-cancel-icon)").length;b.toggleClass("oj-menu-icons",!!d).toggleClass("oj-menu-text-only",!d);a.aL&&1<a.aL&&a.Fha(c,a.Xta,a.aL,!0);d=c.children(".oj-menu-item-end-icon").length;b.toggleClass("oj-menu-end-icons",!!d);a.ZK&&1<a.ZK&&a.Fha(c,a.J2,a.ZK,!1)});this.yb&&!g.contains(this.element[0],this.yb[0])&&this.g1()},
Noa:function(a){a.addClass("oj-menu-item").attr("role","presentation")},Boa:function(a){a.uniqueId().attr({tabIndex:"-1",role:"menuitem"})},Joa:function(a){a.addClass("oj-menu-divider").attr("role","separator")},GSa:function(a,b){a.removeClass("oj-menu-item-before-divider oj-menu-item-after-divider");b.prev().addClass("oj-menu-item-before-divider");b.next().addClass("oj-menu-item-after-divider")},o4:function(a){return a.prev("a")},p9a:function(){return"menuitem"},VR:function(a,b){var c=a.prev(".oj-menu-divider").add(a.next(".oj-menu-divider"));
b&&(c=c.add(a));return c},nh:function(a,b){a&&"focus"===a.type||this.sf&&this.sf();b=b.first();this.Ypa(b,a);var c=b.parent(),d=c.closest(".oj-menu-item");c.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor");this.VR(d,!0).addClass("oj-focus-ancestor");a&&"keydown"===a.type?this.Vt():this.sf=this.mF(function(){delete this.sf;this.Vt()},this.mK("closing"),this.delay);c=b.children(".oj-menu");c.length&&a&&/^mouse/.test(a.type)&&!this.yb.hasClass("oj-disabled")&&this.QZa(c);this.xB=b.parent()},
Ypa:function(a,b){if(!a.is(this.yb)){var c=this.yb?this.yb:g(),d=a.children("a");this.yb=a;this.element.attr("aria-activedescendant",d.attr("id"));this.fj(c);this.Uj(a);this.VR(c).removeClass("oj-focus");this.VR(a).addClass("oj-focus");this._trigger("_activeItem",b,{previousItem:c,item:a,privateNotice:"The _activeItem event is private.  Do not use."})}},NWa:function(a){if(this.yb){var b=this.yb;this.yb=null;this.element.removeAttr("aria-activedescendant");this.fj(b);this.VR(b).removeClass("oj-focus");
this._trigger("_activeItem",a,{previousItem:b,item:g(),privateNotice:"The _activeItem event is private.  Do not use."})}},g1:function(a){this.sf&&this.sf();this.NWa(a)},NJ:function(a,b){this.df.focus();this.rw(a,b)},rw:function(b,c){if(!this.gx("close","__dismiss",[b,c])){var d=this.element.is(":visible");this.Ko("close");var e={};e[a.fa.Ha.We]=this.element;e[a.fa.Ha.Pv]={event:b,selectUi:c,isOpen:d};a.fa.Xa().close(e)}},nE:function(b,c){var d,e;(d=(a.ic.ad("oj-menu-option-defaults")||{}).animation)&&
d[b]&&(e=d[b][c]);return e},cx:function(){return!this.$()||this.AJ},vU:function(a,b){if(b&&a&&"string"!=typeof a){var c=JSON.stringify(a),d;for(d in b)c=c.replace(new RegExp(d,"g"),b[d]);a=JSON.parse(c)}return a},hF:function(a,b){return a?a.then(b):b()},ZI:function(b){var c=b[a.fa.Ha.We];if(this.$()){b=b[a.fa.Ha.Pv];var d=b.selectUi;if(d&&d.item.length){var e={},d=d.item[0],f=b.event;f&&(e.originalEvent=f instanceof g.Event?f.originalEvent:f);e=new CustomEvent("ojAction",{detail:e,cancelable:!0,bubbles:!0});
d.dispatchEvent(e);b.event=e}}if(this.cx())c.hide();else return b=this.nE(this.i8?"sheet":"dropdown","close"),b=a.ca.Li(c[0],"close",a.Na.EV(c,b),this),b.then(function(){c.hide()}),b},Ot:function(c){var d=c[a.fa.Ha.Pv];c=d.event;var e=d.selectUi,d=d.isOpen;this.element.removeData("oj-menu-position");this.df=void 0;this.i8=!1;!this.$()&&e&&(c=this.N8("select",c,e).event);d&&this._trigger("close",c,{});this.Dw=null;0<=b.indexOf(this)&&b.splice(b.indexOf(this),1)},getCurrentOpenOptions:function(){return g.extend(!0,
{},this.Dw||this.options.openOptions)},open:function(c,d,e){if(!this.gx("open","open",[c,d,e])){this.eA&&(this.AJ=!0,this.rw(this.eA),this.eA=null);d=g.extend({},this.options.openOptions,d);d.position=g.extend({},d.position);e=g.extend({},this.options.submenuOpenOptions,e);var f=this.Dw;this.Dw=d;a.Na.hVa(c);this.iUa=this.element[0].EQ;var h=this.N8("beforeOpen",c,{openOptions:d});if(h.proceed)if(this.element.is(":visible")&&(this.AJ=!0,this.Dw=f,this.rw(h.event),this.eA=null,this.Dw=d),f=d.launcher,
(f=this.$()?"string"===g.type(f)?g(document.getElementById(f)):g(f):"string"===g.type(f)?g(f):f)&&f.length){h=this.uTa(d.display);this.n_a(h);var k,p;if(h){if(this.element.addClass("oj-menu-dropdown").removeClass("oj-menu-sheet"),p=l,k=a.Na.Eq(d.position,this.uj),k.of=a.Na.w5a(k.of,f,c),null==k.of){a.D.warn("position.of passed to Menu.open() is 'event', but the event is null.  Ignoring the call.");this.Dw=null;this.AJ=!1;return}}else this.element.addClass("oj-menu-sheet").removeClass("oj-menu-dropdown"),
p=m,k={my:"bottom",at:n,of:window,collision:"flipfit"};var s=this.element[0],t=b.slice(0,b.length);g.each(t,function(a,b){b.element[0]!==s&&(b.qi(c,"eventSubtree"),b.df&&b.rw(c))});this.VZa=a.Na.Eq(e.position,this.uj);e=this.Xua;g.isFunction(k.using)&&k.using!==e&&(k.origUsing=k.using);k.using=e;this.element.data("oj-menu-position",k);this.Ko("open");e={};e[a.fa.Ha.We]=this.element;e[a.fa.Ha.PC]=f;e[a.fa.Ha.rt]=k;e[a.fa.Ha.jt]=this.tE();e[a.fa.Ha.Xv]="oj-menu-layer";e[a.fa.Ha.Pm]=p;e[a.fa.Ha.Pv]=
{event:c,initialFocus:d.initialFocus,launcher:f,isDropDown:h};e[a.fa.Ha.pH]=this.$();a.fa.Xa().open(e)}else a.D.warn("When calling Menu.open(), must specify openOptions.launcher via the component option, method param, or beforeOpen listener.  Ignoring the call."),this.Dw=null;else this.Dw=f;this.AJ=!1}},$I:function(b){var c,d=b[a.fa.Ha.We],e=b[a.fa.Ha.rt];b=b[a.fa.Ha.Pv].isDropDown;d.show();d.position(e);this.cx()||(c=this.nE(b?"dropdown":"sheet","open"),c=a.ca.Li(d[0],"open",a.Na.EV(d,c),this),b&&
(c=void 0));return c},QI:function(c){var d=c[a.fa.Ha.Pv];c=d.event;var e=d.initialFocus,f=d.launcher,d=d.isDropDown,g="firstItem"===e;(g||"menu"===e)&&this.element.focus();g?this.nh(c,this.element.children().first()):this.g1(c);this.df=f;this.i8=!d;b.push(this);this._trigger("open",c,{})},QZa:function(a){this.sf&&this.sf();"true"===a.attr("aria-hidden")&&(this.sf=this.mF(function(){delete this.sf;this.Vt();this.Iqa(a)},this.mK("closing and opening"),this.delay))},Iqa:function(c){if("true"===c.attr("aria-hidden")){var d=
g.extend({of:this.yb},this.VZa);this.sf&&this.sf();this.element.find(".oj-menu").not(c.parents(".oj-menu")).hide().attr("aria-hidden","true").removeData("oj-menu-position");c.show().removeAttr("aria-hidden").position(d).data("oj-menu-position",d);this.o4(c).attr("aria-expanded","true");!this.df&&0>b.indexOf(this)&&b.push(this);if(!this.cx()){var e=this.nE("submenu","open"),e=this.vU(e,{"#myPosition":d.my});a.ca.Li(c[0],"open",e,this)}}},DQ:function(b,c,d){function e(){delete h.sf;var a=c?h.element:
g(b&&b.target).closest(h.element.find(".oj-menu"));a.length||(a=h.element);var d=h.Vt(a);return d=h.hF(d,function(){h.g1(b);h.xB=a})}var f;this.sf&&this.sf();var h=this;d?this.cx()?h.sf=h.mF(e,h.mK("closing"),d):f=new Promise(function(a){h.sf=h.mF(e,h.mK("closing"),d,function(){a(!0)})}):f=e();if(f){var k=a.Context.getContext(this.element[0]).Dc().Xc({description:"closing submenus"});f.then(k)}return f},Vt:function(c){function d(a){a.hide().attr("aria-hidden","true").removeData("oj-menu-position");
f.o4(a).attr("aria-expanded","false")}var e;c||(c=this.yb?this.yb.parent():this.element);var f=this,h=f.nE("submenu","close"),k=c.find(".oj-menu");if(this.cx())d(k),c.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor");else{var l=function(b){var c=null;b.children().children(".oj-menu").each(function(b,e){function k(){var b=m.data("oj-menu-position"),b=f.vU(h,{"#myPosition":b?b.my:null});return a.ca.Li(e,"close",b,f).then(function(){d(m)})}var m=g(e);if(m.is(":visible")){var n=l(m);c=f.hF(n,
k)}else d(m)});return c};e=l(c);e=this.hF(e,function(){c.find(".oj-focus-ancestor").removeClass("oj-focus-ancestor")})}this.df||0<=b.indexOf(this)&&c===this.element&&b.splice(b.indexOf(this),1);return e},qi:function(b,c){var d;if(null==c||"active"===c){var e=this.xB&&this.xB.closest(".oj-menu-item",this.element);if(e&&e.length){var f=this;d=this.Vt();d=this.hF(d,function(){f.nh(b,e)})}}else"all"===c||"eventSubtree"===c?d=this.DQ(b,"all"===c,this.delay):a.D.warn("Invalid param "+c+" passed to Menu._collapse().  Ignoring the call.");
return d},ze:function(a){var b=this.yb&&this.yb.children(".oj-menu ").children(".oj-menu-item").first();b&&b.length&&(this.Iqa(b.parent()),this.sf&&this.sf(),this.sf=this.mF(function(){delete this.sf;this.nh(a,b)},this.XR("focusing an item")))},sqa:function(a){this.QT("next","first",a)},SVa:function(a){this.QT("prev","last",a)},k9a:function(){return this.yb&&!this.yb.prevAll(".oj-menu-item").length},l9a:function(){return this.yb&&!this.yb.nextAll(".oj-menu-item").length},QT:function(a,b,c){var d;
this.yb&&(d="first"===a||"last"===a?this.yb["first"===a?"prevAll":"nextAll"](".oj-menu-item").eq(-1):this.yb[a+"All"](".oj-menu-item").eq(0));d&&d.length&&this.yb||(d=this.xB.children(".oj-menu-item")[b]());this.nh(c,d)},Di:function(b){if(!this.yb&&b&&b.target){var c=g(b.target).closest(".oj-menu-item");c.closest(this.element).length&&this.Ypa(c,b)}if(this.yb)if(this.yb.has(".oj-menu").length||this.yb.is(".oj-disabled"))a.D.warn("Selecting a disabled menu item or parent menu item is not allowed.");
else{var d=this.yb.is(this.YQ)?void 0:{item:this.yb},c=this.DQ(b,!0);if(this.df){var e=this;this.hF(c,function(){e.NJ(b,d)})}}else a.D.warn("Menu._select() called when no menu item is focused and no menu item can be inferred from event param.")},nB:function(){this.element.remove()},tE:function(){if(!this.Xp){var b=this.Xp={};b[a.fa.uc.TC]=this.L1.bind(this);b[a.fa.uc.UC]=this.nB.bind(this);b[a.fa.uc.qt]=this.refresh.bind(this);b[a.fa.uc.SC]=this.K1.bind(this);b[a.fa.uc.hP]=this.$I.bind(this);b[a.fa.uc.fP]=
this.QI.bind(this);b[a.fa.uc.gP]=this.ZI.bind(this);b[a.fa.uc.eP]=this.Ot.bind(this)}return this.Xp},L1:function(){this.AJ=!0;this.Vt(this.element);this.rw(null);this.Ko("none")},yM:function(b,c){var d=c.element.element;d.css(b);a.Na.zva(d,c);(d=d.data("oj-menu-position"))&&(d=d.origUsing)&&d(b,c);a.Na.gaa(c)&&(this.Kia=this.mF(this.L1,this.mK("closing"),1))},getNodeBySubId:function(a){switch(a&&a.subId){case p:return this.w1?this.YQ[0]:null;default:return this._super(a)}},getSubIdByNode:function(a){return this.YQ&&
this.YQ.is(g(a).parents().addBack(a))?{subId:p}:this._super(a)},uTa:function(a){if(this.nSa)return!0;switch(a){case "dropDown":return!0;case "sheet":return!1;case "auto":return s.matches;default:throw Error("Invalid value for Menu openOptions.display: "+a);}},n_a:function(a){h&&(a?this.w1&&(this.pla().detach().eq(0).prev().removeClass("oj-menu-item-before-divider"),this.w1=!1):(this.pla().appendTo(this.element).eq(0).prev().addClass("oj-menu-item-before-divider"),this.w1=!0))},pla:function(){if(!this.XQ){var a=
g("\x3cli\x3e\x3c/li\x3e",this.document[0]),b=g("\x3ca href\x3d'#'\x3e\x3c/a\x3e",this.document[0]).text(this.options.translations.labelCancel);g("\x3cspan class\x3d'oj-menu-item-icon oj-component-icon oj-menu-cancel-icon'\x3e\x3c/span\x3e",this.document[0]).prependTo(b);var c=g("\x3cli\x3e\x3c/li\x3e",this.document[0]).addClass("oj-menu-item-cancel oj-menu-item-after-divider").append(b);this.Joa(a);this.Boa(b);this.Noa(c);this.yia=b;this.YQ=c;this.XQ=g([a[0],c[0]])}return this.XQ},AZa:function(){k&&
(this.element.Zg(t),this._on({swipedown:function(a){this.i8&&"touch"===a.gesture.pointerType&&(this.DQ(a,!0),this.NJ(a))}}))},Ko:function(b){var c=this.fq;c&&(c.destroy(),delete this.fq);0>["open","close"].indexOf(b)||(this.fq=new a.Rm(this.element,b,"ojMenu",this.$()))},gx:function(a,b,c){var d=this.fq;return d?d.laa(this,a,b,c):!1},mF:function(b,c,d,e){function f(){g&&(g(),g=null,e&&e())}var g=a.Context.getContext(this.element[0]).Dc().Xc({description:c}),h=this,k=setTimeout(function(){var a=b.bind(h)();
a&&a instanceof Promise?a.then(f):f()},d||0);return function(){clearTimeout(k);f()}},XR:function(a){return"Menu with id '"+this.element.attr("id")+"' is busy "+a+"."},mK:function(a){return this.XR(a+" a submenu")},Ih:function(){a.U.ug(this.element)===a.U.Kd.OPEN&&this.L1();this._super()}});var b=[],d=!1,e=-1<navigator.userAgent.indexOf("Macintosh")&&-1<navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),f=a.ic.ad("oj-menu-config")||{},h="menuItem"===f.sheetCancelAffordance,
k="dismiss"===f.sheetSwipeDownBehavior,l=f.dropDownModality||"modeless",m=f.sheetModality||"modal",n="bottom-"+(f.sheetMarginBottom||0),t=k&&{recognizers:[[c.Swipe,{direction:c.DIRECTION_DOWN}]]},s=function(){var a=f.dropDownThresholdWidth;null==a&&(a="768px");return window.matchMedia("(min-width: "+a+")")}(),p="oj-menu-cancel-command"})();a.J.Ua("oj-menu","baseComponent",{properties:{disabled:{type:"boolean"},openOptions:{type:"object",properties:{display:{type:"string",enumValues:["auto","dropDown",
"sheet"]},initialFocus:{type:"string",enumValues:["firstItem","menu","none"]},launcher:{type:"string"},position:{type:"object",properties:{my:{type:"string|object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"string|object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},offset:{type:"object",
properties:{x:{type:"number"},y:{type:"number"}}},of:{type:"string|object"},collision:{type:"string",enumValues:["flip","fit","flipfit","flipcenter","none"]}}},submenuPosition:{type:"object",properties:{my:{type:"object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",enumValues:["top","center","bottom"]}}},at:{type:"object",properties:{horizontal:{type:"string",enumValues:["start","end","left","center","right"]},vertical:{type:"string",
enumValues:["top","center","bottom"]}}},offset:{type:"object",properties:{x:{type:"number"},y:{type:"number"}}},collision:{type:"string",enumValues:["flip","fit","flipfit","flipcenter","none"]}}}}},translations:{type:"object",properties:{labelCancel:{type:"string"}}}},methods:{getSubIdByNode:{},open:{},refresh:{}},events:{animateStart:{},animateEnd:{},beforeOpen:{},close:{},open:{}},extension:{Ya:"ojMenu"}});a.J.register("oj-menu",{metadata:a.J.getMetadata("oj-menu")})});